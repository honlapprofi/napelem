!function($){"use strict";var lfb_isLinking=!1,lfb_links=new Array,lfb_linkCurrentIndex=-1,lfb_canvasTimer,lfb_mouseX,lfb_mouseY,lfb_linkGradientIndex=1,lfb_itemWinTimer,lfb_currentDomElement=!1,lfb_currentStep=!1,lfb_currentStepID=0,lfb_lock=!1,lfb_defaultStep=!1,lfb_steps=!1,lfb_params,lfb_currentLinkIndex=0,lfb_settings,lfb_formfield,lfb_currentFormID=0,lfb_actTimer,lfb_currentForm=!1,lfb_currentItemID=0,lfb_canSaveLink=!0,lfb_canDuplicate=!0,lfb_openChartsAuto=!1,lfb_currentCharts=!1,lfb_currentChartsOptions,lfb_currentChartsData,lfb_currentRedirEdit=0,lfb_distanceModeQt=!1,lfb_editorCustomJS,lfb_editorCustomCSS,lfb_editorLog,lfb_formToDelete=0,lfb_calculationModeQt=!1,lfb_currentLogID=0,lfb_orderModified=!1,lfb_logEditorStepThStyle="",lfb_logEditorTdStyle="",lfb_logEditorSummaryTable=!1,lfb_currentLayerTr,lfb_currentLogCurrency="$",lfb_currentLogCurrencyPosition="left",lfb_currentLogDecSep=".",lfb_currentLogThousSep=",",lfb_currentLogMilSep="",lfb_currentLogSubTxt="",lfb_currentLogSubTotal=0,lfb_currentLogTotal=0,lfb_currentLogIsPaid=!1,lfb_currentLogStatus=!1,lfb_currentLogUseSub=!1,lfb_currentLogCanPay=!1,lfb_logsTable,lfb_customersTable,lfb_customerOrdersTable,lfb_disableLinksAnim=!1,lfb_currentCalendarID=1,lfb_currentCalendarEventID=0,lfb_currentCalendarEvents=new Array,lfb_currentCalendarDefaultReminders=new Array,lfb_currentCalendarCats=new Array,lfb_currentCalendarDaysWeek=new Array,lfb_currentCalendarDisabledHours=new Array,lfb_lastCreatedStepID=-1,lfb_lastCreatedLinkID=-1,lfb_lastPanel=!1,lfb_itemPriceCalculationEditor,lfb_itemCalculationQtEditor,lfb_itemVariableCalculationEditor,lfb_isDraggingComponent=!1,lfb_elementHoverTimer=!1,lfb_tld_selectedElement,lfb_tld_deviceMode="all",lfb_tld_imgField,lfb_tld_modifsMade=!1,lfb_tld_newModifsMade=!1,lfb_tld_initialStyles=new Array,lfb_tld_styles=new Array,lfb_tld_firstLoad=!0,lfb_tld_previewUrl,lfb_tld_elementInitialized=!1,lfb_tld_usedGoogleFonts=new Array,lfb_tld_nullStyle="background-color: rgba(0, 0, 0, 0); border-width: 0px; position: static; overflow: visible;",lfb_tld_editorCSS,lfb_tld_targetStepID="",lfb_tld_targetDomElement="";lfb_data=lfb_data[0];var lfb_stepPossibleWidths=new Array(lfb_data.texts.Automatic,"960","1024","1280");function lfb_initVisualBuilder(){$("#lfb_form").on("lfb_stepFrameLoaded",function(){lfb_stepFrameLoaded()}),$("#lfb_form").on("lfb_editItem",function(e,t){lfb_editItem(t)}),$("#lfb_form").on("lfb_openFormDesigner",function(e,t,l){lfb_openFormDesigner(t,l)}),$("#lfb_form").on("lfb_duplicateItem",function(e,t){lfb_duplicateItem(t)}),$("#lfb_form").on("lfb_askDeleteItem",function(e,t){lfb_askDeleteItem(t)}),$("#lfb_form").on("lfb_newItemAdded",function(e,t){lfb_newItemAdded(t)})}function lfb_updateCalendarLeftMenuHeight(){var e=jQuery("#lfb_calendar").outerHeight();jQuery("#lfb_form").height()>e&&(e=jQuery("#lfb_form").outerHeight()),jQuery("#lfb_calendarLeftMenu").css({height:e})}function lfb_updatelLeftPanels(){jQuery(".lfb_lPanel.lfb_lPanelLeft").each(function(){var e=jQuery(this).next(".lfb_lPanel.lfb_lPanelMain").outerHeight();jQuery("#lfb_form").height()>e&&(e=jQuery("#lfb_form").outerHeight()),jQuery(this).css({height:e})})}function lfb_openWinLicense(){1==lfb_data.lscV?(jQuery("#lfb_lscUnverified").hide(),jQuery("#lfb_winActivation .alert").hide()):jQuery("#lfb_lscUnverified").show(),lfb_lock=!1,jQuery("#lfb_winActivation").fadeIn(260),jQuery("#lfb_winActivation").fadeIn(),jQuery("#lfb_closeWinActivationBtn").removeAttr("disabled"),jQuery("#lfb_closeWinActivationBtn").removeClass("disabled")}function lfb_initFormsBackend(){jQuery('#lfb_formFields [name="use_paypal"]').on("change",lfb_formPaypalChange),jQuery('#lfb_formFields [name="use_stripe"]').on("change",lfb_formStripeChange),jQuery('#lfb_formFields [name="use_razorpay"]').on("change",lfb_formRazorPayChange),jQuery('#lfb_formFields [name="isSubscription"]').on("change",lfb_formIsSubscriptionChange),jQuery('#lfb_formFields [name="gravityFormID"]').on("change",lfb_formGravityChange),jQuery('#lfb_formFields [name="save_to_cart"]').on("change",lfb_formWooChange),jQuery('#lfb_formFields [name="save_to_cart_edd"]').on("change",lfb_formEDDChange),jQuery('#lfb_formFields [name="email_toUser"]').on("change",lfb_formEmailUserChange),jQuery('#lfb_formFields [name="useEmailVerification"]').on("change",lfb_useEmailVerificationChange),jQuery('#lfb_formFields [name="legalNoticeEnable"]').on("change",lfb_formLegalNoticeChange),jQuery('#lfb_formFields [name="useVAT"]').on("change",lfb_formUseVATChange),jQuery('#lfb_formFields [name="useSummary"]').on("change",lfb_formUseSummaryChange),jQuery('#lfb_formFields [name="intro_enabled"]').on("change",lfb_formUseIntroChange),jQuery('#lfb_formFields [name="paypal_useIpn"]').on("change",lfb_formIpnChange),jQuery('#lfb_formFields [name="useCoupons"]').on("change",lfb_formUseCouponsChange),jQuery('#lfb_formFields [name="useRedirectionConditions"]').on("change",lfb_changeUseRedirs),jQuery('#lfb_formFields [name="useMailchimp"]').on("change",lfb_changeMailchimp),jQuery('#lfb_formFields [name="useMailpoet"]').on("change",lfb_changeMailpoet),jQuery('#lfb_formFields [name="useGetResponse"]').on("change",lfb_changeGetResponse),jQuery('#lfb_formFields [name="useGoogleFont"]').on("change",lfb_useGoogleFontChange),jQuery('#lfb_formFields [name="scrollTopPage"]').on("change",lfb_scrollTopPageChange),jQuery('#lfb_formFields [name="previousStepBtn"]').on("change",lfb_previousStepBtnChange),jQuery('#lfb_formFields [name="paymentType"]').on("change",lfb_updateEmailPaymentType),jQuery('#lfb_formFields [name="totalIsRange"]').on("change",lfb_totalIsRangeChange),jQuery('#lfb_formFields [name="totalRangeMode"]').on("change",lfb_totalRangeModeChange),jQuery('#lfb_formFields [name="getResponseKey"]').on("focusout",lfb_changeGetResponseList),jQuery('#lfb_formFields [name="mailchimpKey"]').on("focusout",lfb_changeMailchimpList),jQuery('#lfb_formFields [name="razorpay_payMode"]').on("change",lfb_changeRazorpayPayMode),jQuery('#lfb_formFields [name="stripe_payMode"]').on("change",lfb_changeStripePayMode),jQuery('#lfb_formFields [name="paypal_payMode"]').on("change",lfb_changePaypalPayMode),jQuery('#lfb_formFields [name="summary_hidePrices"]').on("change",lfb_changeSummaryPriceShow),jQuery('#lfb_formFields [name="summary_hideTotal"]').on("change",lfb_changeSummaryPriceShow),jQuery('#lfb_formFields [name="enableFloatingSummary"]').on("change",lfb_changeEnableFloatingSummary),jQuery('#lfb_formFields [name="summary_hidePrices"]').on("change",lfb_changeSummaryHidePrices),jQuery('#lfb_formFields [name="useCaptcha"]').on("change",lfb_changeSendEmailLastStep),jQuery('#lfb_formFields [name="enableSaveForLaterBtn"]').on("change",lfb_changeSaveForLater),jQuery('#lfb_formFields [name="sendPdfAdmin"]').on("change",lfb_changeSendPdfAdmin),jQuery('#lfb_formFields [name="sendPdfCustomer"]').on("change",lfb_changeSendPdfUser),jQuery('#lfb_formFields [name="enablePdfDownload"]').on("change",lfb_changeSendPdfUser),jQuery('#lfb_formFields [name="enableCustomersData"]').on("change",lfb_changeEnableCustomerData),jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').on("change",lfb_changeSendUrlVariables),jQuery("#lfb_formFields").find('[name="enableZapier"]').on("change",lfb_formZapierChange),jQuery("#lfb_formFields").find('[name="disableGrayFx"]').on("change",lfb_formDisableGreyFx),jQuery("#lfb_formFields").find('[name="showSteps"]').on("change",lfb_formShowStepsChange),jQuery("#lfb_formFields").find('[name="useCaptcha"]').on("change",lfb_formUseCaptchaChange),jQuery("#lfb_formFields").find('[name="enablePdfDownload"]').on("change",lfb_formPDFDownloadChange),jQuery("#lfb_formFields").find('[name="pdfDownloadFilename"]').on("keyup focusout",lfb_formPDFFilenameChange),jQuery("#lfb_chartsTypeSelect").on("change",lfb_chartsTypeChange),jQuery("#lfb_chartsMonth").on("change",lfb_chartsMonthChange),jQuery("#lfb_chartsYear").on("change",lfb_chartsYearChange),lfb_formGravityChange(),lfb_formEDDChange(),lfb_formLegalNoticeChange(),lfb_formUseVATChange(),lfb_formEmailUserChange(),lfb_useEmailVerificationChange(),lfb_formUseSummaryChange(),lfb_formPaypalChange(),lfb_formStripeChange(),lfb_formRazorPayChange(),lfb_formUseIntroChange(),lfb_formUseCouponsChange(),lfb_changeUseRedirs(),lfb_changeMailchimp(),lfb_changeMailpoet(),lfb_changeGetResponse(),lfb_changeGetResponseList(),lfb_changeMailchimpList(),lfb_useGoogleFontChange(),lfb_chartsTypeChange(),lfb_totalIsRangeChange(),lfb_totalRangeModeChange(),lfb_scrollTopPageChange(),lfb_previousStepBtnChange(),lfb_updateEmailPaymentType(),lfb_changeStripePayMode(),lfb_changePaypalPayMode(),lfb_changeRazorpayPayMode(),lfb_changeSummaryPriceShow(),lfb_changeEnableFloatingSummary(),lfb_changeSendEmailLastStep(),lfb_changeSaveForLater(),lfb_changeSendPdfAdmin(),lfb_changeSendPdfUser(),lfb_changeEnableCustomerData(),lfb_formWooChange(),lfb_changeSendUrlVariables(),lfb_formZapierChange(),lfb_formDisableGreyFx(),lfb_formShowStepsChange(),lfb_formUseCaptchaChange(),lfb_formPDFDownloadChange(),lfb_changeSummaryHidePrices(),jQuery('#lfb_calculationValueBubble select[name="itemID"]').on("change",lfb_updateCalculationsValueElements),jQuery('#lfb_calculationValueBubble select[name="valueType"]').on("change",lfb_updateCalculationsValueType),jQuery('#lfb_emailValueBubble select[name="itemID"]').on("change",lfb_updateEmailValueElements),jQuery('#lfb_emailValueBubble select[name="valueType"]').on("change",lfb_updateEmailValueType),lfb_updateEmailValueType(),lfb_updateCalculationsValueType()}function lfb_formPDFFilenameChange(){var e=(e=jQuery("#lfb_formFields").find('[name="pdfDownloadFilename"]').val()).replace(/[^a-z0-9-_]/gi,"");jQuery("#lfb_formFields").find('[name="pdfDownloadFilename"]').val(e)}function lfb_formPDFDownloadChange(){jQuery("#lfb_formFields").find('[name="enablePdfDownload"]').is(":checked")?jQuery('#lfb_formFields [name="pdfDownloadFilename"]').closest(".form-group").slideDown():jQuery('#lfb_formFields [name="pdfDownloadFilename"]').closest(".form-group").slideUp()}function lfb_initWinCustomerDetails(){jQuery('#lfb_customerDetailsBtns a[data-action="saveCustomer"]').on("click",function(){lfb_saveCustomer()})}function lfb_initWinCustomers(){jQuery('#lfb_customersPanel a[data-action="exportCustomersCsv"]').on("click",lfb_exportCustomersCSV),jQuery('#lfb_customersPanel a[data-action="addCustomer"]').on("click",function(){lfb_editCustomer(0)})}function lfb_initWinGlobalSettings(){jQuery('#lfb_winGlobalSettings a[data-action="saveGlobalSettings"]').on("click",function(){lfb_saveGlobalSettings(function(){jQuery("#lfb_winGlobalSettings").fadeOut(260),lfb_loadSettings()})}),jQuery('#lfb_winGlobalSettings [name="enableCustomerAccount"]').on("change",function(){jQuery(this).is(":checked")?jQuery('#lfb_winGlobalSettings [name="customerAccountPageID"]').closest(".form-group").slideDown():jQuery('#lfb_winGlobalSettings [name="customerAccountPageID"]').closest(".form-group").slideUp()}),jQuery('#lfb_winGlobalSettings [name="useSMTP"]').on("change",function(){jQuery(this).is(":checked")?(jQuery("#lfb_winGlobalSettings").find('[name="smtp_host"],[name="smtp_port"],[name="smtp_username"],[name="smtp_password"],[name="smtp_mode"]').closest(".form-group").slideDown(),jQuery('#lfb_winGlobalSettings [data-action="testSMTP"],#lfb_smtpTestRep').slideDown()):(jQuery("#lfb_winGlobalSettings").find('[name="smtp_host"],[name="smtp_port"],[name="smtp_username"],[name="smtp_password"],[name="smtp_mode"]').closest(".form-group").slideUp(),jQuery('#lfb_winGlobalSettings [data-action="testSMTP"],#lfb_smtpTestRep').slideUp())})}function lfb_initWinDeleteCustomer(){jQuery('#lfb_winAskDeleteCustomer a[data-action="confirmDeleteCustomer"]').on("click",function(){lfb_confirmDeleteCustomer(jQuery("#lfb_winAskDeleteCustomer").data("customerID")),jQuery("#lfb_winAskDeleteCustomer").fadeOut(260)})}function lfb_initMainToolbar(){jQuery('#lfb_mainToolbar a[data-action="openGlobalSettings"]').on("click",lfb_openGlobalSettings),jQuery('#lfb_mainToolbar a[data-action="showCustomersPanel"]').on("click",lfb_showCustomersPanel),jQuery('#lfb_mainToolbar a[data-action="showAllOrders"]').on("click",lfb_showAllOrders),jQuery('#lfb_mainToolbar a[data-action="openCalendarsPanel"]').on("click",function(){lfb_openCalendarsPanel(1)})}function lfb_initLogsToolbar(){jQuery('#lfb_logsToolbar a[data-action="refreshLogs"]').on("click",lfb_refreshLogs),jQuery('#lfb_logsToolbar a[data-action="exportLogs"]').on("click",lfb_exportLogs),jQuery('#lfb_logsToolbar a[data-action="openCharts"]').on("click",function(){lfb_showLoader(),lfb_openCharts(jQuery("#lfb_panelLogs").attr("data-formid"))}),jQuery('#lfb_logsToolbar a[data-action="returnToForm"]').on("click",lfb_closeLogs)}function lfb_initEditOrderToolbar(){jQuery('#lfb_winLog .lfb_menuBar a[data-action="editOrder"]').on("click",lfb_editLog),jQuery('#lfb_winLog .lfb_menuBar a[data-action="sendOrderByEmail"]').on("click",lfb_openWinSendOrderEmail),jQuery('#lfb_winLog .lfb_menuBar a[data-action="downloadOrder"]').on("click",lfb_downloadOrder),jQuery('#lfb_winLog .lfb_menuBar a[data-action="returnOrders"]').on("click",lfb_returnToOrdersList)}function lfb_initVariablesToolbar(){jQuery('#lfb_variablesToolbar a[data-action="addNewVariable"]').on("click",lfb_addNewVariable),jQuery('#lfb_variablesToolbar a[data-action="returnToForm"]').on("click",lfb_closeFormVariables)}function lfb_initFormsTopBtns(){jQuery('#lfb_formTopbtns a[data-action="addFormStep"]').unbind("click").on("click",function(){lfb_addStep(lfb_data.texts["My step"])}),jQuery('#lfb_formTopbtns a[data-action="shortcodesInfos"]').unbind("click").on("click",function(){lfb_showShortcodeWin(lfb_currentFormID)}),jQuery('#lfb_formTopbtns a[data-action="viewFormLogs"]').unbind("click").on("click",function(){lfb_loadLogs(lfb_currentFormID)}),jQuery('#lfb_formTopbtns a[data-action="viewFormCharts"]').unbind("click").on("click",function(){lfb_showLoader(),lfb_loadCharts(lfb_currentFormID)}),jQuery('#lfb_formTopbtns a[data-action="viewFormVariables"]').unbind("click").on("click",lfb_viewFormVariables)}function lfb_formUseCaptchaChange(){jQuery("#lfb_formFields").find('[name="useCaptcha"]').is(":checked")?(jQuery("#lfb_formFields").find('[name="recaptcha3Key"]').closest(".form-group").slideDown(),jQuery("#lfb_formFields").find('[name="recaptcha3KeySecret"]').closest(".form-group").slideDown()):(jQuery("#lfb_formFields").find('[name="recaptcha3Key"]').closest(".form-group").slideUp(),jQuery("#lfb_formFields").find('[name="recaptcha3KeySecret"]').closest(".form-group").slideUp())}function lfb_formShowStepsChange(){"0"==jQuery('#lfb_formFields [name="showSteps"]').val()&&jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?jQuery('#lfb_formFields [name="progressBarPriceType"]').parent().slideDown():jQuery('#lfb_formFields [name="progressBarPriceType"]').parent().slideUp()}function lfb_formDisableGreyFx(){jQuery("#lfb_formFields").find('[name="disableGrayFx"]').is(":checked")?jQuery("#lfb_formFields").find('[name="inverseGrayFx"]').closest(".form-group").slideUp():jQuery("#lfb_formFields").find('[name="inverseGrayFx"]').closest(".form-group").slideDown()}function lfb_formZapierChange(){jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked")?jQuery("#lfb_formFields").find('[name="zapierWebHook"]').closest(".form-group").slideDown():jQuery("#lfb_formFields").find('[name="zapierWebHook"]').closest(".form-group").slideUp()}function lfb_changeSendUrlVariables(){jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")?(jQuery("#lfb_formFields").find('[name="sendVariablesMethod"]').closest(".form-group").slideDown(),jQuery("#lfb_winEditVariable").find('[name="sendAsGet"]').closest(".form-group").slideDown()):(jQuery("#lfb_formFields").find('[name="sendVariablesMethod"]').closest(".form-group").slideUp(),jQuery("#lfb_winEditVariable").find('[name="sendAsGet"]').closest(".form-group").slideUp())}function lfb_changeEnableCustomerData(){jQuery('#lfb_formFields [name="enableCustomersData"]').is(":checked")?(jQuery('#lfb_formFields [name="customersDataEmailLink"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="email_toUser"]').parent().bootstrapSwitch("setState",!0),jQuery('#lfb_formFields [name="email_toUser"]').parent().parent().addClass("deactivate"),jQuery("#alertCustomerData").slideDown(),jQuery('#lfb_formFields [name="email_toUser"]').closest(".switch.has-switch").attr("title",lfb_data.texts.userEmailTipDisabled).b_tooltip("fixTitle")):(jQuery("#lfb_gdprSettings").slideUp(),jQuery('#lfb_formFields [name="customersDataEmailLink"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="email_toUser"]').parent().parent().removeClass("deactivate"),jQuery('#lfb_formFields [name="email_toUser"]').closest(".switch.has-switch").attr("title",lfb_data.texts.userEmailTip).b_tooltip("fixTitle"),jQuery("#alertCustomerData").slideUp())}function lfb_changeSendPdfUser(){jQuery('#lfb_formFields [name="sendPdfCustomer"]').is(":checked")||jQuery('#lfb_formFields [name="enablePdfDownload"]').is(":checked")?jQuery("#lfb_pdfTemplateUserContainer").slideDown():jQuery("#lfb_pdfTemplateUserContainer").slideUp()}function lfb_changeSendPdfAdmin(){jQuery('#lfb_formFields [name="sendPdfAdmin"]').is(":checked")?jQuery("#lfb_pdfTemplateAdminContainer").slideDown():jQuery("#lfb_pdfTemplateAdminContainer").slideUp()}function lfb_changeSaveForLater(){jQuery('#lfb_formFields [name="enableSaveForLaterBtn"]').is(":checked")?(jQuery('#lfb_formFields [name="saveForLaterLabel"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="saveForLaterDelLabel"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="saveForLaterIcon"]').closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="saveForLaterLabel"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="saveForLaterDelLabel"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="saveForLaterIcon"]').closest(".form-group").slideUp())}function lfb_changeSendEmailLastStep(){var t=!0;(jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")||jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")||jQuery('#lfb_formFields [name="use_razorpay"]').is(":checked")||jQuery('#lfb_formFields [name="useCaptcha"]').is(":checked")||jQuery('#lfb_formFields [name="legalNoticeEnable"]').is(":checked")||jQuery('#lfb_formFields [name="useCoupons"]').is(":checked"))&&(t=!1),t&&jQuery.each(lfb_currentForm.fields,function(){var e=this;"richtext"!=e.type&&"shortcode"!=e.type&&"separator"!=e.type&&"row"!=e.type&&("0"!=e.isHidden&&"1"!=e.isRequired&&""==e.validation||(t=!1))}),t?jQuery('#lfb_formFields [name="sendEmailLastStep"]').closest(".switch.has-switch").removeClass("deactivate"):(jQuery('#lfb_formFields [name="sendEmailLastStep"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="sendEmailLastStep"]').closest(".switch.has-switch").addClass("deactivate"))}function lfb_changeSummaryHidePrices(){jQuery('#lfb_formFields [name="summary_hidePrices"]').is(":checked")?(jQuery('#lfb_formFields [name="floatSummary_hidePrices"]').parent().bootstrapSwitch("setState",!0),jQuery('#lfb_formFields [name="floatSummary_hidePrices"]').closest(".form-group").slideUp()):jQuery('#lfb_formFields [name="floatSummary_hidePrices"]').closest(".form-group").slideDown()}function lfb_changeEnableFloatingSummary(){jQuery('#lfb_formFields [name="enableFloatingSummary"]').is(":checked")?(jQuery('#lfb_formFields [name="floatSummary_label"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="floatSummary_icon"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="floatSummary_numSteps"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="floatSummary_hidePrices"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="floatSummary_showInfo"]').closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="floatSummary_label"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="floatSummary_icon"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="floatSummary_numSteps"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="floatSummary_hidePrices"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="floatSummary_showInfo"]').closest(".form-group").slideUp())}function lfb_changeSummaryPriceShow(){jQuery('#lfb_formFields [name="summary_hidePrices"]').is(":checked")||jQuery('#lfb_formFields [name="summary_hideTotal"]').is(":checked")?jQuery('#lfb_formFields [name="summary_showAllPricesEmail"]').closest(".form-group").slideDown():jQuery('#lfb_formFields [name="summary_showAllPricesEmail"]').closest(".form-group").slideUp()}function lfb_changePaypalPayMode(){jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")&&!jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?(jQuery('#lfb_formFields [name="paypal_payMode"]').closest(".form-group").slideDown(),""==jQuery('#lfb_formFields [name="paypal_payMode"]').val()?(jQuery('#lfb_formFields [name="paypal_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="percentToPay"]').closest(".form-group").slideUp()):"fixed"==jQuery('#lfb_formFields [name="paypal_payMode"]').val()?(jQuery('#lfb_formFields [name="paypal_fixedToPay"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="percentToPay"]').closest(".form-group").slideUp()):"percent"==jQuery('#lfb_formFields [name="paypal_payMode"]').val()&&(jQuery('#lfb_formFields [name="paypal_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="percentToPay"]').closest(".form-group").slideDown())):(jQuery('#lfb_formFields [name="paypal_payMode"]').val(""),jQuery('#lfb_formFields [name="paypal_payMode"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="paypal_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="percentToPay"]').closest(".form-group").slideUp())}function lfb_changeRazorpayPayMode(){jQuery('#lfb_formFields [name="use_razorpay"]').is(":checked")&&!jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?(jQuery('#lfb_formFields [name="razorpay_payMode"]').closest(".form-group").slideDown(),""==jQuery('#lfb_formFields [name="razorpay_payMode"]').val()?(jQuery('#lfb_formFields [name="razorpay_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="razorpay_percentToPay"]').closest(".form-group").slideUp()):"fixed"==jQuery('#lfb_formFields [name="razorpay_payMode"]').val()?(jQuery('#lfb_formFields [name="razorpay_fixedToPay"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="razorpay_percentToPay"]').closest(".form-group").slideUp()):"percent"==jQuery('#lfb_formFields [name="razorpay_payMode"]').val()&&(jQuery('#lfb_formFields [name="razorpay_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="razorpay_percentToPay"]').closest(".form-group").slideDown())):(jQuery('#lfb_formFields [name="razorpay_payMode"]').val(""),jQuery('#lfb_formFields [name="razorpay_payMode"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="razorpay_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="razorpay_percentToPay"]').closest(".form-group").slideUp())}function lfb_changeStripePayMode(){jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")&&!jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?(jQuery('#lfb_formFields [name="stripe_payMode"]').closest(".form-group").slideDown(),""==jQuery('#lfb_formFields [name="stripe_payMode"]').val()?(jQuery('#lfb_formFields [name="stripe_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="stripe_percentToPay"]').closest(".form-group").slideUp()):"fixed"==jQuery('#lfb_formFields [name="stripe_payMode"]').val()?(jQuery('#lfb_formFields [name="stripe_fixedToPay"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="stripe_percentToPay"]').closest(".form-group").slideUp()):"percent"==jQuery('#lfb_formFields [name="stripe_payMode"]').val()&&(jQuery('#lfb_formFields [name="stripe_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="stripe_percentToPay"]').closest(".form-group").slideDown())):(jQuery('#lfb_formFields [name="stripe_payMode"]').val(""),jQuery('#lfb_formFields [name="stripe_payMode"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="stripe_fixedToPay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="stripe_percentToPay"]').closest(".form-group").slideUp())}function lfb_previousStepBtnChange(){jQuery('#lfb_formFields [name="previousStepBtn"]').is(":checked")?jQuery('#lfb_formFields [name="previousStepButtonIcon"]').closest(".form-group").slideDown():jQuery('#lfb_formFields [name="previousStepButtonIcon"]').closest(".form-group").slideUp()}function lfb_formDistanceAsQtChange(){jQuery('#lfb_winItem [name="useDistanceAsQt"]').is(":checked")?jQuery("#lfb_winItem #lfb_distanceQtContainer").slideDown():jQuery("#lfb_winItem #lfb_distanceQtContainer").slideUp()}function lfb_changeUseRedirs(){jQuery('#lfb_formFields [name="useRedirectionConditions"]').is(":checked")?jQuery("#lfb_formFields #lfb_redirConditionsContainer").slideDown():jQuery("#lfb_formFields #lfb_redirConditionsContainer").slideUp()}function lfb_scrollTopPageChange(){jQuery('#lfb_formFields [name="scrollTopPage"]').is(":checked")?(jQuery('#lfb_formFields [name="scrollTopMargin"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="scrollTopMarginMobile"]').closest(".form-group").slideUp()):(jQuery('#lfb_formFields [name="scrollTopMargin"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="scrollTopMarginMobile"]').closest(".form-group").slideDown())}function lfb_useGoogleFontChange(){jQuery('#lfb_formFields [name="useGoogleFont"]').is(":checked")?jQuery('#lfb_formFields [name="googleFontName"]').closest(".form-group").slideDown():jQuery('#lfb_formFields [name="googleFontName"]').closest(".form-group").slideUp()}function lfb_changeMailchimp(){jQuery('#lfb_formFields [name="useMailchimp"]').is(":checked")?(jQuery('#lfb_formFields [name="mailchimpKey"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="mailchimpList"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="mailchimpOptin"]').closest(".form-group").slideDown(),lfb_changeMailchimpList()):(jQuery('#lfb_formFields [name="mailchimpKey"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="mailchimpList"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="mailchimpOptin"]').closest(".form-group").slideUp())}function lfb_changeMailpoet(){jQuery('#lfb_formFields [name="useMailpoet"]').is(":checked")?(jQuery('#lfb_formFields [name="mailPoetList"]').closest(".form-group").slideDown(),lfb_changeMailpoetList()):jQuery('#lfb_formFields [name="mailPoetList"]').closest(".form-group").slideUp()}function lfb_changeGetResponse(){jQuery('#lfb_formFields [name="useGetResponse"]').is(":checked")?(jQuery('#lfb_formFields [name="getResponseKey"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="getResponseList"]').closest(".form-group").slideDown(),lfb_changeGetResponseList()):(jQuery('#lfb_formFields [name="getResponseKey"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="getResponseList"]').closest(".form-group").slideUp())}function lfb_changeMailchimpList(){jQuery('#lfb_formFields [name="mailchimpList"] option').remove();var e=jQuery('#lfb_formFields [name="mailchimpKey"]').val();""!=e&&jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getMailchimpLists",apiKey:e},success:function(e){jQuery('#lfb_formFields [name="mailchimpList"]').html(e),0<jQuery('#lfb_formFields [name="mailchimpList"] option[value="'+jQuery('#lfb_tabSettings [name="mailchimpList"]').attr("data-initial")+'"]').length&&jQuery('#lfb_formFields [name="mailchimpList"]').val(jQuery('#lfb_tabSettings [name="mailchimpList"]').attr("data-initial")),0!=lfb_currentForm&&jQuery('#lfb_formFields [name="mailchimpList"]').val(lfb_currentForm.form.mailchimpList)}})}function lfb_changeMailpoetList(){jQuery('#lfb_formFields [name="mailPoetList"] option').remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getMailpoetLists"},success:function(e){jQuery('#lfb_formFields [name="mailPoetList"]').html(e),0<jQuery('#lfb_formFields [name="mailPoetList"] option[value="'+jQuery('#lfb_tabSettings [name="mailPoetList"]').attr("data-initial")+'"]').length&&jQuery('#lfb_formFields [name="mailPoetList"]').val(jQuery('#lfb_tabSettings [name="mailPoetList"]').attr("data-initial")),0!=lfb_currentForm&&jQuery('#lfb_formFields [name="mailPoetList"]').val(lfb_currentForm.form.mailPoetList)}})}function lfb_changeGetResponseList(){var e=jQuery('#lfb_formFields [name="getResponseKey"]').val();jQuery('#lfb_tabSettings [name="getResponseList"] option').remove(),""!=e&&jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getGetResponseLists",apiKey:e},success:function(e){jQuery('#lfb_formFields [name="getResponseList"]').html(e),0<jQuery('#lfb_formFields [name="getResponseList"] option[value="'+jQuery('#lfb_tabSettings [name="getResponseList"]').attr("data-initial")+'"]').length&&jQuery('#lfb_formFields [name="getResponseList"]').val(jQuery('#lfb_tabSettings [name="getResponseList"]').attr("data-initial")),0!=lfb_currentForm&&jQuery('#lfb_formFields [name="getResponseList"]').val(lfb_currentForm.form.getResponseList)}})}function lfb_formUseCouponsChange(){jQuery('#lfb_formFields [name="useCoupons"]').is(":checked")?jQuery("#lfb_formFields .lfb_couponsContainer").slideDown():jQuery("#lfb_formFields .lfb_couponsContainer").slideUp(),lfb_changeSendEmailLastStep()}function lfb_formUseIntroChange(){jQuery('#lfb_formFields [name="intro_enabled"]').is(":checked")?(jQuery('#lfb_formFields [name="intro_title"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="intro_text"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="intro_btn"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="intro_image"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="introButtonIcon"]').closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="intro_title"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="intro_text"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="intro_btn"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="intro_image"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="introButtonIcon"]').closest(".form-group").slideUp())}function lfb_formIsSubscriptionChange(){jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?(jQuery('#lfb_formFields [name="subscription_text"]').parent().slideDown(),0==jQuery('#lfb_formFields [name="showSteps"]').val()&&jQuery('#lfb_formFields [name="progressBarPriceType"]').parent().slideDown(),jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="paypal_payMode"]').parent().slideUp(),jQuery('#lfb_formFields [name="paypal_payMode"]').val(""),jQuery('#lfb_formFields [name="stripe_payMode"]').parent().slideUp(),jQuery('#lfb_formFields [name="stripe_payMode"]').val(""),jQuery('#lfb_formFields [name="razorpay_payMode"]').parent().slideUp(),jQuery('#lfb_formFields [name="razorpay_payMode"]').val(""),jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")&&(jQuery('#lfb_formFields [name="paypal_subsFrequency"]').parent().slideDown(),jQuery('#lfb_formFields [name="paypal_subsMaxPayments"]').parent().slideDown(),jQuery('#lfb_formFields [name="percentToPay"]').parent().slideUp()),jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")&&jQuery('#lfb_formFields [name="stripe_subsFrequencyType"]').parent().slideDown(),jQuery('#lfb_formFields [name="use_razorpay"]').is(":checked")&&jQuery('#lfb_formFields [name="razorpay_subsFrequencyType"]').parent().slideDown(),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="subscription_text"]').parent().slideUp(),jQuery('#lfb_formFields [name="progressBarPriceType"]').parent().slideUp(),jQuery('#lfb_formFields [name="paypal_subsFrequency"]').parent().slideUp(),jQuery('#lfb_formFields [name="paypal_subsMaxPayments"]').parent().slideUp(),jQuery('#lfb_formFields [name="stripe_subsFrequencyType"]').parent().slideUp(),jQuery('#lfb_formFields [name="razorpay_subsFrequencyType"]').parent().slideUp(),jQuery('#lfb_formFields [name="use_paypal"]').is(":checked"),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp()),lfb_changePaypalPayMode(),lfb_changeStripePayMode()}function lfb_formUseSummaryChange(){jQuery('#lfb_formFields [name="useSummary"]').is(":checked")?jQuery('#lfb_formFields [name="summary_title"]').parent().slideDown():jQuery('#lfb_formFields [name="summary_title"]').parent().slideUp()}function lfb_formUseVATChange(){jQuery('#lfb_formFields [name="useVAT"]').is(":checked")?(jQuery('#lfb_formFields [name="vatLabel"]').parent().slideDown(),jQuery('#lfb_formFields [name="vatAmount"]').parent().slideDown()):(jQuery('#lfb_formFields [name="legalNoticeTitle"]').parent().slideUp(),jQuery('#lfb_formFields [name="vatLabel"]').parent().slideUp(),jQuery('#lfb_formFields [name="vatAmount"]').parent().slideUp())}function lfb_formLegalNoticeChange(){jQuery('#lfb_formFields [name="legalNoticeEnable"]').is(":checked")?(jQuery('#lfb_formFields [name="legalNoticeTitle"]').parent().slideDown(),jQuery("#lfb_formFields #lfb_legalNoticeContent").closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="legalNoticeTitle"]').parent().slideUp(),jQuery("#lfb_formFields #lfb_legalNoticeContent").closest(".form-group").slideUp()),lfb_changeSendEmailLastStep()}function lfb_totalIsRangeChange(){jQuery('#lfb_formFields [name="totalIsRange"]').is(":checked")?(jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="use_stripe"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="isSubscription"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",!1),0<jQuery('#lfb_formFields select[name="gravityFormID"]').val()&&jQuery('#lfb_formFields select[name="gravityFormID"]').val("0"),jQuery('#lfb_formFields [name="totalRangeMode"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="totalRange"]').closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="totalRange"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="totalRangeMode"]').closest(".form-group").slideUp())}function lfb_totalRangeModeChange(){""==jQuery('#lfb_formFields [name="totalRangeMode"]').val()?(jQuery("#lfb_totalRangeLabelFixed").show(),jQuery("#lfb_totalRangeLabelPercent").hide()):(jQuery("#lfb_totalRangeLabelFixed").hide(),jQuery("#lfb_totalRangeLabelPercent").show())}function lfb_formPaypalChange(){jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")?(jQuery("#paypalFieldsCt").addClass("lfb_displayed"),jQuery("#lfb_formPaypal").slideDown(),jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",!1,!0),jQuery('#lfb_formFields [name="save_to_cart_edd"]').parent().bootstrapSwitch("setState",!1,!0),0<jQuery('#lfb_formFields select[name="gravityFormID"]').val()&&jQuery('#lfb_formFields select[name="gravityFormID"]').val("0"),lfb_formIpnChange(),lfb_changePaypalPayMode()):(jQuery("#paypalFieldsCt").removeClass("lfb_displayed"),jQuery("#lfb_formPaypal").slideUp(),jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")||jQuery('#lfb_formFields [name="totalIsRange"]').is(":checked")||(jQuery("#lfb_formFields h4.lfb_wooOption").slideDown(),jQuery('#lfb_formFields [name="save_to_cart"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="save_to_cart_edd"]').closest(".form-group").slideDown())),lfb_formIsSubscriptionChange(),lfb_updatePaymentType()}function lfb_updatePaymentType(){jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")&&jQuery('#lfb_formFields [name="paypal_useIpn"]').is(":checked")||jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")&&!jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")||jQuery('#lfb_formFields [name="use_razorpay"]').is(":checked")&&!jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")?(jQuery('#lfb_formFields [name="paymentType"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="txt_payFormFinalTxt"]').closest(".form-group").slideDown()):(jQuery('#lfb_formFields [name="paymentType"]').val("form"),jQuery('#lfb_formFields [name="paymentType"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="txt_payFormFinalTxt"]').closest(".form-group").slideUp()),lfb_updateEmailPaymentType(),lfb_changeSendEmailLastStep()}function lfb_updateEmailPaymentType(){(jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")&&jQuery('#lfb_formFields [name="paypal_useIpn"]').is(":checked")||jQuery('#lfb_formFields [name="use_stripe"]').is(":checked"))&&"email"==jQuery('#lfb_formFields [name="paymentType"]').val()?jQuery('[name="emailPaymentType"]').closest(".form-group").slideDown():jQuery('[name="emailPaymentType"]').closest(".form-group").slideUp()}function lfb_formRazorPayChange(){jQuery('#lfb_formFields [name="use_razorpay"]').is(":checked")?(jQuery("#razorpayFieldsCt").addClass("lfb_displayed"),jQuery('.lfb_razorpayField:not([name="razorpay_percentToPay"])').slideDown(),jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",!1),0<jQuery('#lfb_formFields select[name="gravityFormID"]').val()&&jQuery('#lfb_formFields select[name="gravityFormID"]').val("0")):(jQuery(".lfb_razorpayField").slideUp(),jQuery("#razorpayFieldsCt").removeClass("lfb_displayed"),jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")||jQuery('#lfb_formFields [name="totalIsRange"]').is(":checked")||jQuery("#lfb_formFields .lfb_wooOption").slideDown()),lfb_formIsSubscriptionChange(),lfb_updatePaymentType()}function lfb_formStripeChange(){jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")?(jQuery("#stripeFieldsCt").addClass("lfb_displayed"),jQuery('.lfb_stripeField:not([name="stripe_percentToPay"])').slideDown(),jQuery('#lfb_formFields [name="totalIsRange"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",!1),0<jQuery('#lfb_formFields select[name="gravityFormID"]').val()&&jQuery('#lfb_formFields select[name="gravityFormID"]').val("0"),jQuery("#lfb_formFields .lfb_wooOption").slideUp(),lfb_changeStripePayMode()):(jQuery("#stripeFieldsCt").removeClass("lfb_displayed"),jQuery(".lfb_stripeField").slideUp(),jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")||jQuery('#lfb_formFields [name="totalIsRange"]').is(":checked")||jQuery("#lfb_formFields .lfb_wooOption").slideDown()),lfb_formIsSubscriptionChange(),lfb_updatePaymentType()}function lfb_chartsTypeChange(){"month"==jQuery("#lfb_chartsTypeSelect").val()?(jQuery("#lfb_panelCharts #lfb_chartsMonth").slideDown(),jQuery("#lfb_panelCharts #lfb_chartsYear").slideUp()):"year"==jQuery("#lfb_chartsTypeSelect").val()?(jQuery("#lfb_panelCharts #lfb_chartsMonth").slideUp(),jQuery("#lfb_panelCharts #lfb_chartsYear").slideDown()):(jQuery("#lfb_panelCharts #lfb_chartsMonth").slideUp(),jQuery("#lfb_panelCharts #lfb_chartsYear").slideUp()),"block"==jQuery("#lfb_panelCharts").css("display")&&lfb_loadCharts(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_chartsYearChange(){lfb_loadCharts(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_chartsMonthChange(){lfb_loadCharts(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_showShortcodeWin(e){e=e||lfb_currentFormID,jQuery('#lfb_winShortcode [name="startStep"]').html(""),jQuery("#lfb_winShortcode").find("span[data-displayid]").html(e),jQuery("#lfb_winShortcode").fadeIn(260),jQuery('#lfb_winShortcode [data-display="popup"]').hide(),jQuery('#lfb_winShortcode [name="display"]').val("").trigger("change"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getFormSteps",formID:e},success:function(e){e=jQuery.parseJSON(e);for(var t=0,l="",a="",n=0;n<e.length;n++){var i=e[n],l="",a="";1==i.start&&(t=i.id,a="default",l="selected"),jQuery('#lfb_winShortcode [name="startStep"]').append('<option class="'+a+'" '+l+' value="'+i.id+'">'+i.title+"</option>")}a=l="",0==t&&(a="default",l="selected"),jQuery('#lfb_winShortcode [name="startStep"]').append('<option class="'+a+'" '+l+' value="final">'+lfb_data.texts.lastStep+"</option>"),generateShortcode()}})}function lfb_formGravityChange(){0<jQuery('#lfb_formFields select[name="gravityFormID"]').val()?(jQuery("#lfb_formFields .nav-tabs > li:eq(2)").slideUp(),jQuery("#lfb_finalStepFields").slideUp(),jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="use_stripe"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="isSubscription"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="close_url"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="useRedirectionConditions"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="redirectionDelay"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="useCaptcha"]').closest(".form-group").slideUp()):(jQuery("#lfb_finalStepFields").slideDown(),jQuery("#lfb_formFields .nav-tabs > li:eq(2)").slideDown(),jQuery('#lfb_formFields [name="close_url"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="useRedirectionConditions"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="redirectionDelay"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="useCaptcha"]').closest(".form-group").slideDown())}function lfb_useEmailVerificationChange(){jQuery('#lfb_formFields [name="useEmailVerification"]').is(":checked")?jQuery("#lfb_emailVerificationContent_editor").slideDown():jQuery("#lfb_emailVerificationContent_editor").slideUp()}function lfb_formEmailUserChange(){jQuery('#lfb_formFields [name="email_toUser"]').is(":checked")?jQuery("#lfb_formEmailUser").slideDown():(jQuery("#lfb_formEmailUser").slideUp(),jQuery('#lfb_formFields [name="enableCustomersData"]').parent().bootstrapSwitch("setState",!1))}function lfb_formWooChange(){jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")?(jQuery('#lfb_formFields [name="emptyWooCart"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="wooShowFormTitles"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="sendSummaryToWoo"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="save_to_cart_edd"]').parent().bootstrapSwitch("setState",!1,!0),jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",!1,!0)):jQuery('#lfb_formFields [name="save_to_cart_edd"]').is(":checked"),jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")||(jQuery('#lfb_formFields [name="emptyWooCart"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="emptyWooCart"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="wooShowFormTitles"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="wooShowFormTitles"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="sendSummaryToWoo"]').closest(".form-group").slideUp())}function lfb_formEDDChange(){jQuery('#lfb_formFields [name="save_to_cart_edd"]').is(":checked")?(jQuery("#lfb_formFields .lfb_paymentOption").slideUp(),jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="use_paypal"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="isSubscription"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="save_to_cart"]').parent().bootstrapSwitch("setState",!1)):jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")||jQuery("#lfb_formFields .lfb_paymentOption").slideDown()}function lfb_formIpnChange(){jQuery('#lfb_formFields [name="paypal_useIpn"]').is(":checked")?jQuery("#lfb_infoIpn").slideDown():jQuery("#lfb_infoIpn").slideUp(),lfb_updatePaymentType()}function lfb_getStepByID(t){var l=!1;return jQuery.each(lfb_steps,function(e){this.id==t&&(l=this)}),l}function lfb_getItemByID(t){var l=!1;return jQuery.each(lfb_steps,function(e){jQuery.each(this.items,function(e){this.id==t&&(l=this)})}),l||jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(l=this)}),l}function lfb_showLoader(){jQuery("html,body").animate({scrollTop:0},250),jQuery("#lfb_loader").fadeIn()}function lfb_addStep(t){var e,l,a,n="",i=0,n=t.content?t.title:t;t.id?(e=jQuery('<div class="lfb_stepBloc palette palette-clouds"><div class="lfb_stepBlocWrapper"><h4>'+n+'</h4></div><a href="javascript:" class="lfb_btnEdit" title="'+lfb_data.texts.tip_editStep+'"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" class="lfb_btnSup" title="'+lfb_data.texts.tip_delStep+'"><span class="glyphicon glyphicon-trash"></span></a><a href="javascript:" class="lfb_btnDup" title="'+lfb_data.texts.tip_duplicateStep+'"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:" class="lfb_btnLink" title="'+lfb_data.texts.tip_linkStep+'"><span class="glyphicon glyphicon-link"></span></a><a href="javascript:" class="lfb_btnStart" title="'+lfb_data.texts.tip_flagStep+'"><span class="glyphicon glyphicon-flag"></span></a></div>'),t.content&&1==t.content.start&&(e.find(".lfb_btnStart").addClass("lfb_selected"),e.addClass("lfb_selected")),t.elementID?e.attr("id",t.elementID):e.uniqueId(),e.children("a.lfb_btnEdit").on("click",function(){(1==lfb_settings.useVisualBuilder?lfb_editVisualStep:lfb_openWinStep)(jQuery(this).parent().attr("data-stepid"))}),e.children("a.lfb_btnLink").on("click",function(){lfb_startLink(jQuery(this).parent().attr("id"))}),e.children("a.lfb_btnSup").on("click",function(){lfb_askDeleteStep(jQuery(this).parent().attr("data-stepid"))}),e.children("a.lfb_btnDup").on("click",function(){lfb_duplicateStep(jQuery(this).parent().attr("data-stepid"))}),e.children("a.lfb_btnStart").on("click",function(){lfb_showLoader(),jQuery(".lfb_stepBloc[data-stepid]").find(".lfb_btnStart").removeClass("lfb_selected"),jQuery(".lfb_stepBloc[data-stepid]").find(".lfb_btnStart").closest(".lfb_stepBloc").removeClass("lfb_selected"),jQuery.each(lfb_steps,function(){var e=this;e.id!=jQuery(this).parent().attr("data-stepid")&&1==e.content.start&&(e.content.start=0,jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveStep",id:e.id,start:0,formID:lfb_currentFormID,content:JSON.stringify(e.content)}}))}),jQuery(this).addClass("lfb_selected"),jQuery(this).closest(".lfb_stepBloc").addClass("lfb_selected");var e=lfb_getStepByID(parseInt(jQuery(this).parent().attr("data-stepid")));"string"==typeof e.content&&(e.content=JSON.parse(e.content)),e.content.start=1,jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveStep",id:t.id,start:1,formID:lfb_currentFormID,content:JSON.stringify(e.content)},success:function(){lfb_loadForm(lfb_currentFormID)}})}),e.draggable({containment:"parent",handle:".lfb_stepBlocWrapper",start:function(){jQuery("#lfb_stepsContainer .lfb_linkPoint").hide()},drag:function(){lfb_disableLinksAnim&&lfb_updateStepCanvas()},stop:function(){lfb_repositionLinks(),jQuery("#lfb_stepsContainer .lfb_linkPoint").show(),lfb_disableLinksAnim&&lfb_updateStepCanvas()}}),e.children(".lfb_stepBlocWrapper").on("click",function(){lfb_isLinking&&lfb_stopLink(e)}),a=l=10,a=t.content&&t.content.previewPosX?(l=t.content.previewPosX,t.content.previewPosY):(l=jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()/2-64,jQuery("#lfb_stepsOverflow").scrollTop()+jQuery("#lfb_stepsOverflow").height()/2-64),e.hide(),jQuery("#lfb_stepsContainer").append(e),e.css({left:l+"px",top:a+"px"}),e.fadeIn(),setTimeout(lfb_updateStepsDesign,250),0==jQuery("#lfb_stepsContainer .lfb_stepBloc").length&&(i=1),e.attr("data-stepid",t.id),lfb_lastCreatedStepID==t.id&&setTimeout(function(){lfb_linkLightStep(t.id)},500)):((e=jQuery("<div></div>")).uniqueId(),l=Math.floor(240*Math.random()),.5<Math.random()&&(l=0-l),a=Math.floor(80*Math.random()),.5<Math.random()&&(a=0-a),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addStep",elementID:e.attr("id"),formID:lfb_currentFormID,start:i,previewPosX:jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()/2-l,previewPosY:jQuery("#lfb_stepsOverflow").scrollTop()+jQuery("#lfb_stepsOverflow").height()/2-a},success:function(e){e=jQuery.parseJSON(e),-1==jQuery.inArray(e.id,lfb_steps)&&(lfb_lastCreatedStepID=e.id,lfb_showLoader(),lfb_loadForm(lfb_currentFormID))}}))}function lfb_removeStep(e){jQuery('.lfb_stepBloc[data-stepid="'+e+'"]').remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeStep",stepID:e},success:function(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_params=(lfb_currentForm=e).params,lfb_steps=e.steps,jQuery.each(e.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t}),lfb_repositionLinks(),lfb_updateLastStepTab()}})}})}function lfb_updateStepsDesign(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48}),jQuery("#lfb_stepsCanvas").attr("width",jQuery("#lfb_stepsContainer").outerWidth()),jQuery("#lfb_stepsCanvas").attr("height",jQuery("#lfb_stepsContainer").outerHeight()),jQuery("#lfb_stepsCanvas").css({width:jQuery("#lfb_stepsContainer").outerWidth(),height:jQuery("#lfb_stepsContainer").outerHeight()}),jQuery(".lfb_stepBloc > .lfb_stepBlocWrapper > h4").each(function(){jQuery(this).css("margin-top",0-jQuery(this).height()/2)})}function lfb_repositionLinkPoints(e){var s=new Array;jQuery(".lfb_linkPoint").each(function(){var e=jQuery(this).attr("data-linkindex");lfb_links.length>=e&&(void 0!==lfb_links[e]&&void 0!==lfb_links[e].id&&(lfb_links[e].id,jQuery(this).attr("data-linkid")))}),jQuery.each(e,function(){var e,t,l,a,n,i,r=this,o=lfb_links[r];0<jQuery("#"+o.originID).length&&0<jQuery("#"+o.destinationID).length&&(s.push(o),e=jQuery("#"+o.originID).offset().left-jQuery("#lfb_stepsContainer").offset().left+jQuery("#"+o.originID).width()/2,t=jQuery("#"+o.originID).offset().top-jQuery("#lfb_stepsContainer").offset().top+jQuery("#"+o.originID).height()/2,l=jQuery("#"+o.destinationID).offset().left-jQuery("#lfb_stepsContainer").offset().left+jQuery("#"+o.destinationID).width()/2,a=jQuery("#"+o.destinationID).offset().top-jQuery("#lfb_stepsContainer").offset().top+jQuery("#"+o.destinationID).height()/2,n=e+(l-e)/2,i=t+(a-t)/2,jQuery.each(s,function(e){this.originID==o.destinationID&&this.destinationID==o.originID&&e<r&&(n+=15,i+=15)}),jQuery('.lfb_linkPoint[data-linkindex="'+r+'"]').css({left:n+"px",top:i+"px"}))})}function lfb_repositionLinkPoint(t){var l=lfb_links[t],e=jQuery("#"+l.originID).offset().left-jQuery("#lfb_stepsContainer").offset().left+jQuery("#"+l.originID).width()/2,a=jQuery("#"+l.originID).offset().top-jQuery("#lfb_stepsContainer").offset().top+jQuery("#"+l.originID).height()/2,n=jQuery("#"+l.destinationID).offset().left-jQuery("#lfb_stepsContainer").offset().left+jQuery("#"+l.destinationID).width()/2,i=jQuery("#"+l.destinationID).offset().top-jQuery("#lfb_stepsContainer").offset().top+jQuery("#"+l.destinationID).height()/2,r=e+(n-e)/2,o=a+(i-a)/2;jQuery.each(lfb_links,function(e){this.originID==l.destinationID&&this.destinationID==l.originID&&e<t&&(r+=15,o+=15)}),jQuery('.lfb_linkPoint[data-linkindex="'+t+'"]').css({left:r+"px",top:o+"px"})}function lfb_loadSettings(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadSettings"},success:function(rep){rep=jQuery.parseJSON(rep),lfb_settings=rep,jQuery("#lfb_winGlobalSettings").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(rep."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(rep."+jQuery(this).attr("name")+");")}),1==lfb_settings.useVisualBuilder?(jQuery("#lfb_finalStepVisualBtn").show(),jQuery("#lfb_finalStepItemsList").hide()):(jQuery("#lfb_finalStepVisualBtn").hide(),jQuery("#lfb_finalStepItemsList").show()),1==lfb_settings.encryptDB?jQuery('#lfb_winGlobalSettings [name="encryptDB"]').parent().bootstrapSwitch("setState",!0):jQuery('#lfb_winGlobalSettings [name="encryptDB"]').parent().bootstrapSwitch("setState",!1),0==lfb_data.designForm&&jQuery("#lfb_loader").fadeOut(),0==lfb_settings.enableCustomerAccount?jQuery('#lfb_formFields [name="enableCustomersData"]').closest(".switch.has-switch").addClass("deactivate"):(jQuery('#lfb_formFields [name="enableCustomersData"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_formFields [name="enableCustomersData"]').closest(".switch.has-switch").removeClass("deactivate")),jQuery("#lfb_winGlobalSettings .colorpick").each(function(){var e=jQuery(this);0==jQuery(this).prev(".lfb_colorPreview").length?jQuery(this).before('<div class="lfb_colorPreview" style="background-color:#'+e.val().substr(1,7)+'"></div>'):jQuery(this).prev(".lfb_colorPreview").attr("style","background-color:#"+e.val().substr(1,7)),jQuery(this).prev(".lfb_colorPreview").on("click",function(){jQuery(this).next(".colorpick").trigger("click")}),jQuery(this).colpick({color:e.val().substr(1,7),onChange:function(e,t,l,a,n){jQuery(a).val("#"+t),jQuery(a).prev(".lfb_colorPreview").css({backgroundColor:"#"+t})}})}),1==lfb_settings.useDarkMode?(jQuery('#lfb_mainToolbar [data-action="toggleDarkMode"]').addClass("lfb_active"),jQuery("body").addClass("lfb_dark")):(jQuery('#lfb_mainToolbar [data-action="toggleDarkMode"]').removeClass("lfb_active"),jQuery("body").removeClass("lfb_dark"))}})}function lfb_toggleDarkMode(){var e=0;jQuery("body").is(".lfb_dark")?(jQuery('#lfb_mainToolbar [data-action="toggleDarkMode"]').removeClass("lfb_active"),jQuery("body").removeClass("lfb_dark")):(e=1,jQuery('#lfb_mainToolbar [data-action="toggleDarkMode"]').addClass("lfb_active"),jQuery("body").addClass("lfb_dark")),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_toggleDarkMode",darkMode:e}})}function lfb_closeSettings(){lfb_showLoader(),document.location.reload()}function lfb_duplicateStep(e){lfb_canDuplicate&&(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateStep",stepID:e},success:function(e){lfb_canDuplicate=!0,lfb_loadForm(lfb_currentFormID)}}))}function lfb_updateStepCanvas(){var f,u,e,t;0<jQuery("#lfb_stepsCanvas").length&&0==jQuery('#lfb_winEditStepVisual[style="display: block;"]').length&&0==jQuery('.lfb_window[style="display: block;"]').length&&0==jQuery('#lfb_tld_tdgnPanel[style="display: block;"]').length&&0==jQuery('#lfb_panelLogs[style="display: block;"]').length&&0==jQuery('#lfb_panelCharts[style="display: block;"]').length&&0==jQuery('#lfb_panelLogs[style="display: block;"]').length&&(f=jQuery("#lfb_stepsCanvas").get(0).getContext("2d"),u=-1,0<jQuery(".lfb_stepBloc.ui-draggable-dragging").length&&(u=jQuery(".lfb_stepBloc.ui-draggable-dragging").attr("id")),f.clearRect(0,0,jQuery("#lfb_stepsCanvas").attr("width"),jQuery("#lfb_stepsCanvas").attr("height")),30<=++lfb_linkGradientIndex&&(lfb_linkGradientIndex=1),new Array,jQuery.each(lfb_links,function(e){var t,l,a,n,i,r,o,s,d=this;d.destinationID&&0<jQuery("#"+d.originID).length&&0<jQuery("#"+d.destinationID).length?!lfb_disableLinksAnim&&-1!=u&&d.originID!=u&&d.destinationID!=u||(t=parseInt(jQuery("#"+d.originID).css("left"))+jQuery("#"+d.originID).outerWidth()/2+22,l=parseInt(jQuery("#"+d.originID).css("top"))+jQuery("#"+d.originID).outerHeight()/2+22,a=parseInt(jQuery("#"+d.destinationID).css("left"))+jQuery("#"+d.destinationID).outerWidth()/2+22,n=parseInt(jQuery("#"+d.destinationID).css("top"))+jQuery("#"+d.destinationID).outerHeight()/2+22,o=!0,l<jQuery("#lfb_stepsOverflow").scrollTop()&&(n<jQuery("#lfb_stepsOverflow").scrollTop()||t<jQuery("#lfb_stepsOverflow").scrollLeft()&&a<jQuery("#lfb_stepsOverflow").scrollLeft()||t>jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()&&a>jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width())&&(o=!1),l>jQuery("#lfb_stepsOverflow").scrollTop()+jQuery("#lfb_stepsOverflow").height()&&(n>jQuery("#lfb_stepsOverflow").scrollTop()+jQuery("#lfb_stepsOverflow").height()||t<jQuery("#lfb_stepsOverflow").scrollLeft()&&a<jQuery("#lfb_stepsOverflow").scrollLeft()||t>jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()&&a>jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width())&&(o=!1),t<jQuery("#lfb_stepsOverflow").scrollLeft()&&a<jQuery("#lfb_stepsOverflow").scrollLeft()&&(o=!1),t>jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()&&a>jQuery("#lfb_stepsOverflow").scrollLeft()+jQuery("#lfb_stepsOverflow").width()&&(o=!1),o&&(i=f.createLinearGradient(t,l,a,n),o=.1+(r=s=lfb_linkGradientIndex/30),s=.2+s,f.lineWidth=4,1<o&&(o=0,s=.2),1<s&&(s=0),i.addColorStop(r,"#bdc3c7"),i.addColorStop(o,"#1ABC9C"),i.addColorStop(s,"#bdc3c7"),f.strokeStyle=i,f.beginPath(),f.moveTo(t,l),f.lineTo(a,n),f.stroke(),0==jQuery('.lfb_linkPoint[data-linkindex="'+e+'"]').length&&(d=jQuery('<a href="javascript:" data-linkid="'+d.id+'" data-linkindex="'+e+'" class="lfb_linkPoint"><span class="glyphicon glyphicon-pencil"></span></a>'),jQuery("#lfb_stepsContainer").append(d),d.on("click",function(){lfb_openWinLink(jQuery(this))}),lfb_repositionLinkPoint(e)))):jQuery('.lfb_linkPoint[data-linkindex="'+e+'"]').remove()})),0==jQuery(".lfb_stepBloc.ui-draggable-dragging").length&&lfb_isLinking&&(e=(t=jQuery("#"+lfb_links[lfb_linkCurrentIndex].originID)).position().left+jQuery("#lfb_stepsOverflow").scrollLeft()+t.outerWidth()/2,t=t.position().top+jQuery("#lfb_stepsOverflow").scrollTop()+t.outerHeight()/2,f.strokeStyle="#bdc3c7",f.lineWidth=4,f.beginPath(),f.moveTo(e,t),f.lineTo(lfb_mouseX,lfb_mouseY),f.stroke())}function lfb_removeItem(e){$("#lfb_winDeleteItem").fadeOut(260),jQuery('#lfb_itemsTable tr[data-itemid="'+e+'"]').remove(),1==lfb_settings.useVisualBuilder&&jQuery("#lfb_stepFrame").contents().find('.lfb_item[data-id="'+e+'"]').remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeItem",itemID:e,stepID:lfb_currentStepID,formID:lfb_currentFormID},success:function(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_currentForm=e,lfb_loadFields(),lfb_params=e.params,lfb_steps=e.steps,1==lfb_settings.useVisualBuilder||lfb_openWinStep(lfb_currentStepID),jQuery("#lfb_panelPreview").show()}})}})}function lfb_editItem(itemID){lfb_showLoader(),jQuery("#lfb_winStep").fadeOut(),jQuery("html,body").css("overflow-y","auto"),jQuery("#lfb_panelPreview").hide(),lfb_currentItemID=itemID,jQuery('#lfb_winItem [name="type"] option[value="gmap"]').removeAttr("disabled"),jQuery("#lfb_winItem").find("input,textarea").val(""),jQuery("#lfb_winItem").find("select option").removeAttr("selected"),jQuery("#lfb_winItem").find("select option:eq(0)").attr("selected","selected"),jQuery("#lfb_winItem").find("#lfb_itemPriclfb_conditionAttributeMenuesGrid tbody tr").not(".static").remove(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValues tbody tr").not(".static").remove(),jQuery("#lfb_winItem").find(".has-error").removeClass("has-error"),jQuery("#lfb_winItem").find('[name="stepID"]').html("");for(var i=0;i<lfb_currentForm.steps.length;i++){var _step=lfb_currentForm.steps[i];jQuery("#lfb_winItem").find('[name="stepID"]').append('<option value="'+_step.id+'">'+_step.title+"</option>")}jQuery("#lfb_winItem").find('[name="stepID"]').append('<option value="0">'+lfb_data.texts.lastStep+"</option>");var $sel=jQuery("#lfb_winItem").find('[name="wooProductID"]'),itemsList,itemsList,chkItem;$sel.attr("data-price",0),$sel.attr("data-type",""),$sel.attr("data-max",0),$sel.attr("data-woovariation",0),$sel.attr("data-image",""),$sel.attr("data-title",""),$sel.attr("data-id",0),$sel.val(0).trigger("change"),jQuery("#lfb_winItem").find('[name="wooVariation"]').val(0),0<itemID?(itemsList=new Array,itemsList=0<lfb_currentStepID?lfb_currentStep.items:lfb_currentForm.fields,chkItem=!1,jQuery.each(itemsList,function(){var item=this,reducs,optionsV,color,layers;item.id==itemID&&(chkItem=!0,""==item.useRow&&(item.useRow=0),jQuery("#lfb_winItem").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(item."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}"),eval("if(item."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(item."+jQuery(this).attr("name")+");")}),0<item.wooProductID&&jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getWooProductTitle",productID:item.wooProductID},success:function(e){jQuery("#lfb_winItem").find("#wooProductSelect").val(e)}}),lfb_itemPriceCalculationEditor.setValue(item.calculation),lfb_itemCalculationQtEditor.setValue(item.calculationQt),lfb_itemVariableCalculationEditor.setValue(item.variableCalculation),lfb_itemPriceCalculationEditor.refresh(),lfb_itemCalculationQtEditor.refresh(),lfb_itemVariableCalculationEditor.refresh(),jQuery("#lfb_winItem #lfb_itemRichText").code(this.richtext),reducs=item.reducsQt.split("*"),jQuery("#lfb_winItem").find("#lfb_itemPricesGrid tbody tr").not(".static").remove(),jQuery.each(reducs,function(){var e=this.split("|");e[0]&&0<e[0]&&(e=$("<tr><td>"+e[0]+"</td><td>"+parseFloat(e[1]).toFixed(2)+'</td><td><a href="javascript:" class="btn btn-danger  btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>'),jQuery("#lfb_itemPricesGrid tbody").prepend(e),e.find("a").on("click",function(){lfb_del_reduc(this)}))}),optionsV=item.optionsValues.split("|"),jQuery.each(optionsV,function(){var e=this,t=0;0<this.indexOf(";;")&&(e=this.substr(0,this.indexOf(";;")),t=this.substr(this.indexOf(";;")+2,this.length)),""!=this&&((t=$("<tr><td>"+e+"</td><td>"+t+'</td><td><a href="javascript:" data-action="lfb_edit_option" class="btn btn-default  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="lfb_del_option"  class="btn btn-danger  btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>')).find('a[data-action="lfb_edit_option"]').on("click",function(){lfb_edit_option(this)}),t.find('a[data-action="lfb_del_option"]').on("click",function(){lfb_del_option(this)}),jQuery("#lfb_itemOptionsValues #option_new_value").closest("tr").before(t))}),jQuery("#lfb_itemOptionsValues tbody").sortable({items:"tr:not(.static)",helper:function(e,t){var l=t.children(),t=t.clone();return t.children().each(function(e){jQuery(this).width(l.eq(e).width())}),t}}),color=item.color,""==color&&(color="#FFFFFF;"),jQuery("#lfb_winItem").find('[name="color"]').prev(".lfb_colorPreview").css({backgroundColor:color}),jQuery("#lfb_winItem").find('[name="eddProductID"]').val(item.eddProductID),jQuery("#lfb_winItem").find('[name="wooProductID"]').val(item.wooProductID),0<item.wooProductID&&0<item.wooVariation&&jQuery("#lfb_winItem").find('[name="wooProductID"]').find('option[value="'+item.wooProductID+'"]').each(function(){jQuery(this).attr("data-woovariation")==item.wooVariation&&jQuery(this).attr("selected","selected")}),0<item.eddProductID&&0<item.eddVariation&&jQuery("#lfb_winItem").find('[name="eddProductID"]').find('option[value="'+item.eddProductID+'"]').each(function(){jQuery(this).attr("data-eddvariation")==item.eddVariation&&jQuery(this).attr("selected","selected")}),jQuery("#lfb_imageLayersTable tbody").html(""),layers=new Array,jQuery.each(lfb_currentForm.layers,function(){this.itemID==item.id&&layers.push(this)}),0<layers.length&&lfb_showLayersTable(layers),jQuery("#lfb_winItem").find('[name="endDaterangeID"]').find('option[value!="0"]').remove(),jQuery.each(lfb_steps,function(){var e=this;jQuery.each(e.items,function(){"datepicker"==this.type&&this.id!=itemID&&jQuery("#lfb_winItem").find('[name="endDaterangeID"]').append('<option value="'+this.id+'">'+e.title+' : " '+this.title+' "</option>')})}),jQuery.each(lfb_currentForm.fields,function(){"datepicker"==this.type&&this.id!=itemID&&jQuery("#lfb_winItem").find('[name="endDaterangeID"]').append('<option value="'+this.id+'">'+lfb_data.texts.lastStep+' : " '+this.title+' "</option>')}))}),chkItem||jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadStep",stepID:lfb_currentStepID},success:function(e){e=jQuery.parseJSON(e),step=e.step,lfb_currentStep=e,lfb_editItem(itemID)}})):(jQuery("#lfb_imageLayersTable tbody").html(""),jQuery("#lfb_winItem").find('input[name="operation"]').val("+"),jQuery("#lfb_winItem").find('input[name="ordersort"]').val(0),jQuery("#lfb_winItem").find('input[name="quantity_max"]').val(5),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="ischecked"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="isHidden"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="isRequired"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('select[name="checkboxStyle"]').val("switchbox"),jQuery("#lfb_winItem").find('select[name="type"]').val("picture"),jQuery("#lfb_winItem").find('[name="showInSummary"]').parent().bootstrapSwitch("setState",!0),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0),jQuery("#lfb_winItem").find('[name="mapZoom"]').val(1),jQuery("#lfb_winItem").find('[name="mapType"]').val("marker"),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useShowConditions"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').parent().bootstrapSwitch("setState",!0),jQuery("#lfb_winItem").find('[name="allowedFiles"]').val(".png,.jpg,.jpeg,.gif,.zip,.rar"),jQuery("#lfb_winItem").find('[name="maxFiles"]').val("4"),jQuery("#lfb_winItem").find('[name="useRow"]').val("0"),jQuery("#lfb_winItem").find('[name="color"]').val(jQuery('#lfb_tabDesign [name="colorA"]').val()),jQuery("#lfb_winItem").find('[name="color"]').prev(".lfb_colorPreview").css({backgroundColor:jQuery('#lfb_tabDesign [name="colorA"]').val()}),jQuery("#lfb_winItem").find('[name="eventDurationType"]').val("hours"),jQuery("#lfb_winItem").find('[name="eventDuration"]').val("1"),jQuery("#lfb_winItem").find('[name="eventTitle"]').val(lfb_data.texts.newEvent),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="stepID"]').val(lfb_currentStepID)),jQuery("#lfb_winItem").find('input[type="checkbox"]').each(function(){jQuery(this).is('[data-switch="switch"]')&&0<jQuery(this).closest(".form-group").find("small").length&&jQuery(this).closest(".has-switch").b_tooltip({title:jQuery(this).closest(".form-group").find("small").html()})}),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').on("change",lfb_changeQuantityEnabled),lfb_changeQuantityEnabled(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').on("change",lfb_changeReducEnabled),lfb_changeReducEnabled(),jQuery("#lfb_winItem").find('[name="quantityUpdated"]').on("change",lfb_changeQuantity),lfb_changeQuantity(),jQuery("#lfb_winItem").find('[name="wooProductID"]').on("change",lfb_changeWoo),lfb_changeWoo(),jQuery("#lfb_winItem").find('[name="eddProductID"]').on("change",lfb_changeEDD),lfb_changeEDD(),jQuery("#lfb_winItem").find('[name="fieldType"]').on("change",lfb_changeFieldType),jQuery("#lfb_winItem").find('[name="type"]').on("change",lfb_changeFieldType),lfb_changeFieldType(),jQuery("#lfb_winItem").find('[name="autocomplete"]').on("change",lfb_changeAutocomplete),lfb_changeAutocomplete(),jQuery("#lfb_winItem").find('[name="operation"]').on("change",lpf_changeOperation),lpf_changeOperation(),jQuery("#lfb_winItem").find('[name="useCalculation"]').on("change",lfb_changeUseCalculation),lfb_changeUseCalculation(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').on("change",lfb_changeUseCalculationQt),lfb_changeUseCalculationQt(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').on("change",lfb_changeVariableCalculation),lfb_changeVariableCalculation(),jQuery("#lfb_winItem").find('[name="validation"]').on("change",lfb_changeValidation),lfb_changeValidation(),jQuery("#lfb_winItem").find('[name="type"]').on("change",lfb_changeItemType),setTimeout(lfb_changeItemType,200),jQuery("#lfb_winItem").find('[name="useShowConditions"]').on("change",lfb_changeUseShowConditions),lfb_changeUseShowConditions(),jQuery("#lfb_winItem").find('[name="showInSummary"]').on("change",lfb_showSummaryItemChange),lfb_showSummaryItemChange(),jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').on("change",lfb_formDistanceAsQtChange),lfb_formDistanceAsQtChange(),jQuery("#lfb_winItem").find('[name="isRequired"]').on("change",lfb_changeItemIsRequired),lfb_changeItemIsRequired(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').on("change",lfb_changeUseValueAsQt),lfb_changeUseValueAsQt(),jQuery("#lfb_winItem").find('[name="calendarID"]').on("change",lfb_changeItemCalendarID),lfb_changeItemCalendarID(),jQuery("#lfb_winItem").find('[name="date_allowPast"]').on("change",lfb_changeItemAllowPastDate),lfb_changeItemAllowPastDate(),jQuery("#lfb_winItem").find('[name="dateType"]').on("change",changeItemDateType),jQuery("#lfb_winItem").find('[name="dateType"]').on("change",lfb_changeBusyDateEvent),changeItemDateType(),jQuery("#lfb_winItem").find('[name="registerEvent"]').on("change",lfb_changeRegisterEvent),jQuery("#lfb_winItem").find('[name="registerEvent"]').on("change",lfb_changeBusyDateEvent),jQuery("#lfb_winItem").find('[name="eventDurationType"]').on("change",lfb_changeBusyDateEvent),jQuery("#lfb_winItem").find('[name="useAsDateRange"]').on("change",lfb_changeBusyDateEvent),lfb_changeRegisterEvent(),jQuery("#lfb_winItem").find('[name="eventBusy"]').on("change",lfb_changeBusyDateEvent),lfb_changeBusyDateEvent(),jQuery("#lfb_winItem").find('[name="useAsDateRange"]').on("change",lfb_changeUseAsDateRange),lfb_changeUseAsDateRange(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').on("change",lfb_changeUsePaypalIfChecked),lfb_changeUsePaypalIfChecked(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').on("change",lfb_changeDontUsePaypalIfChecked),lfb_changeDontUsePaypalIfChecked(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').on("change",lfb_changeSendAsVariable),lfb_changeSendAsVariable(),jQuery("#lfb_winItem").find('[name="mapType"]').on("change",lfb_changeMapType),lfb_changeMapType(),jQuery("#lfb_winItem").find('[name="imageType"]').on("change",lfb_changeImageType),lfb_changeImageType(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').on("change",lfb_changeUseCurrentWoo),lfb_changeUseCurrentWoo(),jQuery("#lfb_winItem").find('[name="isCountryList"]').on("change",lfb_changeIsCountryList),lfb_changeIsCountryList(),setTimeout(function(){lfb_applyCalculationEditorTooltips("calculation"),lfb_applyCalculationEditorTooltips("calculationQt"),lfb_applyCalculationEditorTooltips("variableCalculation")},500),jQuery("#lfb_winItem").find("input.lfb_iconField").trigger("change"),jQuery('#lfb_formFields [name="gmap_key"]').val().length<3?(jQuery("#lfb_winItem #lfb_addDistanceBtn").attr("disabled","disabled"),jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_winItem [name="useDistanceAsQt"]').closest(".switch.has-switch").addClass("deactivate"),jQuery('#lfb_winItem [name="type"] option[value="gmap"]').attr("disabled","disabled")):(jQuery("#lfb_winItem #lfb_addDistanceBtn").removeAttr("disabled"),jQuery('#lfb_winItem [name="useDistanceAsQt"]').closest(".switch.has-switch").removeClass("deactivate"),jQuery('#lfb_winItem [name="type"] option[value="gmap"]').removeAttr("disabled")),jQuery("html,body").scrollTop(0),setTimeout(function(){jQuery("#lfb_winItem").fadeIn(),jQuery("html,body").scrollTop(0),jQuery("#lfb_loader").fadeOut()},400)}function lfb_changeUseCurrentWoo(){jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').is(":checked")&&"none"!=$("#wooProductSelect").closest(".form-group").css("display")?jQuery("#lfb_winItem").find("#wooProductSelect").closest(".form-group").slideUp():jQuery("#lfb_winItem").find("#wooProductSelect").closest(".form-group").slideDown()}function lfb_changeImageType(){"fontIcon"==jQuery("#lfb_winItem").find('[name="imageType"]').val()?(jQuery("#lfb_winItem").find('[name="image"],[name="shadowFX"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="image"],[name="shadowFX"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp())}function lfb_changeMapType(){"gmap"==jQuery("#lfb_winItem").find('[name="type"]').val()?(""==jQuery("#lfb_winItem").find('[name="mapType"]').val()&&jQuery("#lfb_winItem").find('[name="mapType"]').val("marker"),"itinerary"==jQuery("#lfb_winItem").find('[name="mapType"]').val()?(jQuery("#lfb_winItem").find("#lfb_btnItemDefineItinerary").closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="address"]').closest(".form-group").slideUp()):(jQuery("#lfb_winItem").find('[name="address"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find("#lfb_btnItemDefineItinerary").closest(".form-group").slideUp())):(jQuery("#lfb_winItem").find("#lfb_btnItemDefineItinerary").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="address"]').closest(".form-group").slideUp())}function lfb_changeIsCountryList(){"select"==jQuery("#lfb_winItem").find('[name="type"]').val()&&(jQuery("#lfb_winItem").find('[name="isCountryList"]').is(":checked")?jQuery("#lfb_itemOptionsValuesPanel").slideUp():jQuery("#lfb_itemOptionsValuesPanel").slideDown())}function lfb_changeUsePaypalIfChecked(){jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').is(":checked")&&jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').parent().bootstrapSwitch("setState",!1)}function lfb_changeDontUsePaypalIfChecked(){jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').is(":checked")&&jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').parent().bootstrapSwitch("setState",!1)}function lfb_showSummaryItemChange(){jQuery("#lfb_winItem").find('[name="showInSummary"]').is(":checked")&&"richtext"!=jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp())}jQuery(document).ready(function(){$(".lfb_dynamicHide").hide().removeClass("lfb_dynamicHide"),jQuery("#lfb_loader").remove(),jQuery("#wpcontent").append('<div id="lfb_loader"><div class="lfb_spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>'),jQuery("#lfb_loader .lfb_spinner").css({top:jQuery(window).height()/2-jQuery("#wpadminbar").height()/2}),jQuery(window).resize(function(){jQuery("#lfb_loader .lfb_spinner").css({top:jQuery(window).height()/2-jQuery("#wpadminbar").height()/2}),jQuery("#lfb_bootstraped,#lfb_form").css({minHeight:jQuery(window).height()-jQuery("#wpadminbar").height()}),jQuery("#lfb_emailTemplateAdmin").css({minHeight:jQuery("#lfb_emailTemplateCustomer").outerHeight()}),lfb_updatelLeftPanels(),jQuery("#lfb_stepFrame").css({height:jQuery(window).height()-(jQuery("#lfb_winEditStepVisual .lfb_lPanelMenu").height()+jQuery("#lfb_winEditStepVisual .lfb_winHeader").height())}),lfb_tld_updateFrameSize(),lfb_disableLinksAnim&&lfb_updateStepCanvas()}),jQuery('#lfb_bootstraped [data-dismiss="modal"]').on("click",function(){$(this).closest(".modal").fadeOut(260)}),lfb_tld_tdgn_init(),jQuery("#lfb_bootstraped .modal:not(.lfb_modal)").addClass("lfb_modal"),jQuery("#lfb_bootstraped,#lfb_form").css({minHeight:jQuery(window).height()-jQuery("#wpadminbar").height()}),lfb_updatelLeftPanels(),jQuery(".lfb_btnWinClose").parent().on("click",function(){lfb_closeWin(jQuery(this).closest(".lfb_window")),jQuery("html").css("overflow-y","auto")});var tooltip=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">0</div></div>').css({position:"absolute",top:-55,left:-42,opacity:1}).hide();jQuery("#lfb_stepMaxWidth").slider({min:0,max:lfb_stepPossibleWidths.length-1,value:0,orientation:"horizontal",change:function(e,t){0<t.value?tooltip.find(".tooltip-inner").html(lfb_stepPossibleWidths[t.value]+"px"):tooltip.find(".tooltip-inner").html(lfb_stepPossibleWidths[0]),lfb_updateStepMainSettings()},slide:function(e,t){0<t.value?tooltip.find(".tooltip-inner").html(lfb_stepPossibleWidths[t.value]+"px"):tooltip.find(".tooltip-inner").html(lfb_stepPossibleWidths[0]),tooltip.show(),lfb_updateStepMainSettings()},stop:function(e,t){0<t.value?tooltip.find(".tooltip-inner").html(lfb_stepPossibleWidths[t.value]+"px"):tooltip.find(".tooltip-inner").html(lfb_stepPossibleWidths[0]),tooltip.hide(),lfb_updateStepMainSettings()}}).find(".ui-slider-handle").append(tooltip).on("mouseenter",function(){tooltip.show()}).on("mouseleave",function(){tooltip.hide()}),jQuery("#lfb_stepsContainer").droppable({drop:function(e,t){var l=jQuery(t.draggable[0]);jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveStepPosition",stepID:l.attr("data-stepid"),posX:parseInt(l.css("left")),posY:parseInt(l.css("top"))}});t=lfb_getStepByID(parseInt(l.attr("data-stepid")));null!=t&&null!=t.content&&"string"!=typeof t.content&&(t.content.previewPosX=parseInt(l.css("left")),t.content.previewPosY=parseInt(l.css("top"))),lfb_updateStepCanvas()}}),jQuery('#lfb_winLog [name="orderStatus"]').on("change",lfb_changeOrderStatus),document.addEventListener("visibilitychange",function(){lfb_updateStepCanvas()}),jQuery("body").css({overflow:"initial"}),jQuery("#lfb_editorLog").summernote({height:500,minHeight:null,maxHeight:null}),jQuery("#lfb_stepsOverflow").scroll(function(){lfb_disableLinksAnim&&lfb_updateStepCanvas()}),jQuery('[data-action="defineItinerary"]').on("click",function(){lfb_editDistanceValue(9)}),window.old_tb_remove=window.tb_remove,window.tb_remove=function(){window.old_tb_remove(),lfb_formfield=null},window.original_send_to_editor=window.send_to_editor,window.send_to_editor=function(e){var t,l;lfb_formfield?(t=jQuery("img",e).attr("alt"),l=jQuery("img",e).attr("src"),0==jQuery("img",e).length&&(l=jQuery(e).attr("src"),t=jQuery(e).attr("alt")),lfb_formfield.val(l),lfb_formfield.trigger("keyup"),0<lfb_formfield.closest(".lfb_picOnly").length&&jQuery('#lfb_itemTabGeneral [name="imageDes"]').val(t),tb_remove()):window.original_send_to_editor(e)},jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48}),jQuery("#wooProductSelect").on("change focusout",function(){var e;""==jQuery(this).val()&&((e=jQuery("#lfb_winItem").find('[name="wooProductID"]')).attr("data-price",0),e.attr("data-type",""),e.attr("data-max",0),e.attr("data-woovariation",0),e.attr("data-image",""),e.attr("data-title",""),e.attr("data-id",0),e.val(0).trigger("change"),jQuery("#lfb_winItem").find('[name="wooVariation"]').val(0))}),jQuery("#wooProductSelect").autocomplete({appendTo:jQuery("#lfb_winItem"),change:function(e,t){jQuery(this).val(t.item?t.item.value:"")},source:function(e,t){jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"lfb_getWooProductsByTerm",term:e.term},success:function(e){jQuery("#wooProductSelect").removeClass("ui-autocomplete-loading"),t(e)}})},minLength:2,select:function(e,t){var l=t.item,t=jQuery("#lfb_winItem").find('[name="wooProductID"]');t.attr("data-price",l.price),t.attr("data-type",l.type),t.attr("data-max",l.max),t.attr("data-woovariation",l.woovariation),t.attr("data-image",l.image),t.attr("data-title",l.label),t.attr("data-id",l.id),t.val(l.id).trigger("change"),jQuery("#lfb_winItem").find('[name="wooVariation"]').val(l.woovariation)}}),jQuery("#lfb_distanceDuration").on("change",function(){"duration"==jQuery(this).val()?(jQuery("#lfb_distanceType").hide(),jQuery("#lfb_durationType").css({display:"inline-block"})):(jQuery("#lfb_durationType").hide(),jQuery("#lfb_distanceType").css({display:"inline-block"}))}),jQuery('#lfb_panelFormsList a[data-action="loadForm"]').on("click",function(){lfb_loadForm(jQuery(this).closest("tr").attr("data-formid"))}),jQuery('#lfb_panelFormsList a[data-action="showShortcodeWin"]').on("click",function(){lfb_showShortcodeWin(jQuery(this).closest("tr").attr("data-formid"))}),jQuery('#lfb_panelFormsList a[data-action="formPreview"]').on("click",function(){lfb_openFormPreview(jQuery(this).closest("tr").attr("data-formid"))}),jQuery('#lfb_panelFormsList a[data-action="loadLogs"]').on("click",function(){lfb_loadLogs(jQuery(this).closest("tr").attr("data-formid"))}),jQuery('#lfb_panelFormsList a[data-action="openCharts"]').on("click",function(){lfb_openCharts(jQuery(this).closest("tr").attr("data-formid"))}),jQuery('#lfb_panelFormsList a[data-action="duplicateForm"]').on("click",function(){lfb_duplicateForm(jQuery(this).closest("tr").attr("data-formid"))}),jQuery('#lfb_panelFormsList a[data-action="designForm"]').on("click",function(){var e=jQuery(this).closest("tr").attr("data-formid");lfb_loadForm(lfb_data.designForm=e)}),jQuery('a[data-action="lfb_addCoupon"]').on("click",function(){lfb_editCoupon(0)}),jQuery('a[data-action="lfb_addCalendarCat"]').on("click",function(){lfb_editCalendarCat(0)}),$(".lfb_lPanelHeaderCloseBtn").on("click",function(){lfb_closeLeftPanel($(this).closest(".lfb_lPanel").attr("id"))}),jQuery('a[data-action="lfb_addCalendarReminder"]').on("click",function(){lfb_editCalendarReminder(0)}),jQuery('a[data-action="lfb_saveLogWithoutSend"]').on("click",function(){lfb_saveLog(!1)}),jQuery('a[data-action="lfb_saveLogAndSend"]').on("click",function(){lfb_saveLog(!0)}),jQuery('a[data-action="loadLogsFromCharts"]').on("click",function(){lfb_loadLogs(jQuery("#lfb_panelCharts").attr("data-formid"))}),jQuery('a[data-action="lfb_showImportWin"]').on("click",function(){jQuery("#lfb_winImport").fadeIn(260)}),jQuery('#lfb_formFields .nav-tabs a[href="#lfb_tabDesign"]').on("click",function(){setTimeout(function(){lfb_editorCustomCSS.refresh()},100)}),jQuery("#lfb_btnAddEmailValue").on("click",function(){lfb_addEmailValue(0)}),jQuery("#lfb_btnAddPdfValue").on("click",function(){lfb_addEmailValue(3)}),jQuery("#lfb_btnAddEmailValueCustomer").on("click",function(){lfb_addEmailValue(1)}),jQuery("#lfb_btnAddPdfValueCustomer").on("click",function(){lfb_addEmailValue(4)}),jQuery("#lfb_addRedirBtn").on("click",function(){lfb_editRedirection(0)}),jQuery("#lfb_addFieldBtn").on("click",function(){lfb_editItem(0)}),$('#lfb_winSaveBeforeSendOrder [data-dismiss="modal"]').on("click",function(){lfb_orderModified=!1,lfb_openWinSendOrderEmail()}),jQuery('a[data-action="lfb_addItem"]').on("click",function(){lfb_editItem(0)}),$('#lfb_priceCalculationField a[data-action="lfb_addCalculationValue"]').on("click",function(){lfb_calculationModeQt=!1,lfb_addCalculationValue(this)}),$('#lfb_priceCalculationField a[data-action="lfb_addCalculationCondition"]').on("click",function(){lfb_calculationModeQt=!1,lfb_addCalculationCondition()}),$('#lfb_priceCalculationField a[data-action="lfb_editDistanceValue"]').on("click",function(){lfb_editDistanceValue(lfb_calculationModeQt=!1)}),$('#lfb_priceCalculationField a[data-action="lfb_addDateDiffValue"]').on("click",function(){lfb_calculationModeQt=!1,lfb_addDateDiffValue(this)}),$('#lfb_quantityCalculationField a[data-action="lfb_addCalculationValue"]').on("click",function(){lfb_calculationModeQt=!0,lfb_addCalculationValue(this)}),$('#lfb_quantityCalculationField a[data-action="lfb_addCalculationCondition"]').on("click",function(){lfb_calculationModeQt=!0,lfb_addCalculationCondition()}),$('#lfb_quantityCalculationField a[data-action="lfb_editDistanceValue"]').on("click",function(){lfb_editDistanceValue(!(lfb_calculationModeQt=!0))}),$('#lfb_quantityCalculationField a[data-action="lfb_addDateDiffValue"]').on("click",function(){lfb_calculationModeQt=!0,lfb_addDateDiffValue(this)}),$('#lfb_varCalculationField a[data-action="lfb_addCalculationValue"]').on("click",function(){lfb_calculationModeQt=2,lfb_addCalculationValue(this)}),$('#lfb_varCalculationField a[data-action="lfb_addCalculationCondition"]').on("click",function(){lfb_calculationModeQt=2,lfb_addCalculationCondition()}),$('#lfb_varCalculationField a[data-action="lfb_editDistanceValue"]').on("click",function(){lfb_editDistanceValue(!(lfb_calculationModeQt=2))}),$('#lfb_varCalculationField a[data-action="lfb_addDateDiffValue"]').on("click",function(){lfb_calculationModeQt=2,lfb_addDateDiffValue(this)}),$("#lfb_btnAddRichtextValue").on("click",function(){lfb_addEmailValue(2)}),$("#lfb_exportLink").on("click",function(){jQuery("#lfb_winExport").fadeOut(260)}),$("#lfb_downloadOrderLink").on("click",function(){jQuery("#lfb_winDownloadOrder").fadeOut(260)}),$("#lfb_exportCustomerCsvLink").on("click",function(){jQuery("#lfb_winExportCustomersCsv").fadeOut(260)}),$("#lfb_exportCustomerCsvLink").on("click",function(){jQuery("#lfb_winExportCustomersCsv").fadeOut(260)}),$("#lfb_exportCalendarCsvLink").on("click",function(){jQuery("#lfb_winCalendarCsv").fadeOut(260)}),$("#lfb_distanceQtContainer a").on("click",function(){lfb_editDistanceValue(9)}),jQuery('a[data-action="lfb_openFormDesigner"]').on("click",lfb_openFormDesigner),jQuery('#lfb_panelFormsList a[data-action="deleteForm"]').on("click",function(){lfb_askDeleteForm(jQuery(this).closest("tr").attr("data-formid"))}),jQuery("#lfb_formDesignerBtn").on("click",function(){lfb_openFormDesigner()}),$('a[data-action="saveItem"]').on("click",lfb_saveItem),$('a[data-action="lfb_saveCalculationValue"]').on("click",lfb_saveCalculationValue),$('a[data-action="lfb_saveCalculationDatesDiff"]').on("click",lfb_saveCalculationDatesDiff),$('a[data-action="lfb_saveDistanceValue"]').on("click",lfb_saveDistanceValue),$('a[data-action="lfb_saveCoupon"]').on("click",lfb_saveCoupon),$('a[data-action="lfb_confirmModifyTotal"]').on("click",lfb_confirmModifyTotal),$('a[data-action="lfb_editShowStepConditions"]').on("click",lfb_editShowStepConditions),$('a[data-action="lfb_importForms"]').on("click",lfb_importForms),$('a[data-action="lfb_confirmDeleteForm"]').on("click",lfb_confirmDeleteForm),$('a[data-action="lfb_confirmDeleteStep"]').on("click",lfb_confirmDeleteStep),$('a[data-action="lfb_confirmDeleteItem"]').on("click",lfb_confirmDeleteItem),$('a[data-action="lfb_confirmRemoveLog"]').on("click",lfb_confirmRemoveLog),$('a[data-action="lfb_confirmDeleteCalendarCat"]').on("click",lfb_confirmDeleteCalendarCat),$('a[data-action="lfb_closeSettings"]').on("click",lfb_closeSettings),$('a[data-action="lfb_exportOrdersSelection"]').on("click",lfb_exportOrdersSelection),$('a[data-action="lfb_deleteOrdersSelection"]').on("click",lfb_deleteOrdersSelection),$('a[data-action="lfb_closeCharts"]').on("click",lfb_closeCharts),$('a[data-action="lfb_addForm"]').on("click",lfb_addForm),$('a[data-action="lfb_exportForms"]').on("click",lfb_exportForms),$('a[data-action="lfb_removeAllSteps"]').on("click",lfb_removeAllSteps),$('a[data-action="lfb_openEmailTab"]').on("click",lfb_openEmailTab),$('a[data-action="lfb_resetReference"]').on("click",lfb_resetReference),$('a[data-action="lfb_openFormDesigner"]').on("click",lfb_openFormDesigner),$('a[data-action="lfb_removeAllCoupons"]').on("click",lfb_removeAllCoupons),$('a[data-action="lfb_editCustomerDataSettings"]').on("click",lfb_editCustomerDataSettings),$('a[data-action="lfb_saveForm"]').on("click",lfb_saveForm),$('a[data-action="lfb_saveEmailValue"]').on("click",lfb_saveEmailValue),$('a[data-action="lfb_addLinkInteraction"]').on("click",lfb_addLinkInteraction),$('a[data-action="lfb_linkSave"]').on("click",lfb_linkSave),$('a[data-action="lfb_linkDel"]').on("click",lfb_linkDel),$('a[data-action="lfb_addRedirInteraction"]').on("click",lfb_addRedirInteraction),$('a[data-action="lfb_redirSave"]').on("click",lfb_redirSave),$('a[data-action="lfb_addCalcInteraction"]').on("click",lfb_addCalcInteraction),$('a[data-action="lfb_calcConditionSave"]').on("click",lfb_calcConditionSave),$('a[data-action="lfb_addShowLayerInteraction"]').on("click",lfb_addShowLayerInteraction),$('a[data-action="lfb_showLayerConditionSave"]').on("click",lfb_showLayerConditionSave),$('a[data-action="lfb_addShowInteraction"]').on("click",lfb_addShowInteraction),$('a[data-action="lfb_showConditionSave"]').on("click",lfb_showConditionSave),$('a[data-action="lfb_addShowStepInteraction"]').on("click",lfb_addShowStepInteraction),$('a[data-action="lfb_showStepConditionSave"]').on("click",lfb_showStepConditionSave),$('a[data-action="lfb_addNewCalendar"]').on("click",lfb_addNewCalendar),$('a[data-action="lfb_askDeleteCalendar"]').on("click",lfb_askDeleteCalendar),$('a[data-action="lfb_closeEventsCategories"]').on("click",lfb_closeEventsCategories),$('a[data-action="lfb_saveCalendarHoursDisabled"]').on("click",lfb_saveCalendarHoursDisabled),$('a[data-action="lfb_saveCalendarDaysWeek"]').on("click",lfb_saveCalendarDaysWeek),$('a[data-action="lfb_btnCalEventViewOrderClick"]').on("click",lfb_btnCalEventViewOrderClick),$('a[data-action="lfb_btnCalEventViewCustomerClick"]').on("click",lfb_btnCalEventViewCustomerClick),$('a[data-action="lfb_calendarEventViewGmap"]').on("click",lfb_calendarEventViewGmap),$('a[data-action="lfb_saveCalendarEvent"]').on("click",lfb_saveCalendarEvent),$('a[data-action="lfb_deleteCalendarEvent"]').on("click",lfb_deleteCalendarEvent),$('a[data-action="lfb_closeLog"]').on("click",lfb_closeLog),$('a[data-action="lfb_orderAddRow"]').on("click",lfb_orderAddRow),$('a[data-action="lfb_orderAddStepRow"]').on("click",lfb_orderAddStepRow),$('a[data-action="lfb_openWinModifyTotal"]').on("click",lfb_openWinModifyTotal),$('a[data-action="lfb_sendOrderByEmail"]').on("click",lfb_sendOrderByEmail),$('a[data-action="lfb_editShowStepConditions"]').on("click",lfb_editShowStepConditions),$('a[data-action="lfb_saveStep"]').on("click",lfb_saveStep),$('a[data-action="lfb_closeItemWin"]').on("click",lfb_closeItemWin),$('a[data-action="lfb_openCalendarPanelFromItem"]').on("click",lfb_openCalendarPanelFromItem),$('a[data-action="lfb_add_option"]').on("click",lfb_add_option),$('a[data-action="lfb_editShowConditions"]').on("click",lfb_editShowConditions),$('a[data-action="lfb_add_reduc"]').on("click",lfb_add_reduc),$('a[data-action="lfb_newLayerImg"]').on("click",lfb_newLayerImg),$('a[data-action="lfb_confirmDeleteCalendarEvent"]').on("click",lfb_confirmDeleteCalendarEvent),$('a[data-action="lfb_deleteCalendar"]').on("click",lfb_deleteCalendar),$('a[data-action="lfb_saveCalendar"]').on("click",lfb_saveCalendar),$('a[data-action="lfb_saveCalendarCat"]').on("click",lfb_saveCalendarCat),$('a[data-action="lfb_saveCalendarReminder"]').on("click",lfb_saveCalendarReminder),$('a[data-action="lfb_tld_toggleSavePanel"]').on("click",lfb_tld_toggleSavePanel),$('a[data-action="lfb_tld_openSaveBeforeEditDialog"]').on("click",lfb_tld_openSaveBeforeEditDialog),$('a[data-action="lfb_tld_resetStyles"]').on("click",lfb_tld_resetStyles),$('a[data-action="lfb_tld_leave"]').on("click",lfb_tld_leave),$('a[data-action="lfb_tld_tdgn_toggleTdgnPanel"]').on("click",lfb_tld_tdgn_toggleTdgnPanel),$('a[data-action="lfb_tld_prepareSelectElement"]').on("click",lfb_tld_prepareSelectElement),$('a[data-action="lfb_tld_saveCurrentElement"]').on("click",lfb_tld_saveCurrentElement),$('a[data-action="lfb_tld_tdgn_toggleInspector"]').on("click",lfb_tld_tdgn_toggleInspector),0<jQuery('textarea[name="customJS"]').length&&(lfb_editorCustomJS=CodeMirror.fromTextArea(jQuery('textarea[name="customJS"]').get(0),{mode:"javascript",lineNumbers:!0}),lfb_editorCustomCSS=CodeMirror.fromTextArea(jQuery('textarea[name="customCss"]').get(0),{mode:"css",lineNumbers:!0})),0<jQuery("#lfb_winItem").length&&(lfb_itemPriceCalculationEditor=CodeMirror.fromTextArea(jQuery('#lfb_winItem textarea[name="calculation"]').get(0),{mode:"javascript",lineNumbers:!0}),jQuery('#lfb_winItem textarea[name="calculation"]').data("codeMirrorEditor",lfb_itemPriceCalculationEditor),lfb_itemCalculationQtEditor=CodeMirror.fromTextArea(jQuery('#lfb_winItem textarea[name="calculationQt"]').get(0),{mode:"javascript",lineNumbers:!0}),jQuery('#lfb_winItem textarea[name="calculationQt"]').data("codeMirrorEditor",lfb_itemCalculationQtEditor),lfb_itemVariableCalculationEditor=CodeMirror.fromTextArea(jQuery('#lfb_winItem textarea[name="variableCalculation"]').get(0),{mode:"javascript",lineNumbers:!0}),jQuery('#lfb_winItem textarea[name="variableCalculation"]').data("codeMirrorEditor",lfb_itemVariableCalculationEditor),lfb_itemPriceCalculationEditor.jObject=jQuery('#lfb_winItem textarea[name="calculation"]'),lfb_itemCalculationQtEditor.jObject=jQuery('#lfb_winItem textarea[name="calculationQt"]'),lfb_itemVariableCalculationEditor.jObject=jQuery('#lfb_winItem textarea[name="variableCalculation"]'),lfb_initCalculationEditor("calculation"),lfb_initCalculationEditor("calculationQt"),lfb_initCalculationEditor("variableCalculation")),setInterval(function(){"block"==jQuery("#lfb_winStep").css("display")?jQuery("#wpwrap").css({height:jQuery("#lfb_winStep").height()+48}):jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},1e3),lfb_initLogsToolbar(),lfb_initVariablesToolbar(),lfb_initEditOrderToolbar(),lfb_initMainToolbar(),lfb_initWinGlobalSettings(),lfb_initWinDeleteCustomer(),lfb_initWinCustomerDetails(),lfb_initWinCustomers(),jQuery('a[data-action="openStepSettings"]').on("click",function(){jQuery("#lfb_winStepSettings").fadeIn(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadStep",stepID:lfb_currentStepID},success:function(rep){var step;rep=jQuery.parseJSON(rep),lfb_currentStepID==rep.step.id&&(step=rep.step,lfb_currentStep=rep,jQuery("#lfb_winStepSettings").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(step."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}"),eval("if(step."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(step."+jQuery(this).attr("name")+");")}),jQuery("#lfb_winStepSettings").find('[name="useShowConditions"]').on("change",lfb_changeUseShowStepConditions),lfb_changeUseShowStepConditions())}})}),jQuery('a[data-action="saveStepSettings"]').on("click",function(){lfb_saveStepSettings()}),jQuery("#lfb_winEditStepVisual #lfb_stepTitle").on("keyup",function(){jQuery("#lfb_stepFrame").contents().find('.lfb_genSlide[data-stepid="'+lfb_currentStepID+'"] .lfb_stepTitle').html(jQuery(this).val()),lfb_currentStep.title=jQuery(this).val(),jQuery('.lfb_stepBloc[data-stepid="'+lfb_currentStepID+'"] h4').html(lfb_currentStep.title)}),jQuery("#lfb_winEditStepVisual #lfb_stepTitle").on("focusout",lfb_updateStepMainSettings),jQuery("#lfb_form .modal").on("show.bs.modal",function(){setTimeout(function(){jQuery(".modal-backdrop").detach().addClass("lfb_backdrop").appendTo("#lfb_form")},100)}),jQuery('#modal_deleteVariable a[data-action="deleteVariable"]').on("click",lfb_confirmDeleteVariable),jQuery('#lfb_winEditVariable a[data-action="saveVariable"]').on("click",lfb_saveVariable),jQuery('#lfb_winCalendarTopMenu a[data-action="openCalEventsCats"]').on("click",lfb_openEventsCategories),jQuery('#lfb_winCalendarTopMenu a[data-action="openCalDefReminders"]').on("click",lfb_openDefaultReminders),jQuery('#lfb_winCalendarTopMenu a[data-action="exportCalCsv"]').on("click",lfb_exportCalendarEvents),jQuery('#lfb_winCalendarTopMenu a[data-action="openCalDaysWeek"]').on("click",function(){lfb_openLeftPanel("lfb_calendarDaysWeek")}),jQuery('#lfb_winCalendarTopMenu a[data-action="openCalHours"]').on("click",function(){lfb_openLeftPanel("lfb_calendarHoursEnabled")}),jQuery("#lfb_winItem .lfb_btnWinClose").parent().on("click",function(){jQuery("html").css("overflow-y","auto"),0<lfb_currentStepID&&1!=lfb_settings.useVisualBuilder?(jQuery("#lfb_winStep").show(),lfb_openWinStep(lfb_currentStepID)):jQuery("#lfb_panelPreview").show()}),jQuery("#lfb_winStep .lfb_btnWinClose").parent().on("click",function(){jQuery("html,body").css("overflow-y","auto"),jQuery("#lfb_panelPreview").show(),lfb_currentStep=!1,lfb_currentStepID=0}),jQuery("#lfb_winEditStepVisual .lfb_btnWinClose").parent().on("click",function(){jQuery("html,body").css("overflow-y","auto"),jQuery("#lfb_panelPreview").show()}),jQuery("#lfb_winShowStepConditions .lfb_btnWinClose").parent().on("click",function(){1==lfb_settings.useVisualBuilder&&jQuery("#lfb_winStepSettings").fadeIn(260)}),jQuery(document).on("mousemove",function(e){lfb_isLinking&&(lfb_mouseX=e.pageX-jQuery("#lfb_stepsContainer").offset().left,lfb_mouseY=e.pageY-jQuery("#lfb_stepsContainer").offset().top)}),jQuery(window).resize(lfb_updateStepsDesign),lfb_itemWinTimer=setInterval(lfb_updateWinItemPosition,30),jQuery("#lfb_actionSelect").on("change",function(){lfb_changeActionBubble(jQuery("#lfb_actionSelect").val())}),jQuery("#lfb_interactionSelect").on("change",function(){lfb_changeInteractionBubble(jQuery("#lfb_interactionSelect").val())}),jQuery('input[data-iconfield="1"]').on("focusout",function(){var e;-1<jQuery(this).val().indexOf("<i")&&(e=jQuery(jQuery(this).val()),jQuery(this).val(e.attr("class")))}),jQuery('#lfb_winGlobalSettings [data-action="testSMTP"]').on("click",lfb_testSMTP),jQuery('#lfb_winShortcode [name="display"]').on("change",generateShortcode),jQuery('#lfb_winShortcode [name="startStep"]').on("change",generateShortcode),jQuery("#lfb_winShortcode").find("#lfb_shortcodeField,#lfb_shortcodePopup").on("click",function(){lfb_selectPre(this)}),jQuery("#lfb_interactionBubble,#lfb_actionBubble,#lfb_linkBubble,#lfb_fieldBubble,#lfb_calculationValueBubble,#lfb_emailValueBubble,#lfb_distanceValueBubble,#lfb_calculationDatesDiffBubble").on("mouseeenter",function(e){jQuery(this).addClass("lfb_hover")}).on("mouseleave",function(e){jQuery(this).removeClass("lfb_hover")}),jQuery("#lfb_interactionBubble,#lfb_actionBubble,#lfb_linkBubble,#lfb_fieldBubble,#lfb_calculationValueBubble,#lfb_emailValueBubble,#lfb_distanceValueBubble,#lfb_calculationDatesDiffBubble").find("select").on("focusin",function(){jQuery(this).addClass("lfb_hover")}).on("focusout",function(){jQuery(this).removeClass("lfb_hover")}),jQuery("body").on("click",function(){jQuery("#lfb_interactionBubble").is(".lfb_hover")||jQuery("#lfb_interactionBubble").fadeOut(),jQuery("#lfb_actionBubble").is(".lfb_hover")||jQuery("#lfb_websiteFrame").is(".lfb_hover")||jQuery(".lfb_selectElementPanel").is(".lfb_hover")||jQuery("#lfb_actionBubble").fadeOut(),jQuery("#lfb_linkBubble").is(".lfb_hover")||jQuery("#lfb_linkBubble").fadeOut(),jQuery("#lfb_calculationValueBubble").is(".lfb_hover")||0!=jQuery("#lfb_calculationValueBubble").find(".lfb_hover").length||jQuery("#lfb_calculationValueBubble").fadeOut(),jQuery("#lfb_emailValueBubble").is(".lfb_hover")||0!=jQuery("#lfb_emailValueBubble").find(".lfb_hover").length||jQuery("#lfb_emailValueBubble").fadeOut(),jQuery("#lfb_fieldBubble").is(".lfb_hover")||0!=jQuery("#lfb_fieldBubble").find(".lfb_hover").length||jQuery("#lfb_fieldBubble").fadeOut(),jQuery("#lfb_distanceValueBubble").is(".lfb_hover")||0!=jQuery("#lfb_distanceValueBubble").find(".lfb_hover").length||jQuery("#lfb_distanceValueBubble").fadeOut(),jQuery("#lfb_calculationDatesDiffBubble").is(".lfb_hover")||0!=jQuery("#lfb_calculationDatesDiffBubble").find(".lfb_hover").length||jQuery("#lfb_calculationDatesDiffBubble").fadeOut()}),jQuery("#lfb_bootstraped .modal-dialog").on("mouseeenter",function(){jQuery(this).addClass("lfb_hover")}).on("mouseleave",function(){jQuery(this).removeClass("lfb_hover")}),jQuery("#lfb_bootstraped .modal").on("hide.bs.modal",function(e){jQuery(this).find(".modal-dialog").is(".lfb_hover")||e.preventDefault()}),jQuery("#lfb_closeWinActivationBtn").on("click",function(){lfb_lock||(jQuery("#lfb_winActivation").fadeOut(260),jQuery("#lfb_winActivation").delay(200).fadeOut())}),jQuery("#lfb_winActivation").is('[data-show="true"]')&&document.referrer.indexOf("admin.php?page=lfb_menu")<0?(lfb_lock=!0,jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num",10).html("Wait 10 seconds"),lfb_actTimer=setInterval(function(){var e=jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num");0<--e?jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num",e).html("Wait "+e+" seconds"):(jQuery("#lfb_closeWinActivationBtn").removeClass("disabled"),lfb_lock=!1,jQuery("#lfb_closeWinActivationBtn .lfb_text").data("num","").html("Close"))},1e3)):jQuery("#lfb_winActivation").attr("data-show","false"),jQuery("#lfb_winActivation").on("hide.bs.modal",function(e){lfb_lock&&!jQuery("#lfb_winActivation .modal-dialog").is(".lfb_hover")&&e.preventDefault()}),jQuery(document).on("mousedown",function(e){2==e.button&&lfb_isLinking&&(lfb_isLinking=!1)}),jQuery('input[type="number"][min]').on("focusout",function(){-1<jQuery(this).val().indexOf("-")&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)&&jQuery(this).val(parseInt(jQuery(this).attr("min"))),parseFloat(jQuery(this).val())<parseFloat(jQuery(this).attr("min"))&&jQuery(this).val(jQuery(this).attr("min")),parseFloat(jQuery(this).val())>parseFloat(jQuery(this).attr("max"))&&jQuery(this).val(jQuery(this).attr("max"))}),jQuery(".form-group").each(function(){var e=this;0<jQuery(e).find("small").length&&0<jQuery(e).find(".form-control").length&&jQuery(this).find(".form-control").b_tooltip({title:jQuery(e).find("small").html(),html:!0})}),jQuery("#lfb_editFinalStepVisual").on("click",function(){lfb_editVisualStep(0)}),jQuery("#lfb_winEditVariable").find('[data-switch="switch"]').wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_winStepSettings").find('[data-switch="switch"]').wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_winSendOrberByEmail").find('[data-switch="switch"]').wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_bootstraped.lfb_bootstraped [data-toggle='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_winItem [data-switch='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_winStep [data-switch='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_formFields [data-switch='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_winDeleteOrder [data-switch='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No}),jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_winGlobalSettings [data-switch='switch']").wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch({onLabel:lfb_data.texts.Yes,offLabel:lfb_data.texts.No});var dateFormat=lfb_data.dateFormat,dateFormat=dateFormat.replace(/\\\//g,"/");dateFormat+=" "+lfb_data.timeFormat,jQuery(".lfb_datetimepicker").datetimepicker({timeZone:"",showMeridian:"1"==lfb_data.dateMeridian,format:dateFormat,container:jQuery("#lfb_form.lfb_bootstraped")}).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").show(),jQuery(".datetimepicker .table-condensed .switch").show(),jQuery(".datetimepicker .table-condensed .next").show()}),jQuery("#lfb_stepsOverflow").on("contextmenu",function(){return!1}),jQuery("#lfb_imageLayersTable tbody").sortable({helper:function(e,t){var l=t.children(),t=t.clone();return t.children().each(function(e){jQuery(this).width(l.eq(e).width())}),t},stop:function(e,t){var l="";jQuery("#lfb_imageLayersTable tbody tr[data-layerid]").each(function(e){l+=jQuery(this).attr("data-layerid")+","}),0<l.length&&(l=l.substr(0,l.length-1)),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeLayersOrder",layers:l}})}}),jQuery("#lfb_tabLastStep table tbody").sortable({helper:function(e,t){var l=t.children(),t=t.clone();return t.children().each(function(e){jQuery(this).width(l.eq(e).width())}),t},stop:function(e,t){var l="";jQuery("#lfb_tabLastStep table tbody tr[data-fieldid]").each(function(e){l+=jQuery(this).attr("data-fieldid")+","}),0<l.length&&(l=l.substr(0,l.length-1)),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeLastFieldsOrders",fields:l}})}});var todayDate=new Date;jQuery("#lfb_calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},defaultDate:new Date,editable:!0,locale:lfb_data.locale,timeFormat:lfb_data.timeFormatCal,navLinks:!0,eventLimit:!0,events:function(e,t,l,a){"none"!=jQuery("#lfb_winCalendars").css("display")&&jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getCalendarEvents",formID:lfb_currentFormID,calendarID:lfb_currentCalendarID,start:moment(e,"YYYY-MM-DD HH:mm:ss").toDate(),end:moment(t,"YYYY-MM-DD HH:mm:ss").toDate()},success:function(e){e=jQuery.parseJSON(e,!0),lfb_currentCalendarEvents=e.events,lfb_currentCalendarDefaultReminders=e.reminders,lfb_currentCalendarCats=e.categories,lfb_currentCalendarDaysWeek=e.daysWeek,lfb_currentCalendarDisabledHours=e.disabledHours,lfb_generateCalendarCatsSelect(),lfb_generateCalendarCatsTable(),lfb_updateCalendarDaysWeekTable(),lfb_updateCalendarHoursEnabledTable(),jQuery.each(lfb_currentCalendarDaysWeek,function(e){lfb_currentCalendarDaysWeek[e]=parseInt(this)}),jQuery("#lfb_calendar").fullCalendar("option","hiddenDays",lfb_currentCalendarDaysWeek),jQuery.each(lfb_currentCalendarEvents,function(){1==this.allDay?this.allDay=!0:this.allDay=!1}),jQuery('#lfb_calendarLeftMenu [name="orderID"] option[value!="0"]').remove(),jQuery.each(e.orders,function(){jQuery('#lfb_calendarLeftMenu [name="orderID"]').append('<option value="'+this.id+'" data-customerid="'+this.customerID+'">'+this.title+"</option>")}),0<lfb_currentCalendarEventID&&lfb_editCalendarEvent(lfb_currentCalendarEventID),a(lfb_currentCalendarEvents),jQuery("#lfb_loader").fadeOut()}})},eventDrop:function(e,t,l){var a=e.start.toDate().toISOString().slice(0,19).replace("T"," ");null!=e.end&&(a=e.end.toDate().toISOString().slice(0,19).replace("T"," ")),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_updateCalendarEvent",formID:lfb_currentFormID,eventID:e.id,start:e.start.toDate().toISOString().slice(0,19).replace("T"," "),end:a},success:function(e){}})},eventResize:function(e,t,l,a){var n=e.start.toDate().toISOString().slice(0,19).replace("T"," ");null!=e.end&&(n=e.end.toDate().toISOString().slice(0,19).replace("T"," ")),lfb_getCalendarEvent(e.id).end=n,lfb_currentCalendarEventID==e.id&&jQuery('#lfb_calendarLeftMenu [name="end"]').datetimepicker("setDate",moment(n,"YYYY-MM-DD HH:mm").toDate()),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_updateCalendarEvent",formID:lfb_currentFormID,eventID:e.id,start:e.start.toDate().toISOString().slice(0,19).replace("T"," "),end:n},success:function(e){}})},eventClick:function(e,t,l){lfb_editCalendarEvent(e.id)},dayRender:function(e,t){var l=jQuery('<a href="javascript:" class="lfb_calendarLinkAddEventDay"><span class="glyphicon glyphicon-plus"></span></a>');l.on("click",function(){lfb_addCalendarEvent(e,t)}),jQuery(t).append(l)},dayClick:function(e,t,l){"agendaWeek"!=l.name&&"agendaDay"!=l.name&&"month"!=l.name||lfb_addCalendarEvent(e)}}),jQuery('#lfb_calendarLeftMenu [name="allDay"]').on("change",lfb_calEventFullDayChange),jQuery('#lfb_calendarLeftMenu [name="start"]').on("change",lfb_calEventStartDateChange),jQuery("#lfb_selectCalendar").on("change",lfb_selectCalendarChange),jQuery('#lfb_calendarLeftMenu [name="orderID"]').on("change",lfb_calEventOrderIDChange),jQuery('#lfb_calendarLeftMenu [name="customerID"]').on("change",lfb_calEventCustomerIDChange),jQuery('#lfb_calendarLeftMenu [name="categoryID"]').on("change",lfb_calEventCategoryIDChange),jQuery("#calEventContent").summernote({height:200,minHeight:null,maxHeight:null}),jQuery(".lfb_iconslist li a").on("click",function(){jQuery(this).closest(".form-group").find(".btn.dropdown-toggle>span.lfb_name").html(jQuery(this).attr("data-icon")),jQuery(this).closest(".form-group").find("input.lfb_iconField").val(jQuery(this).attr("data-icon")),jQuery(this).closest("ul").find("li.lfb_active").removeClass("lfb_active"),jQuery(this).closest("li").addClass("lfb_active")}),jQuery("input.lfb_iconField").on("change",function(){jQuery(this).closest(".form-group").find(".btn.dropdown-toggle>span.lfb_name").html()!=jQuery(this).val()&&jQuery(this).closest(".form-group").find(".btn.dropdown-toggle>span.lfb_name").html(jQuery(this).val())}),jQuery('#lfb_mainToolbar [data-action="toggleDarkMode"]').on("click",lfb_toggleDarkMode),jQuery('#lfb_winEditCalendarCat input[data-switch="switch"]').wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch(),jQuery("#lfb_winEditCalendarCat .colorpick").each(function(){var e=jQuery(this);0==jQuery(this).prev(".lfb_colorPreview").length&&jQuery(this).before('<div class="lfb_colorPreview" style="background-color:#'+e.val().substr(1,7)+'"></div>'),jQuery(this).prev(".lfb_colorPreview").on("click",function(){jQuery(this).next(".colorpick").trigger("click")}),jQuery(this).colpick({color:e.val().substr(1,7),onChange:function(e,t,l,a,n){jQuery(a).val("#"+t),jQuery(a).prev(".lfb_colorPreview").css({backgroundColor:"#"+t})}})}),jQuery("#lfb_winGlobalSettings .colorpick").each(function(){var e=jQuery(this);0==jQuery(this).prev(".lfb_colorPreview").length&&jQuery(this).before('<div class="lfb_colorPreview" style="background-color:#'+e.val().substr(1,7)+'"></div>'),jQuery(this).prev(".lfb_colorPreview").on("click",function(){jQuery(this).next(".colorpick").trigger("click")}),jQuery(this).colpick({color:e.val().substr(1,7),onChange:function(e,t,l,a,n){jQuery(a).val("#"+t),jQuery(a).prev(".lfb_colorPreview").css({backgroundColor:"#"+t})}})}),jQuery(".imageBtn").on("click",function(){return lfb_formfield=jQuery(this).prev("input"),tb_show("","media-upload.php?TB_iframe=true"),!1}),jQuery('#lfb_winExport input[data-switch="switch"]').wrap('<div class="switch" data-on-label="'+lfb_data.texts.Yes+'" data-off-label="'+lfb_data.texts.No+'" />').parent().bootstrapSwitch(),jQuery('#lfb_winExport input[data-switch="switch"]').on("change",lfb_exportForms),lfb_initCharts(),jQuery("#lfb_winActivation").modal(),jQuery('[data-toggle="tooltip"]').b_tooltip(),lfb_initVisualBuilder(),lfb_initWeeksDaysText(),lfb_loadSettings(),lfb_initStepVisual(),lfb_initFormsBackend(),0!=lfb_data.designForm&&lfb_loadForm(lfb_data.designForm),jQuery('a[data-action="closeCalendar"]').on("click",function(){lfb_closeLog(),!lfb_lastPanel||lfb_lastPanel!=jQuery("#lfb_panelLogs")?jQuery("#lfb_panelLogs").hide():jQuery("#lfb_panelLogs").show(),0<lfb_currentFormID&&jQuery("#lfb_panelPreview").show()}),jQuery("html,body").scrollTop(0)});var lfb_isWoo=!1;function lfb_changeWoo(){"0"!=jQuery("#lfb_winItem").find('[name="wooProductID"]').val()?(jQuery("#lfb_winItem").find('[name="eddProductID"]').val(0),lfb_isWoo=!0,jQuery(".wooMasked").fadeOut(250),""==jQuery("#lfb_winItem").find('[name="title"]').val()&&jQuery("#lfb_winItem").find('[name="title"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-title")),0<parseInt(jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-max"))&&jQuery("#lfb_winItem").find('[name="quantity_max"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-max")),(""==jQuery("#lfb_winItem").find('[name="image"]').val()||-1<jQuery("#lfb_winItem").find('[name="image"]').val().indexOf("150x150.png"))&&""!=jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-image")&&jQuery("#lfb_winItem").find('[name="image"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-image")),0!=jQuery("#lfb_winItem").find('[name="price"]').val()&&""!=jQuery("#lfb_winItem").find('[name="price"]').val()||jQuery("#lfb_winItem").find('[name="price"]').val(jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-price")),jQuery("#lfb_winItem").find('[name="wooProductID"]').is('[data-type="subscription"]')||jQuery("#lfb_winItem").find('[name="wooProductID"]').is('[data-type="variable-subscription"]')?jQuery("#lfb_winItem").find('[name="priceMode"]').val("sub"):""!=jQuery("#lfb_winItem").find('[name="wooProductID"]').attr("data-type")&&jQuery("#lfb_winItem").find('[name="priceMode"]').val("")):(lfb_isWoo=!1,0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())&&(jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideDown(),lfb_changeUseCalculation()))}function lfb_changeAutocomplete(){jQuery("#lfb_winItem").find('[name="autocomplete"]').is(":checked")?jQuery("#lfb_winItem").find('[name="autocomplete"]').closest(".form-group").find(".alert").slideDown():jQuery("#lfb_winItem").find('[name="autocomplete"]').closest(".form-group").find(".alert").slideUp()}function lfb_changeFieldType(){3<jQuery('#lfb_formFields [name="gmap_key"]').val().length&&"textfield"==jQuery("#lfb_winItem").find('[name="type"]').val()&&("address"==jQuery("#lfb_winItem").find('[name="fieldType"]').val()||"city"==jQuery("#lfb_winItem").find('[name="fieldType"]').val()||"country"==jQuery("#lfb_winItem").find('[name="fieldType"]').val()||"zip"==jQuery("#lfb_winItem").find('[name="fieldType"]').val())?jQuery("#lfb_winItem").find('[name="autocomplete"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="autocomplete"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="autocomplete"]').closest(".form-group").slideUp())}function lfb_changeEDD(){0<parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())?(jQuery("#lfb_winItem").find('[name="wooProductID"]').val(0),""==jQuery("#lfb_winItem").find('[name="title"]').val()&&jQuery("#lfb_winItem").find('[name="title"]').val(jQuery("#lfb_winItem").find('[name="eddProductID"] option:selected').data("title")),jQuery("#lfb_winItem").find('[name="eddProductID"] option:selected').data("img")&&""==jQuery("#lfb_winItem").find('[name="image"]').val()&&jQuery("#lfb_winItem").find('[name="image"]').val(jQuery("#lfb_winItem").find('[name="eddProductID"] option:selected').data("img")),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp()):0==parseInt(jQuery("#lfb_winItem").find('[name="wooProductID"]').val())&&(jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideDown(),lfb_changeUseCalculation())}function lpf_changeOperation(){"x"==jQuery("#lfb_winItem").find('[name="operation"]').val()||"/"==jQuery("#lfb_winItem").find('[name="operation"]').val()?(jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(1)").slideDown(),jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(0)").slideUp()):(jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(1)").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().find("label:eq(0)").slideDown()),"+"!=jQuery("#lfb_winItem").find('[name="operation"]').val()?(jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').prop("checked",!1),jQuery("#lfb_itemPricesGrid").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemPricesGrid tbody tr").not(".static").remove()):jQuery("#lfb_winItem").find('[name="quantity_enabled"]').is(":checked")&&jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideDown()}function lfb_changeUseShowConditions(){jQuery("#lfb_winItem").find('[name="useShowConditions"]').is(":checked")?jQuery("#lfb_winItem").find('[name="showConditions"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="showConditions"]').closest(".form-group").slideUp()}function lfb_changeUseCalculation(){("numberfield"==jQuery("#lfb_winItem").find('[name="type"]').val()&&jQuery("#lfb_winItem").find('[name="useValueAsQt"]').is(":checked")||"picture"==jQuery("#lfb_winItem").find('[name="type"]').val()||"checkbox"==jQuery("#lfb_winItem").find('[name="type"]').val()||"slider"==jQuery("#lfb_winItem").find('[name="type"]').val()||"button"==jQuery("#lfb_winItem").find('[name="type"]').val()||"imageButton"==jQuery("#lfb_winItem").find('[name="type"]').val())&&0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())&&(jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")?("block"!=jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").css("display")&&(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideDown(),""==lfb_itemPriceCalculationEditor.getValue().trim()&&lfb_itemPriceCalculationEditor.setValue("[price] = 1\n")),setTimeout(function(){lfb_itemPriceCalculationEditor.refresh()},300)):(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown(),0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())&&jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp()))}function lfb_changeVariableCalculation(){0!=jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val()?(jQuery("#lfb_winItem").find('[name="variableCalculation"]').closest(".form-group").find(".lfb_calculationItemLabel").html(jQuery("#lfb_winItem").find('[name="modifiedVariableID"] option:selected').text()+"="),jQuery("#lfb_winItem").find('[name="variableCalculation"]').closest(".form-group").slideDown(),""==lfb_itemVariableCalculationEditor.getValue().trim()&&lfb_itemVariableCalculationEditor.setValue("[variable] = 1\n"),setTimeout(function(){lfb_itemVariableCalculationEditor.refresh()},300)):jQuery("#lfb_winItem").find('[name="variableCalculation"]').closest(".form-group").slideUp()}function lfb_changeUseCalculationQt(){"picture"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"checkbox"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"slider"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"button"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"imageButton"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"numberfield"!=jQuery("#lfb_winItem").find('[name="type"]').val()||(jQuery("#lfb_winItem").find('[name="useCalculationQt"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="calculationQt"]').closest(".form-group").slideDown(),""==lfb_itemCalculationQtEditor.getValue().trim()&&lfb_itemCalculationQtEditor.setValue("[quantity] = 1\n"),setTimeout(function(){lfb_itemCalculationQtEditor.refresh()},300)):jQuery("#lfb_winItem").find('[name="calculationQt"]').closest(".form-group").slideUp())}function lfb_changeUseValueAsQt(){"numberfield"==jQuery("#lfb_winItem").find('[name="type"]').val()&&(jQuery("#lfb_winItem").find('[name="useValueAsQt"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="quantity_enabled"]').parent().bootstrapSwitch("setState",!0),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")&&jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').closest(".form-group").slideDown()):"slider"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="useCalculationQt"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').prop("checked",!1),jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').closest(".form-group").slideUp()),lfb_changeUseCalculation())}function lfb_changeItemCalendarID(){"datepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()&&0<jQuery("#lfb_winItem").find('[name="calendarID"]').val()?(jQuery("#lfb_winItem").find('[name="registerEvent"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="calendarID"]').animate({width:234},200),setTimeout(function(){jQuery("#lfb_winItem").find('[name="calendarID"]').closest(".form-group").find("a.btn-circle").fadeIn(200)},250)):(jQuery('#lfb_winItem [name="registerEvent"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="registerEvent"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calendarID"]').closest(".form-group").find("a.btn-circle").fadeOut(200),setTimeout(function(){jQuery("#lfb_winItem").find('[name="calendarID"]').animate({width:280},200)},250))}function lfb_changeItemAllowPastDate(){"datepicker"!=jQuery("#lfb_winItem").find('[name="type"]').val()||jQuery("#lfb_winItem").find('[name="date_allowPast"]').is(":checked")?jQuery("#lfb_winItem").find('[name="startDateDays"]').closest(".form-group").slideUp():jQuery("#lfb_winItem").find('[name="startDateDays"]').closest(".form-group").slideDown()}function changeItemDateType(){"datepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()&&"time"!=jQuery("#lfb_winItem").find('[name="dateType"]').val()?jQuery("#lfb_winItem").find('[name="calendarID"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="calendarID"]').val("0"),jQuery("#lfb_winItem").find('[name="calendarID"]').closest(".form-group").slideUp()),"datepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()&&"date"!=jQuery("#lfb_winItem").find('[name="dateType"]').val()?jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideDown():(jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp()),lfb_changeItemCalendarID()}function lfb_updateItemCalCategories(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getCalendarCategories",calendarID:jQuery("#lfb_winItem").find('[name="calendarID"]').val()},success:function(e){e=jQuery.parseJSON(e.trim()),jQuery('#lfb_winItem [name="eventCategory"]').html(""),jQuery.each(e,function(){jQuery('#lfb_winItem [name="eventCategory"]').append('<option value="'+this.id+'">'+this.title+"</option>")}),jQuery('#lfb_winItem [name="eventCategory"]').val();e=new Array;0<lfb_currentItemID&&(e=0<lfb_currentStepID?lfb_currentStep.items:lfb_currentForm.fields,jQuery.each(e,function(){this.id==lfb_currentItemID&&jQuery('#lfb_winItem [name="eventCategory"]').val(this.eventCategory)}))}})}function lfb_changeBusyDateEvent(){jQuery("#lfb_winItem").find('[name="eventBusy"]').is(":checked")&&!jQuery("#lfb_winItem").find('[name="useAsDateRange"]').is(":checked")&&jQuery("#lfb_winItem").find('[name="registerEvent"]').is(":checked")&&"days"!=jQuery("#lfb_winItem").find('[name="eventDurationType"]').val()?jQuery("#lfb_winItem").find('[name="maxEvents"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="maxEvents"]').closest(".form-group").slideUp()}function lfb_changeRegisterEvent(){jQuery("#lfb_winItem").find('[name="registerEvent"]').is(":checked")&&"datepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()?(lfb_updateItemCalCategories(),jQuery("#lfb_winItem").find('[name="eventCategory"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="eventBusy"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="eventBusy"]').is(":checked")?jQuery("#lfb_winItem").find('[name="maxEvents"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="maxEvents"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventTitle"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useAsDateRange"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="eventCategory"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventBusy"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxEvents"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventDuration"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventTitle"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useAsDateRange"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useAsDateRange"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="endDaterangeID"]').val(""),0<jQuery("#lfb_winItem").find('[name="endDaterangeID"] option').length&&jQuery("#lfb_winItem").find('[name="endDaterangeID"]').val(jQuery("#lfb_winItem").find('[name="endDaterangeID"] option').first().attr("value")),jQuery("#lfb_winItem").find('[name="endDaterangeID"]').closest(".form-group").slideUp()),lfb_changeUseAsDateRange()}function lfb_changeUseAsDateRange(){jQuery("#lfb_winItem").find('[name="registerEvent"]').is(":checked")?jQuery("#lfb_winItem").find('[name="useAsDateRange"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="endDaterangeID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="eventDuration"]').closest(".form-group").slideUp()):(jQuery("#lfb_winItem").find('[name="endDaterangeID"]').val(""),0<jQuery("#lfb_winItem").find('[name="endDaterangeID"] option').length&&jQuery("#lfb_winItem").find('[name="endDaterangeID"]').val(jQuery("#lfb_winItem").find('[name="endDaterangeID"] option').first().attr("value")),jQuery("#lfb_winItem").find('[name="endDaterangeID"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventDuration"]').closest(".form-group").slideDown()):jQuery("#lfb_winItem").find('[name="endDaterangeID"]').closest(".form-group").slideUp()}function lfb_changeItemIsRequired(){"select"==jQuery("#lfb_winItem").find('[name="type"]').val()&&jQuery('#lfb_winItem [name="isRequired"]').is(":checked")?jQuery("#lfb_winItem").find('[name="firstValueDisabled"]').closest(".form-group").slideDown():(jQuery('#lfb_winItem [name="firstValueDisabled"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="firstValueDisabled"]').closest(".form-group").slideUp())}function lfb_changeItemType(){1==lfb_settings.useVisualBuilder?jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").parent().hide():jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").parent().show(),"rate"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="numValue"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="numValue"]').closest(".form-group").slideUp(),"gmap"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="mapStyle"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="mapZoom"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="mapType"]').closest(".form-group").slideDown(),""!=jQuery("#lfb_winItem").find('[name="maxHeight"]').val()&&0!=jQuery("#lfb_winItem").find('[name="maxHeight"]').val()||jQuery("#lfb_winItem").find('[name="maxHeight"]').val(280),""==jQuery("#lfb_winItem").find('[name="mapZoom"]').val()&&jQuery("#lfb_winItem").find('[name="mapZoom"]').val(1),lfb_changeMapType()):(jQuery("#lfb_winItem").find('[name="mapStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="mapZoom"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="mapType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="address"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_btnItemDefineItinerary").closest(".form-group").slideUp()),"datepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="calendarID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="startDateDays"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="startDateDays"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calendarID"]').val(0),jQuery("#lfb_winItem").find('[name="calendarID"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="registerEvent"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_winItem [name="eventBusy"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="registerEvent"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxEvents"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventDuration"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventCategory"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventTitle"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eventBusy"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useAsDateRange"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="endDaterangeID"]').closest(".form-group").slideUp()),"picture"==jQuery("#lfb_winItem").find('[name="type"]').val()||"imageButton"==jQuery("#lfb_winItem").find('[name="type"]').val()||"qtfield"==jQuery("#lfb_winItem").find('[name="type"]').val()||"button"==jQuery("#lfb_winItem").find('[name="type"]').val()||"imageButton"==jQuery("#lfb_winItem").find('[name="type"]').val()?((jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').closest(".form-group").slideDown(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_itemPricesGrid").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),"picture"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem .lfb_picOnly").slideUp()),"button"==jQuery("#lfb_winItem").find('[name="type"]').val()||"imageButton"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_min"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="color"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="callNextStep"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideDown(),"imageButton"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem .lfb_picOnly:not(.lfb_imageField)").slideUp(),jQuery("#lfb_winItem .lfb_imageField").slideDown()):(jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem .lfb_picOnly").slideUp())):(jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="color"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="callNextStep"]').closest(".form-group").slideUp(),"picture"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery(".lfb_picOnly").slideDown(),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_min"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideDown()),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp()),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").hide(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").show()):(jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),"0"==jQuery("#lfb_winItem").find('[name="wooProductID"]').val()&&0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())&&jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown()),0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())?(jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideDown()):jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideDown(),"qtfield"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isSelected"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="imageTint"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').prop("checked",!0),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="image"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp()):(jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').closest(".form-group").show(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")?jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideUp():jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideDown(),lfb_changeReducEnabled()),jQuery("#lfb_winItem").find('[name="isCountryList"]').closest(".form-group").slideUp()):("rate"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="color"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="color"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="callNextStep"]').closest(".form-group").slideUp(),"select"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="isCountryList"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="isCountryList"]').closest(".form-group").slideUp(),("layeredImage"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery(".lfb_picOnly:not(.lfb_imageField)"):jQuery(".lfb_picOnly")).slideUp(),jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_min"]').closest(".form-group").slideUp(),"slider"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"numberfield"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&(jQuery('#lfb_winItem [name="quantity_enabled"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_itemPricesGrid").slideUp(),jQuery('#lfb_winItem [name="reduc_enabled"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp()),"textfield"==jQuery("#lfb_winItem").find('[name="type"]').val()||"select"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),"textfield"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find(".lfb_textOnly").slideDown():jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),"textfield"==jQuery("#lfb_winItem").find('[name="type"]').val()||"numberfield"==jQuery("#lfb_winItem").find('[name="type"]').val()||"datepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()||"textarea"==jQuery("#lfb_winItem").find('[name="type"]').val()||"timepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()?((jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),"numberfield"==jQuery("#lfb_winItem").find('[name="type"]').val()&&jQuery("#lfb_winItem").find('[name="useValueAsQt"]').is(":checked")||(jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1)),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),"textarea"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&(jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideDown()),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),"numberfield"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').is(":checked")||(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp())):(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideUp()),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideDown(),"textfield"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationCaracts"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationMin"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationMax"]').closest(".form-group").slideUp()),"textarea"==jQuery("#lfb_winItem").find('[name="type"]').val()&&(jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp()),"timepicker"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp()),"datepicker"!=jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),"timepicker"!=jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideDown():jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp()):(jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideDown(),""!=jQuery("#lfb_winItem").find('[name="calendarID"]').val()&&0<jQuery("#lfb_winItem").find('[name="calendarID"]').val()?jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideDown():jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideDown()),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('input[name="showPrice"]').val(0),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp()):"slider"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_imageLayersTableContainer").slideUp(),(jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().show(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")?jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideUp():jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').parent().bootstrapSwitch("setState",!0),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="useDistanceAsQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").hide(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").show()):("0"==jQuery("#lfb_winItem").find('[name="wooProductID"]').val()&&0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())&&jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp()),0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())?(jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideDown()):jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('input[name="showPrice"]').val(0),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp()),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp()):"select"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),(jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="disableDropdowns"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp()),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('input[name="showPrice"]').val(0),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideDown(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().show(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")?jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideUp():jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideDown(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp()),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp()):"filefield"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),(jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp()):"gmap"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="picture"]').parent().hide(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').val(""),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideUp()):"richtext"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').val(""),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideDown(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown()):"shortcode"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').val(""),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp()):"separator"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').val(""),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').val("row"),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp()):"rate"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="color"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').val(""),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').val("row"),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp()):"colorpicker"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideUp(),(jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp()):"layeredImage"==jQuery("#lfb_winItem").find('[name="type"]').val()?(jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideUp(),jQuery("#lfb_imageLayersTableContainer").slideDown(),jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="image"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="price"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').val(0).closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery('#lfb_winItem [name="showPrice"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().hide(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="eddProductID"]').parent().slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTarget"]').val(""),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').val("1"),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideUp(),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find(".lfb_textOnly").slideUp(),jQuery("#lfb_winItem").find('[name="fieldType"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hideQtSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="hidePriceSummary"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideDown()):(jQuery("#lfb_imageLayersTableContainer").slideUp(),(jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))&&jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="visibleTooltip"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="checkboxStyle"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="buttonText"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="tooltipText"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="tooltipImage"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="useCalculationQt"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="dateType"]').closest(".form-group").slideUp(),jQuery('#lfb_winItem [name="disableMinutes"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="disableMinutes"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find("#lfb_calEventRemindersTableItem").closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useValueAsQt"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxWidth"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxHeight"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="icon"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="iconPosition"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxTime"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="shortcode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validation"]').val(""),jQuery("#lfb_winItem").find('[name="validation"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="placeholder"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winItem").find('[name="isHidden"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find(".lfb_onlyDatefield").slideUp(),jQuery("#lfb_winItem").find('[name="useCalculation"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").hide(),jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").show()):(jQuery("#lfb_winItem").find('[name="calculation"]').closest(".form-group").slideUp(),0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())&&jQuery("#lfb_winItem").find('[name="price"]').closest(".form-group").slideDown()),0==parseInt(jQuery("#lfb_winItem").find('[name="eddProductID"]').val())?(jQuery("#lfb_winItem").find('[name="useCalculation"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="operation"]').parent().slideDown()):jQuery("#lfb_winItem").find('[name="dontAddToTotal"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="modifiedVariableID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="showPrice"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="wooProductID"]').parent().show(),jQuery("#lfb_winItem").find('[name="useCurrentWooProduct"]').closest(".form-group").slideDown(),jQuery('#lfb_formFields [name="save_to_cart"]').is(":checked")?jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideUp():jQuery("#lfb_winItem").find('[name="eddProductID"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="groupitems"]').parent().slideDown(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="defaultValue"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="minSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="fileSize"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="showInSummary"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="hideInSummaryIfNull"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find("#lfb_itemOptionsValuesPanel").slideUp(),jQuery("#lfb_winItem").find('[name="ischecked"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="useRow"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="quantity_max"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="description"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="urlTarget"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="urlTargetMode"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="maxFiles"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="allowedFiles"]').closest(".form-group").slideUp(),jQuery('#lfb_formFields [name="isSubscription"]').is(":checked")?jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="priceMode"]').val(""),jQuery("#lfb_winItem").find('[name="priceMode"]').closest(".form-group").slideUp()),jQuery('#lfb_formFields [name="use_paypal"]').is(":checked")||jQuery('#lfb_formFields [name="use_stripe"]').is(":checked")?(jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="usePaypalIfChecked"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="dontUsePaypalIfChecked"]').closest(".form-group").slideUp()),jQuery("#lfb_itemRichTextContainer").slideUp(),jQuery("#lfb_winItem").find('[name="isRequired"]').closest(".form-group").slideDown())),jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked")||jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').closest(".form-group").slideUp(),lfb_changeUseValueAsQt(),lfb_changeItemIsRequired(),lfb_changeValidation(),lfb_changeUseCalculation(),lfb_changeSendAsVariable(),setTimeout(lfb_changeUseCalculation,100)}function lfb_changeSendAsVariable(){jQuery("#lfb_winItem").find('[name="sendAsUrlVariable"]').is(":checked")&&"shortcode"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"separator"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"richtext"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&"row"!=jQuery("#lfb_winItem").find('[name="type"]').val()&&(jQuery("#lfb_formFields").find('[name="sendUrlVariables"]').is(":checked")||jQuery("#lfb_formFields").find('[name="enableZapier"]').is(":checked"))?(jQuery("#lfb_winItem").find('[name="variableName"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="sentAttribute"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="variableName"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="sentAttribute"]').closest(".form-group").slideUp())}function lfb_changeValidation(){"custom"==jQuery("#lfb_winItem").find('[name="validation"]').val()?(jQuery("#lfb_winItem").find('[name="validationMin"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="validationMax"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="validationCaracts"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="mask"]').closest(".form-group").slideUp()):"mask"==jQuery("#lfb_winItem").find('[name="validation"]').val()?(jQuery("#lfb_winItem").find('[name="validationMin"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationMax"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationCaracts"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="mask"]').closest(".form-group").slideDown()):(jQuery("#lfb_winItem").find('[name="validationMin"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationMax"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="validationCaracts"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="mask"]').closest(".form-group").slideUp())}function lfb_changeQuantityEnabled(){jQuery("#lfb_winItem").find('[name="quantity_enabled"]').is(":checked")?(jQuery("#efp_itemQuantity").slideDown(),"picture"==jQuery("#lfb_winItem").find('[name="type"]').val()&&2==jQuery('#lfb_formFields [name="qtType"]').val()||"slider"==jQuery("#lfb_winItem").find('[name="type"]').val()?jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideDown():(jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').val(1))):(jQuery("#lfb_winItem").find('[name="reduc_enabled"]').prop("checked",!1),jQuery("#efp_itemQuantity").slideUp(),jQuery("#lfb_winItem").find('[name="useDistanceAsQt"]').closest(".form-group").slideDown(),jQuery("#lfb_winItem").find('[name="sliderStep"]').closest(".form-group").slideUp(),jQuery("#lfb_winItem").find('[name="sliderStep"]').val(1))}function lfb_changeReducEnabled(){jQuery("#lfb_winItem").find('[name="reduc_enabled"]').is(":checked")?jQuery("#lfb_itemPricesGrid").slideDown(250):jQuery("#lfb_itemPricesGrid").slideUp(250)}function lfb_changeQuantity(){jQuery("#lfb_winItem").find('input[name="quantityUpdated"]').val()<1&&jQuery("#lfb_winItem").find('input[name="quantityUpdated"]').val("3")}function lfb_getReducs(){var l=new Array;return jQuery("#lfb_itemPricesGrid tbody tr").not(".static").each(function(){var e=jQuery(this).find("td:eq(0)").html(),t=jQuery(this).find("td:eq(1)").html();l.push(new Array(e,t))}),l.sort(function(e,t){return e[0]-t[0]}),l}function lfb_getOptions(){var e=new Array;return jQuery("#lfb_itemOptionsValues tbody tr").not(".static").each(function(){0<jQuery(this).find("td:eq(0) input").length?e.push(jQuery(this).find("td:eq(0) input").val()+";;"+jQuery(this).find("td:eq(1) input").val()):e.push(jQuery(this).find("td:eq(0)").html()+";;"+jQuery(this).find("td:eq(1)").html())}),e}function lfb_add_option(){var e=jQuery("#lfb_itemOptionsValues #option_new_value").val(),t=parseFloat(jQuery("#lfb_itemOptionsValues #option_new_price").val());isNaN(t)&&(t=0),""!=e&&((t=$("<tr><td>"+e+"</td><td>"+t+'</td><td><a href="javascript:" data-action="lfb_edit_option" class="btn btn-default  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="lfb_del_option" class="btn btn-danger btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>')).find('a[data-action="lfb_edit_option"]').on("click",function(){lfb_edit_option(this)}),t.find('a[data-action="lfb_del_option"]').on("click",function(){lfb_del_option(this)}),jQuery("#lfb_itemOptionsValues #option_new_value").closest("tr").before(t),jQuery("#lfb_itemOptionsValues #option_new_value").val("")),jQuery("#lfb_itemOptionsValues #option_new_price").val(""),jQuery("#lfb_itemOptionsValues tbody").sortable({helper:function(e,t){var l=t.children(),t=t.clone();return t.children().each(function(e){jQuery(this).width(l.eq(e).width())}),t}})}function lfb_del_option(e){jQuery(e).parent().parent().remove()}function lfb_add_reduc(){var e,t=parseInt(jQuery("#reduc_new_qt").val()),l=parseFloat(jQuery("#reduc_new_price").val());!isNaN(t)&&0<t&&!isNaN(l)&&((e=lfb_getReducs()).push(new Array(t,l)),e.sort(function(e,t){return t[0]-e[0]}),jQuery("#lfb_itemPricesGrid tbody tr").not(".static").remove(),jQuery.each(e,function(){var e=$("<tr><td>"+this[0]+"</td><td>"+parseFloat(this[1]).toFixed(2)+'</td><td><a href="javascript:" data-action="lfb_del_reduc" class="btn btn-danger btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>');e.find('a[data-action="lfb_del_reduc"]').on("click",function(){lfb_del_reduc(this)}),jQuery("#lfb_itemPricesGrid tbody").prepend(e)}),jQuery("#reduc_new_qt").val(""),jQuery("#reduc_new_price").val(""))}function lfb_del_reduc(e){jQuery(e).parent().parent().remove()}function lfb_saveItem(){var reducs="",optionsValues="",wooVariation=0,eddVariation=0,error=!1;jQuery("body,html").animate({scrollTop:0},200),jQuery("#lfb_winItem").find(".has-error").removeClass("has-error"),jQuery("#lfb_winItem").find('[name="calculation"]').val(jQuery("#lfb_winItem").find('[name="calculation"]').val().replace(/"/g,"'")),jQuery("#lfb_winItem").find('[name="calculationQt"]').val(jQuery("#lfb_winItem").find('[name="calculationQt"]').val().replace(/"/g,"'")),jQuery("#lfb_winItem").find('input[name="title"]').val().length<1&&(error=!0,jQuery("#lfb_winItem").find('input[name="title"]').parent().addClass("has-error")),("picture"==jQuery("#lfb_winItem").find('select[name="type"]').val()&&""==jQuery("#lfb_winItem").find('[name="imageType"]').val()||"imageButton"==jQuery("#lfb_winItem").find('select[name="type"]').val())&&jQuery("#lfb_winItem").find('input[name="image"]').val().length<4&&(error=!0,jQuery("#lfb_winItem").find('input[name="image"]').parent().addClass("has-error")),"picture"==jQuery("#lfb_winItem").find('select[name="type"]').val()&&"fontIcon"==jQuery("#lfb_winItem").find('[name="imageType"]').val()&&""==jQuery("#lfb_winItem").find('[name="icon"]').val()&&(error=!0,jQuery("#lfb_winItem").find('[name="icon"]').parent().addClass("has-error")),"layeredImage"==jQuery("#lfb_winItem").find('select[name="type"]').val()&&jQuery("#lfb_winItem").find('input[name="image"]').val().length<4&&(error=!0,jQuery("#lfb_winItem").find('input[name="image"]').parent().addClass("has-error")),"1"==jQuery("#lfb_winItem").find('[name="quantity_enabled"]').val()&&""==jQuery("#lfb_winItem").find('input[name="quantity_max"]').val()&&(error=!0,jQuery("#lfb_winItem").find('input[name="quantity_max"]').parent().addClass("has-error")),"shortcode"==jQuery("#lfb_winItem").find('select[name="type"]').val()&&jQuery("#lfb_winItem").find('input[name="shortcode"]').val().length<1&&(error=!0,jQuery("#lfb_winItem").find('input[name="shortcode"]').parent().addClass("has-error"));var optionStab=lfb_getOptions(),reducsTab;jQuery.each(optionStab,function(){optionsValues+=this+"|"}),jQuery("#lfb_winItem").find('[name="reduc_enabled"]').is(":checked")&&(reducsTab=lfb_getReducs(),jQuery.each(reducsTab,function(){reducs+=this[0]+"|"+parseFloat(this[1]).toFixed(2)+"*"}),reducs=reducs.substr(0,reducs.length-1)),jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("woovariation")&&jQuery("#lfb_winItem").find('[name="wooProductID"] option:selected').data("woovariation"),jQuery("#lfb_winItem").find('[name="eddProductID"] option:selected').data("eddvariation")&&0<jQuery("#lfb_winItem").find('[name="eddProductID"] option:selected').data("eddvariation")&&(eddVariation=jQuery("#lfb_winItem").find('[name="eddProductID"] option:selected').data("eddvariation"));var itemData={};if(itemData.layers=new Array,"layeredImage"==jQuery("#lfb_winItem").find('select[name="type"]').val()&&jQuery("#lfb_imageLayersTable tr[data-layerid]").each(function(){itemData.layers.push({id:jQuery(this).attr("data-layerid"),title:jQuery(this).find("td").first().find("a").text(),image:jQuery(this).find('input[name="image"]').val(),showConditions:jQuery(this).find('textarea[name="showConditions"]').val(),showConditionsOperator:jQuery(this).find('input[name="showConditionsOperator"]').val()})}),jQuery("#lfb_winItem").find("input[name],select[name],textarea[name]").each(function(){var value;0==jQuery(this).closest("#lfb_itemPricesGrid").length&&0==jQuery(this).closest("#lfb_itemOptionsValues").length&&0==jQuery(this).closest("#lfb_calculationValueBubble").length&&0==jQuery(this).closest("#lfb_imageLayersTable").length&&(jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("itemData."+jQuery(this).attr("name")+" = value;")):eval("itemData."+jQuery(this).attr("name")+" = jQuery(this).val();"))}),itemData.action="lfb_saveItem",itemData.formID=lfb_currentFormID,itemData.defaultStepID=lfb_currentStepID,itemData.id=lfb_currentItemID,itemData.eddVariation=eddVariation,itemData.reducsQt=reducs,itemData.optionsValues=optionsValues,itemData.calculation=lfb_itemPriceCalculationEditor.getValue(),itemData.calculation=itemData.calculation.replace(/"/g,"'"),itemData.calculationQt=lfb_itemCalculationQtEditor.getValue(),itemData.calculationQt=itemData.calculationQt.replace(/"/g,"'"),itemData.variableCalculation=lfb_itemVariableCalculationEditor.getValue(),itemData.variableCalculation=itemData.variableCalculation.replace(/"/g,"'"),jQuery("#lfb_itemRichText").next(".note-editor").find('.note-toolbar .note-view [data-name="codeview"]').is(".active")&&jQuery("#lfb_itemRichText").next(".note-editor").find('.note-toolbar .note-view [data-name="codeview"]').trigger("click"),itemData.richtext=jQuery("#lfb_itemRichText").code(),error)jQuery("body,html").animate({scrollTop:0},200);else{if(0<itemData.id){var itemIndex=-1;if(0<lfb_currentStepID){for(var i=0;i<lfb_currentStep.items.length;i++)if(lfb_currentStep.items[i].id==itemData.id){itemIndex=i;break}0<=itemIndex&&(lfb_currentStep.items[i]=itemData)}else{for(var i=0;i<lfb_currentForm.fields.length;i++)if(lfb_currentForm.fields[i].id==itemData.id){itemIndex=i;break}0<=itemIndex&&(lfb_currentForm.fields[i]=itemData)}}if(1==lfb_settings.useVisualBuilder){if(lfb_showLoader(),0<lfb_currentStepID){for(var itemIndex=-1,i=0;i<lfb_currentStep.items.length;i++)if(lfb_currentStep.items[i].id==itemData.id){itemIndex=i;break}-1<itemIndex&&(lfb_currentStep.items[itemIndex]=itemData);var itemsList=lfb_currentStep.items}else{for(var itemIndex=-1,i=0;i<lfb_currentForm.fields.length;i++)if(lfb_currentForm.fields[i].id==itemData.id){itemIndex=i;break}-1<itemIndex&&(lfb_currentForm.fields[itemIndex]=itemData)}jQuery.ajax({url:ajaxurl,type:"post",data:itemData,success:function(e){lfb_currentStepID!=itemData.stepID&&jQuery("#lfb_stepFrame").attr("src","about:blank"),lfb_editVisualStep(lfb_currentStepID),jQuery("#lfb_winItem").fadeOut(),$("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_refreshItemDom",[itemData.id]),jQuery("html,body").css("overflow-y","hidden")}})}else lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:itemData,success:function(e){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_currentForm=e,lfb_loadFields(),lfb_params=e.params,lfb_steps=e.steps,lfb_links=new Array,jQuery.each(e.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t}),lfb_updateStepCanvas(),0==lfb_currentStepID?(jQuery("#lfb_winItem").hide(),jQuery("#lfb_panelPreview").show(),jQuery("#lfb_loader").fadeOut()):lfb_openWinStep(lfb_currentStepID)}})}})}}function lfb_checkLicense(){var t=jQuery('#lfb_winActivation input[name="purchaseCode"]');t.val().length<9?t.parent().addClass("has-error"):(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_checkLicense",code:t.val()},success:function(e){jQuery("#lfb_loader").fadeOut(),"1"==e?t.parent().addClass("has-error"):(lfb_lock=!1,lfb_data.lscV=1,jQuery("#lfb_winActivation").fadeOut(260),jQuery("#lfb_winActivation").fadeOut(),jQuery("#lfb_winTldAddon").find('input[name="purchaseCode"]').val(t.val()))}}))}function lfb_duplicateForm(e){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateForm",formID:e},success:function(e){document.location.reload()}})}function lfb_duplicateItem(a){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateItem",itemID:a},success:function(e){var t=e.trim(),l=new Array,l=0<lfb_currentStepID?lfb_currentStep.items:lfb_currentForm.fields,e=lfb_getItemByID(a),e=JSON.parse(JSON.stringify(e));e.id=t,e.title+=" (1)",l.push(e),1==lfb_settings.useVisualBuilder?($("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_refreshItemDom",[0]),"row"==e.type&&lfb_loadForm(lfb_currentFormID)):lfb_openWinStep(lfb_currentStepID),lfb_reloadLayers()}})}function lfb_duplicateItemLastStep(e){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_duplicateItem",itemID:e},success:function(e){lfb_loadFields(),lfb_reloadLayers()}})}function lfb_reloadLayers(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadLayers",formID:lfb_currentFormID},success:function(e){e=jQuery.parseJSON(e),lfb_currentForm.layers=e}})}function lfb_startPreview(){}function lfb_openWinStep(stepID){lfb_currentStepID=stepID,0==lfb_currentStepID?jQuery("#lfb_itemsList").hide():jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadStep",stepID:stepID},success:function(rep){var step;rep=jQuery.parseJSON(rep),lfb_currentStepID==rep.step.id&&(step=rep.step,lfb_currentStep=rep,jQuery("#lfb_winItem").hide(),jQuery("#lfb_stepTabGeneral").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(step."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}"),eval("if(step."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(step."+jQuery(this).attr("name")+");")}),jQuery("#lfb_itemsTable tbody").html(""),jQuery.each(rep.items,function(){var e,t,l=this;"row"!=l.type&&(e=jQuery('<tr data-itemid="'+l.id+'"></tr>'),t=jQuery("#lfb_winItem").find('[name="type"] option[value="'+l.type+'"]').text(),e.append('<td><a href="javascript:"  data-action="lfb_editItem">'+l.title+"</a></td>"),e.append("<td>"+t+"</td>"),e.append("<td>"+l.groupitems+"</td>"),e.append('<td class="lfb_actionTh"><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'" data-action="lfb_editItem" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.duplicate+'" data-action="lfb_duplicateItem" class="btn btn-default btn-circle"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.remove+'" data-action="lfb_removeItem" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>'),e.find('[data-toggle="tooltip"]').b_tooltip(),e.find('a[data-action="lfb_editItem"]').on("click",function(){lfb_editItem($(this).closest("tr").attr("data-itemid"))}),e.find('a[data-action="lfb_duplicateItem"]').on("click",function(){lfb_duplicateItem($(this).closest("tr").attr("data-itemid"))}),e.find('a[data-action="lfb_removeItem"]').on("click",function(){lfb_askDeleteItem($(this).closest("tr").attr("data-itemid"))}),jQuery("#lfb_itemsTable tbody").append(e))}),jQuery("#lfb_itemsTable tbody").sortable({helper:function(e,t){var l=t.children(),t=t.clone();return t.children().each(function(e){jQuery(this).width(l.eq(e).width())}),t},delay:400,scroll:!0,scrollSensitivity:80,scrollSpeed:3,stop:function(e,t){var l="";jQuery("#lfb_itemsTable tbody tr[data-itemid]").each(function(e){l+=jQuery(this).attr("data-itemid")+","}),0<l.length&&(l=l.substr(0,l.length-1)),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeItemsOrders",items:l}})}}),jQuery("#lfb_panelPreview").hide(),jQuery("#lfb_itemsList").show(),jQuery("#lfb_btns").html(""),jQuery("#lfb_winStep").show(),jQuery("#lfb_stepsContainer").hide(),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_winStep").find('[name="useShowConditions"]').on("change",lfb_changeUseShowStepConditions),lfb_changeUseShowStepConditions(),jQuery("#wpwrap").css({height:jQuery("#lfb_winStep").height()+48}),jQuery("#lfb_winStep").find('input[type="checkbox"]').each(function(){jQuery(this).is('[data-switch="switch"]')&&0<jQuery(this).closest(".form-group").find("small").length&&jQuery(this).closest(".has-switch").b_tooltip({title:jQuery(this).closest(".form-group").find("small").html()})}))}})}function lfb_changeUseShowStepConditions(){jQuery("#lfb_winStep").find('[name="useShowConditions"]').is(":checked")?jQuery("#lfb_winStep #showConditionsStepBtn").slideDown():jQuery("#lfb_winStep #showConditionsStepBtn").slideUp(),jQuery("#lfb_winStepSettings").find('[name="useShowConditions"]').is(":checked")?jQuery("#lfb_winStepSettings #showConditionsStepBtn").slideDown():jQuery("#lfb_winStepSettings #showConditionsStepBtn").slideUp()}function lfb_saveStepSettings(){jQuery("body,html").animate({scrollTop:0},200);var stepData={};jQuery("#lfb_winStepSettings").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("stepData."+jQuery(this).attr("name")+" = value;")):eval("stepData."+jQuery(this).attr("name")+" = jQuery(this).val();")}),jQuery("#lfb_stepFrame").contents().find('.lfb_genSlide[data-stepid="'+lfb_currentStepID+'"] .lfb_stepTitle').html(stepData.title),jQuery("#lfb_stepFrame").contents().find('.lfb_genSlide[data-stepid="'+lfb_currentStepID+'"] .lfb_stepDescription').html(stepData.description),jQuery('.lfb_stepBloc[data-stepid="'+lfb_currentStepID+'"] h4').html(stepData.title),stepData.maxWidth=0,0<jQuery("#lfb_stepMaxWidth").slider("value")&&(stepData.maxWidth=lfb_stepPossibleWidths[jQuery("#lfb_stepMaxWidth").slider("value")]),stepData.action="lfb_saveStep",stepData.formID=lfb_currentFormID,stepData.id=lfb_currentStepID,jQuery('.lfb_stepBloc[data-stepid="'+lfb_currentStepID+'"] h4').html(stepData.title),jQuery("#lfb_winEditStepVisual #lfb_stepTitle").val(stepData.title),lfb_updateStepsDesign(),jQuery("#lfb_winStepSettings").fadeOut(260),jQuery("#lfb_winEditStepVisual #lfb_stepTitle").val(stepData.title),jQuery.ajax({url:ajaxurl,type:"post",data:stepData,success:function(e){}})}function lfb_saveStep(){lfb_showLoader(),jQuery("body,html").animate({scrollTop:0},200);var stepData={};jQuery("#lfb_stepTabGeneral").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("stepData."+jQuery(this).attr("name")+" = value;")):eval("stepData."+jQuery(this).attr("name")+" = jQuery(this).val();")}),stepData.action="lfb_saveStep",stepData.formID=lfb_currentFormID,stepData.id=lfb_currentStepID,jQuery('.lfb_stepBloc[data-stepid="'+lfb_currentStepID+'"] h4').html(stepData.title),lfb_updateStepsDesign(),jQuery.ajax({url:ajaxurl,type:"post",data:stepData,success:function(e){lfb_openWinStep(e)}})}function lfb_closeItemWin(){}function lfb_closeWin(e){e.is("#lfb_winDistance")?(jQuery("#lfb_winItem").show(),e.fadeOut()):(jQuery("#lfb_stepsContainer").show(),e.fadeOut(),setTimeout(function(){lfb_updateStepsDesign(),lfb_disableLinksAnim&&(clearInterval(lfb_canvasTimer),lfb_updateStepCanvas())},250))}function lfb_startLink(e){lfb_isLinking=!0,lfb_linkCurrentIndex=lfb_links.length,lfb_links.push({originID:e,destinationID:null})}function lfb_stopLink(e){var t=!1;jQuery.each(lfb_links,function(){this.originID==lfb_links[lfb_linkCurrentIndex].originID&&this.destinationID==e.attr("id")&&(t=this)}),lfb_isLinking=!1,lfb_links[lfb_linkCurrentIndex].originID!=e.attr("id")?t||(lfb_links[lfb_linkCurrentIndex].destinationID=e.attr("id"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_newLink",formID:lfb_currentFormID,originStepID:jQuery("#"+lfb_links[lfb_linkCurrentIndex].originID).attr("data-stepid"),destinationStepID:jQuery("#"+lfb_links[lfb_linkCurrentIndex].destinationID).attr("data-stepid")},success:function(e){lfb_lastCreatedLinkID=e,lfb_links[lfb_linkCurrentIndex].id=e,jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_params=(lfb_currentForm=e).params,lfb_steps=e.steps,jQuery.each(e.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t}),lfb_disableLinksAnim&&lfb_updateStepCanvas(),lfb_repositionLinks(),setTimeout(lfb_repositionLinks,60)}})}})):jQuery.grep(lfb_links,function(e){return e!=t})}function lfb_itemsCheckRows(e){var t=jQuery(e).parent().children(".clearfix");t.detach(),jQuery(e).parent().append(t)}function lfb_getUniqueTime(){for(var e=(new Date).getTime();e==(new Date).getTime(););return(new Date).getTime()}function lfb_changeInteractionBubble(e){jQuery("#lfb_interactionBubble").data("type",e),jQuery("#lfb_interactionBubble #lfb_interactionContent > div").slideUp(),""!=e&&jQuery('#lfb_interactionBubble #lfb_interactionContent > [data-type="'+e+'"]').slideDown(),"select"==e&&(0!=jQuery('#lfb_interactionContent > [data-type="'+e+'"]').find(".form-group:not(.default)").length&&""!=jQuery('#lfb_interactionContent > [data-type="'+e+'"]').find(".form-group:not(.default):last-child").find("input").val()||lfb_interactionAddSelect(e))}function lfb_interactionAddSelect(e){var t=jQuery('#lfb_interactionContent > [data-type="'+e+'"]').find(".form-group").length,t=jQuery('<div class="form-group"><label>'+lfb_data.txt_option+'</label><input type="text" placeholder="'+lfb_data.txt_option+'" class="form-control" name="s_'+t+'_value"></div>');return t.find("input").on("keyup",function(){""==jQuery(this).val()?0<jQuery(this).closest(".form-group:not(.default)").index()&&jQuery(this).closest(".form-group:not(.default)").remove():0==jQuery(this).closest(".form-group:not(.default)").next(".form-group:not(.default)").length&&lfb_interactionAddSelect(e)}),jQuery('#lfb_interactionContent > [data-type="'+e+'"]').append(t),t}function lfb_openWinLink(e){lfb_currentLinkIndex=e.attr("data-linkindex"),jQuery("#lfb_winLink").attr("data-linkindex",e.attr("data-linkindex")),jQuery(".lfb_conditionItem").remove();var t=lfb_getStepByID(jQuery("#"+lfb_links[e.attr("data-linkindex")].originID).attr("data-stepid")),e=lfb_getStepByID(jQuery("#"+lfb_links[e.attr("data-linkindex")].destinationID).attr("data-stepid"));jQuery("#lfb_linkInteractions").show(),jQuery("#lfb_linkOriginTitle").html(t.title),jQuery("#lfb_linkDestinationTitle").html(e.title),jQuery.each(lfb_links[lfb_currentLinkIndex].conditions,function(){lfb_addLinkInteraction(this)}),jQuery("#lfb_linkOperator").val(lfb_links[lfb_currentLinkIndex].operator),jQuery("#lfb_winLink").fadeIn(250),setTimeout(lfb_updateStepsDesign,255),setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300)}function lfb_addShowLayerInteraction(e){var t=jQuery('<tr class="lfb_conditionItem"></tr>'),i=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var l=this;jQuery.each(l.items,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e=l.id+"_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})});var l=lfb_data.texts.lastStep;jQuery.each(lfb_currentForm.fields,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e="0_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l+' : " '+t.title+' "</option>'))}),jQuery.each(lfb_currentForm.variables,function(){i.append('<option value="v_'+this.id+'" data-type="variable">'+lfb_data.texts.Variable+' : " '+this.title+' "</option>')}),i.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),i.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var a,n,r,o=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');i.on("change",function(){var e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),l=!1;0<e?jQuery.each(lfb_steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(l=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(l=this)});var a,n=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");n.find("option").remove(),a=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):lfb_conditionGetOperators(l,i),jQuery.each(a,function(){n.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),lfb_linksUpdateFields(o),setTimeout(function(){lfb_linksUpdateFields(o)},300)}),e&&void 0!==e.interaction&&i.val(e.interaction),i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?s=lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):i.val()&&(a=i.val().substr(0,i.val().indexOf("_")),n=i.val().substr(i.val().indexOf("_")+1,i.val().length),r=!1,0<a?jQuery.each(lfb_steps,function(){this.id==a&&jQuery.each(this.items,function(){this.id==n&&(r=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==n&&(r=this)}),s=lfb_conditionGetOperators(r,i)),jQuery.each(s,function(){o.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change",function(){lfb_linksUpdateFields(jQuery(this))}),setTimeout(function(){i.on("change")},250);var s=jQuery("<td></td>");s.append(i),t.append(s);s=jQuery("<td></td>");s.append(o),t.append(s),t.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" ><span class="glyphicon glyphicon-remove"></span></a> </td>'),t.find('a[data-action="lfb_conditionRemove"]').on("click",function(){lfb_conditionRemove(this)}),e&&void 0!==e.action&&(o.val(e.action),o.on("change"),e.value&&lfb_linksUpdateFields(o,e),setTimeout(function(){o.val(e.action),o.on("change"),e.value&&(o.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value),setTimeout(function(){o.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value)},200),lfb_linksUpdateFields(o,e))},300)),jQuery("#lfb_showLayerConditionsTable tbody").append(t)}function lfb_addShowStepInteraction(e){var t=jQuery('<tr class="lfb_conditionItem"></tr>'),i=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var l=this;jQuery.each(l.items,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e=l.id+"_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})}),jQuery.each(lfb_currentForm.variables,function(){i.append('<option value="v_'+this.id+'" data-type="variable">'+lfb_data.texts.Variable+' : " '+this.title+' "</option>')}),i.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),i.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var l,a,n,r=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');i.on("change",function(){var e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),l=!1;jQuery.each(lfb_steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(l=this)})});var a,n=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");n.find("option").remove(),a=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):lfb_conditionGetOperators(l,i),jQuery.each(a,function(){n.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),r.on("change"),setTimeout(function(){r.on("change")},300)}),e&&void 0!==e.interaction&&i.val(e.interaction),o=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):(l=i.val().substr(0,i.val().indexOf("_")),a=i.val().substr(i.val().indexOf("_")+1,i.val().length),n=!1,jQuery.each(lfb_steps,function(){this.id==l&&jQuery.each(this.items,function(){this.id==a&&(n=this)})}),lfb_conditionGetOperators(n,i)),jQuery.each(o,function(){r.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),r.on("change",function(){lfb_linksUpdateFields(jQuery(this))}),setTimeout(function(){i.on("change")},250);var o=jQuery("<td></td>");o.append(i),t.append(o);o=jQuery("<td></td>");o.append(r),t.append(o),t.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" data-action="lfb_conditionRemove"><span class="glyphicon glyphicon-remove"></span></a> </td>'),t.find('a[data-action="lfb_conditionRemove"]').on("click",function(){lfb_conditionRemove(this)}),e&&void 0!==e.action&&(r.val(e.action),r.on("change"),e.value&&lfb_linksUpdateFields(r,e),setTimeout(function(){r.val(e.action),r.on("change"),e.value&&(r.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value),setTimeout(function(){r.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value)},200),lfb_linksUpdateFields(r,e))},300)),jQuery("#lfb_showStepConditionsTable tbody").append(t)}function lfb_addRedirInteraction(e){var t=jQuery('<tr class="lfb_conditionItem"></tr>'),i=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var l=this;jQuery.each(l.items,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e=l.id+"_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})});var l=lfb_data.texts.lastStep;jQuery.each(lfb_currentForm.fields,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e="0_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l+' : " '+t.title+' "</option>'))}),jQuery.each(lfb_currentForm.variables,function(){i.append('<option value="v_'+this.id+'" data-type="variable">'+lfb_data.texts.Variable+' : " '+this.title+' "</option>')}),i.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),i.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var a,n,r,o=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');i.on("change",function(){var e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),l=!1;0<e?jQuery.each(lfb_steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(l=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(l=this)});var a,n=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");n.find("option").remove(),a=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):lfb_conditionGetOperators(l,i),jQuery.each(a,function(){n.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change")}),e&&void 0!==e.interaction&&i.val(e.interaction),s=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):(a=i.val().substr(0,i.val().indexOf("_")),n=i.val().substr(i.val().indexOf("_")+1,i.val().length),r=!1,0<a?jQuery.each(lfb_steps,function(){this.id==a&&jQuery.each(this.items,function(){this.id==n&&(r=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==n&&(r=this)}),lfb_conditionGetOperators(r,i)),jQuery.each(s,function(){o.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change",function(){lfb_linksUpdateFields(jQuery(this))}),setTimeout(function(){i.on("change")},250);var s=jQuery("<td></td>");s.append(i),t.append(s);s=jQuery("<td></td>");s.append(o),t.append(s),t.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn"><span class="glyphicon glyphicon-remove"></span></a> </td>'),t.find('a[data-action="lfb_conditionRemove"]').on("click",function(){lfb_conditionRemove(this)}),e&&void 0!==e.action&&(o.val(e.action),o.on("change"),e.value&&o.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value),lfb_linksUpdateFields(o,e),setTimeout(function(){o.val(e.action),o.on("change"),o.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value)},400)),jQuery("#lfb_redirConditionsTable tbody").append(t)}function lfb_addShowInteraction(e){var t=jQuery('<tr class="lfb_conditionItem"></tr>'),i=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var l=this;i.append('<option value="_step-'+l.id+'" data-type="step" data-static="1"  data-variable="numberfield">'+l.title+" :  "+lfb_data.texts.totalQuantity+"</option>"),jQuery.each(l.items,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e=l.id+"_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})}),jQuery.each(lfb_currentForm.variables,function(){i.append('<option value="v_'+this.id+'" data-type="variable">'+lfb_data.texts.Variable+' : " '+this.title+' "</option>')});var l=lfb_data.texts.lastStep;i.append('<option value="_step-0" data-type="step" data-static="1"  data-variable="numberfield">'+l+" :  "+lfb_data.texts.totalQuantity+"</option>"),jQuery.each(lfb_currentForm.fields,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e="0_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l+' : " '+t.title+' "</option>'))}),i.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),i.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var a,n,r,o=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');i.on("change",function(){var e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),l=!1;0<e?jQuery.each(lfb_steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(l=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(l=this)});var a,n=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");n.find("option").remove(),a=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):lfb_conditionGetOperators(l,i),jQuery.each(a,function(){n.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change")}),e&&void 0!==e.interaction&&i.val(e.interaction),s=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):(a=i.val().substr(0,i.val().indexOf("_")),n=i.val().substr(i.val().indexOf("_")+1,i.val().length),r=!1,0<a?jQuery.each(lfb_steps,function(){this.id==a&&jQuery.each(this.items,function(){this.id==n&&(r=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==n&&(r=this)}),lfb_conditionGetOperators(r,i)),jQuery.each(s,function(){o.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change",function(){lfb_linksUpdateFields(jQuery(this))});var s=jQuery("<td></td>");s.append(i),t.append(s);s=jQuery("<td></td>");s.append(o),t.append(s),t.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" data-action="lfb_conditionRemove"><span class="glyphicon glyphicon-remove"></span></a> </td>'),t.find('a[data-action="lfb_conditionRemove"]').on("click",function(){lfb_conditionRemove(this)}),e&&void 0!==e.action&&(o.val(e.action),o.on("change"),e.value&&o.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value),lfb_linksUpdateFields(o,e)),jQuery("#lfb_showConditionsTable tbody").append(t)}function lfb_addCalcInteraction(e){var t=jQuery('<tr class="lfb_conditionItem"></tr>'),i=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var l=this;jQuery.each(l.items,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e=l.id+"_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})});var l=lfb_data.texts.lastStep;jQuery.each(lfb_currentForm.fields,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e="0_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l+' : " '+t.title+' "</option>'))}),i.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),i.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var a,n,r,o=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');i.on("change",function(){var e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),l=!1;0<e?jQuery.each(lfb_steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(l=this)})}):jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(l=this)});var a,n=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");n.find("option").remove(),a=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):lfb_conditionGetOperators(l,i),jQuery.each(a,function(){n.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change")}),e&&void 0!==e.interaction&&i.val(e.interaction),s=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):(a=i.find("option").first().attr("value").substr(0,i.find("option").first().attr("value").indexOf("_")),n=i.find("option").first().attr("value").substr(i.find("option").first().attr("value").indexOf("_")+1,i.find("option").first().attr("value").length),r=!1,jQuery.each(lfb_steps,function(){this.id==a&&jQuery.each(this.items,function(){this.id==n&&(r=this)})}),lfb_conditionGetOperators(r,i)),jQuery.each(s,function(){o.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),o.on("change",function(){lfb_linksUpdateFields(jQuery(this))});var s=jQuery("<td></td>");s.append(i),t.append(s);s=jQuery("<td></td>");s.append(o),t.append(s),t.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" data-action="lfb_conditionRemove"><span class="glyphicon glyphicon-remove"></span></a> </td>'),t.find('a[data-action="lfb_conditionRemove"]').on("click",function(){lfb_conditionRemove(this)}),e&&void 0!==e.action&&(o.val(e.action),o.on("change"),e.value&&lfb_linksUpdateFields(o,e)),jQuery("#lfb_calcConditionsTable tbody").append(t)}function lfb_addLinkInteraction(e){var t=jQuery('<tr class="lfb_conditionItem"></tr>'),i=jQuery('<select class="lfb_conditionSelect form-control"></select>');jQuery.each(lfb_steps,function(){var l=this;jQuery.each(l.items,function(){var e,t=this;"richtext"!=t.type&&"colorpicker"!=t.type&&"shortcode"!=t.type&&"separator"!=t.type&&"row"!=t.type&&"layeredImage"!=t.type&&(e=l.id+"_"+t.id,i.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})}),jQuery.each(lfb_currentForm.variables,function(){i.append('<option value="v_'+this.id+'" data-type="variable">'+lfb_data.texts.Variable+' : " '+this.title+' "</option>')}),i.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),i.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>");var l,a,n,r=jQuery('<select class="lfb_conditionoperatorSelect form-control"></select>');i.on("change",function(){var e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),l=!1;jQuery.each(lfb_steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(l=this)})});var a,n=jQuery(this).parent().parent().find(".lfb_conditionoperatorSelect");n.find("option").remove(),a=i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):lfb_conditionGetOperators(l,i),jQuery.each(a,function(){n.append('<option value="'+this.value+'"  data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),r.on("change")}),e&&void 0!==e.interaction&&i.val(e.interaction),i.find("option:selected").is("[data-static]")||i.find("option:selected").is('[data-type="variable"]')?o=lfb_conditionGetOperators({type:i.find("option:selected").attr("data-type")},i):i.val()&&(l=i.val().substr(0,i.val().indexOf("_")),a=i.val().substr(i.val().indexOf("_")+1,i.val().length),n=!1,jQuery.each(lfb_steps,function(){this.id==l&&jQuery.each(this.items,function(){this.id==a&&(n=this)})}),"_step-"==i.val().substr(0,6)&&(n={type:"step"}),o=lfb_conditionGetOperators(n,i)),jQuery.each(o,function(){r.append('<option value="'+this.value+'" data-variable="'+this.hasVariable+'">'+this.text+"</option>")}),r.on("change",function(){lfb_linksUpdateFields(jQuery(this))});var o=jQuery("<td></td>");o.append(i),t.append(o);o=jQuery("<td></td>");o.append(r),t.append(o),t.append('<td></td><td><a href="javascript:" class="lfb_conditionDelBtn" data-action="lfb_conditionRemove"><span class="glyphicon glyphicon-remove"></span></a> </td>'),t.find('a[data-action="lfb_conditionRemove"]').on("click",function(){lfb_conditionRemove(this)}),e&&void 0!==e.action&&(r.val(e.action),r.on("change"),e.value&&r.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(e.value),e.value&&lfb_linksUpdateFields(r,e)),jQuery("#lfb_conditionsTable tbody").append(t)}function lfb_linksUpdateFields(l,a){var e,t,n,i,r;l.closest(".lfb_conditionItem").find(".lfb_conditionValue").parent().remove(),"textfield"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="text" placeholder="" class="lfb_conditionValue form-control" /> </div>'),"numberfield"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="number" class="lfb_conditionValue form-control" /> </div>'),"pricefield"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="number" step="any" class="lfb_conditionValue form-control" /> </div>'),"datefield"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&(l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="text" step="any" class="lfb_conditionValue form-control"/> </div>'),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").datetimepicker({format:"yyyy-mm-dd",showMeridian:"1"==lfb_data.dateMeridian,container:"#lfb_form.lfb_bootstraped",minView:2}).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").show(),jQuery(".datetimepicker .table-condensed .switch").show(),jQuery(".datetimepicker .table-condensed .next").show()})),"timefield"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&(l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="text lfb_timepicker"  class="lfb_conditionValue form-control"/> </div>'),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").datetimepicker({showMeridian:"1"==lfb_data.dateMeridian,container:"#lfb_form.lfb_bootstraped",format:"hh:ii",startView:1}).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").hide(),jQuery(".datetimepicker .table-condensed .switch").hide(),jQuery(".datetimepicker .table-condensed .next").hide()}),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").on("click",function(){jQuery(this).datetimepicker("show")})),"datetimefield"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&(l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><input type="text lfb_timepicker"  class="lfb_conditionValue form-control"/> </div>'),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").datetimepicker({showMeridian:jQuery('#lfb_formFields [name="timeModeAM"]').is(":checked"),container:"#lfb_form.lfb_bootstraped",format:"yyyy-mm-dd hh:ii"}).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").show(),jQuery(".datetimepicker .table-condensed .switch").show(),jQuery(".datetimepicker .table-condensed .next").show()}),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").on("click",function(){jQuery(this).datetimepicker("show")})),"select"==l.closest(".lfb_conditionItem").find(".lfb_conditionoperatorSelect option:selected").attr("data-variable")&&(i=l.closest(".lfb_conditionItem").find(".lfb_conditionSelect"),e=i.val().substr(0,i.val().indexOf("_")),t=i.val().substr(i.val().indexOf("_")+1,i.val().length),n="",jQuery.each(lfb_currentForm.steps,function(){this.id==e&&jQuery.each(this.items,function(){this.id==t&&(n=this.optionsValues)})}),jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(n=this.optionsValues)}),i=n.split("|"),jQuery.each(i,function(){var e=this;0<e.indexOf(";;")&&(e=e.split(";;")[0]),0<e.length&&(n+='<option value="'+e+'">'+e+"</option>")}),0==l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length&&l.closest(".lfb_conditionItem").children("td:eq(2)").html('<div><select class="lfb_conditionValue form-control">'+n+"</select> </div>")),"none"==jQuery("#lfb_winRedirection").css("display")&&(0<l.closest(".lfb_conditionItem").find(".lfb_conditionValue").length?(0==l.closest(".lfb_conditionItem").find(".lfb_conditionValueBtn").length&&((r=jQuery('<a href="javascript:"  class="lfb_conditionValueBtn"><span class="glyphicon glyphicon-list-alt"></span></a>')).on("click",function(){lfb_conditionValueBtnClick(this)}),l.closest(".lfb_conditionItem").children("td:eq(3)").prepend(r)),0==l.closest(".lfb_conditionItem").find(".lfb_conditionValueMenu").length&&(i=jQuery('<div class="lfb_conditionValueMenu"></div>'),(r=l.closest(".lfb_conditionItem").find(".lfb_conditionSelect").clone()).on("change",function(){lfb_updateConditionValueElements(this)}),r.css({width:"52%",display:"inline-block",marginRight:5}),r.removeClass("lfb_conditionSelect").addClass("lfb_conditionValueItemSelect"),i.append(r),(r=jQuery('<select class="form-control lfb_conditionAttributeMenu" style="width:45%;display:inline-block; float:right;"></select>')).append('<option value="">'+lfb_data.texts.price+"</value>"),r.append('<option value="quantity">'+lfb_data.texts.quantity+"</value>"),r.append('<option value="value">'+lfb_data.texts.value+"</value>"),i.append(r),l.closest(".lfb_conditionItem").children("td:eq(2)").append(i))):l.closest(".lfb_conditionItem").find(".lfb_conditionValueBtn").remove()),setTimeout(function(){var e,t;a&&a.value&&(-1<a.value.indexOf("_")&&0<a.value.indexOf("-")?(e=a.value.substr(0,a.value.indexOf("-")),t=a.value.substr(a.value.indexOf("-")+1,a.value.length),l.closest(".lfb_conditionItem").find(".lfb_conditionValueItemSelect").val(e),l.closest(".lfb_conditionItem").find(".lfb_conditionValueItemSelect").trigger("change"),l.closest(".lfb_conditionItem").find(".lfb_conditionAttributeMenu").val(t),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").parent().hide(),l.closest(".lfb_conditionItem").find(".lfb_conditionValueMenu").show()):(l.closest(".lfb_conditionItem").find(".lfb_conditionValueMenu").hide(),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").parent().show(),l.closest(".lfb_conditionItem").find(".lfb_conditionValue").val(a.value)))},500)}function lfb_updateConditionValueElements(e){var t,l=jQuery(e),a=jQuery(e).next(".lfb_conditionAttributeMenu");a.val(""),a.find('option[value="quantity"]').hide(),a.find('option[value=""]').show(),""!=l.val()&&(0<(t=l.val()).indexOf("_")&&(t=t.substr(t.indexOf("_")+1,t.length)),jQuery.each(lfb_currentForm.steps,function(){jQuery.each(this.items,function(){this.id==t&&(1==this.quantity_enabled||"slider"==this.type?a.find('option[value="quantity"]').show():a.find('option[value="quantity"]').hide(),"numberfield"==this.type||"textfield"==this.type||"select"==this.type||"textarea"==this.type||"datepicker"==this.type||"timepicker"==this.type?(a.find('option[value="value"]').show(),a.find('option[value=""]').hide(),a.val("value")):(a.find('option[value="value"]').hide(),a.find('option[value=""]').show()),"select"==this.type&&a.find('option[value=""]').show())})}),jQuery.each(lfb_currentForm.fields,function(){this.id==t&&(1==this.quantity_enabled||"slider"==this.type?a.find('option[value="quantity"]').show():a.find('option[value="quantity"]').hide(),"numberfield"==this.type||"textfield"==this.type||"select"==this.type||"textarea"==this.type||"datepicker"==this.type||"timepicker"==this.type?(a.find('option[value="value"]').show(),a.find('option[value=""]').hide(),a.val("value")):(a.find('option[value="value"]').hide(),a.find('option[value=""]').show()),"select"==this.type&&a.find('option[value=""]').show())}),"_total"==l.val()&&(a.find('option[value="quantity"]').hide(),a.find('option[value=""]').show(),a.val("")),"_total_qt"==l.val()&&(a.find('option[value="quantity"]').show(),a.find('option[value=""]').hide(),a.val("quantity")))}function lfb_conditionValueBtnClick(e){e=jQuery(e);e.closest(".lfb_conditionItem").find(".lfb_conditionValueItemSelect").trigger("change"),"none"!=e.closest(".lfb_conditionItem").children("td:eq(2)").find("div:not(.lfb_conditionValueMenu)").css("display")?(e.closest(".lfb_conditionItem").children("td:eq(2)").find("div:not(.lfb_conditionValueMenu)").hide(),e.closest(".lfb_conditionItem").children("td:eq(2)").find("div.lfb_conditionValueMenu").show()):(e.closest(".lfb_conditionItem").children("td:eq(2)").find("div:not(.lfb_conditionValueMenu)").show(),e.closest(".lfb_conditionItem").children("td:eq(2)").find("div.lfb_conditionValueMenu").hide())}function lfb_conditionRemove(e){jQuery(e).closest(".lfb_conditionItem").remove()}function lfb_getConditionValue(e,t){var l,a=e.val();return"none"==e.parent().css("display")&&(a=void 0!==t&&t?(l=0,"_total_qt"==e.closest("td").find(".lfb_conditionValueItemSelect").val()||"_total"==e.closest("td").find(".lfb_conditionValueItemSelect").val()?a="[total_quantity]":l=e.closest("td").find(".lfb_conditionValueItemSelect").val().substr(e.closest("td").find(".lfb_conditionValueItemSelect").val().indexOf("_")+1,e.closest("td").find(".lfb_conditionValueItemSelect").val().length),""==(t=e.closest("td").find(".lfb_conditionAttributeMenu").val())&&(t="price"),"[item-"+l+"_"+t+"]"):e.closest("td").find(".lfb_conditionValueItemSelect").val()+"-"+e.closest("td").find(".lfb_conditionAttributeMenu").val()),a}function lfb_linkSave(){var e;lfb_canSaveLink&&(lfb_canSaveLink=!1,lfb_links[lfb_currentLinkIndex].conditions=new Array,jQuery(".lfb_conditionItem").each(function(){lfb_links[lfb_currentLinkIndex].conditions.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:lfb_getConditionValue(jQuery(this).find(".lfb_conditionValue"))})}),lfb_links[lfb_currentLinkIndex].operator=jQuery("#lfb_linkOperator").val(),e=lfb_links.slice(),jQuery.each(e,function(){this.originID=jQuery("#"+this.originID).attr("data-stepid"),this.destinationID=jQuery("#"+this.destinationID).attr("data-stepid")}),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveLinks",formID:lfb_currentFormID,links:JSON.stringify(e)},success:function(){lfb_closeWin(jQuery("#lfb_winLink")),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_currentForm=e,lfb_loadFields(),lfb_params=e.params,lfb_steps=e.steps,jQuery.each(e.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t})}}),lfb_canSaveLink=!0}}))}function lfb_linkDel(){var e;lfb_canSaveLink&&(jQuery("#lfb_winLink").hide(),jQuery(".lfb_linkPoint[data-linkindex="+lfb_currentLinkIndex+"]").remove(),lfb_canSaveLink=!1,setTimeout(function(){lfb_canSaveLink=!0},1500),lfb_links.splice(jQuery.inArray(lfb_links[lfb_currentLinkIndex],lfb_links),1),e=lfb_links.slice(),jQuery.each(e,function(){this.originID=jQuery("#"+this.originID).attr("data-stepid"),this.destinationID=jQuery("#"+this.destinationID).attr("data-stepid")}),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveLinks",formID:lfb_currentFormID,links:JSON.stringify(e)},success:function(){lfb_closeWin(jQuery("#lfb_winLink")),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_params=(lfb_currentForm=e).params,lfb_steps=e.steps,jQuery.each(e.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t})}})}}))}function lfb_conditionGetOperators(e,t){var l=new Array;switch(e.type){case"step":l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"numberfield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"numberfield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"numberfield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"numberfield"});break;case"totalPrice":l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"pricefield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"pricefield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"pricefield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"pricefield"});break;case"totalQt":case"variable":l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"numberfield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"numberfield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"numberfield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"numberfield"});break;case"picture":l.push({value:"clicked",text:lfb_data.texts.isSelected}),l.push({value:"unclicked",text:lfb_data.texts.isUnselected}),l.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"}),l.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"}),l.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"}),l.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"}),"1"==e.quantity_enabled&&(l.push({value:"QtSuperior",text:lfb_data.texts.isQuantitySuperior,hasVariable:"numberfield"}),l.push({value:"QtInferior",text:lfb_data.texts.isQuantityInferior,hasVariable:"numberfield"}),l.push({value:"QtEqual",text:lfb_data.texts.isQuantityEqual,hasVariable:"numberfield"}),l.push({value:"QtDifferent",text:lfb_data.texts.isntQuantityEqual,hasVariable:"numberfield"}));break;case"button":case"imageButton":l.push({value:"clicked",text:lfb_data.texts.isSelected}),l.push({value:"unclicked",text:lfb_data.texts.isUnselected}),l.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"}),l.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"}),l.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"}),l.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"});break;case"slider":l.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"}),l.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"}),l.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"}),l.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"}),l.push({value:"QtSuperior",text:lfb_data.texts.isQuantitySuperior,hasVariable:"numberfield"}),l.push({value:"QtInferior",text:lfb_data.texts.isQuantityInferior,hasVariable:"numberfield"}),l.push({value:"QtEqual",text:lfb_data.texts.isQuantityEqual,hasVariable:"numberfield"}),l.push({value:"QtDifferent",text:lfb_data.texts.isntQuantityEqual,hasVariable:"numberfield"});break;case"textfield":l.push({value:"filled",text:lfb_data.texts.isFilled}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"textfield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"textfield"});break;case"rate":case"numberfield":l.push({value:"filled",text:lfb_data.texts.isFilled}),l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"numberfield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"numberfield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"numberfield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"numberfield"});break;case"textarea":l.push({value:"filled",text:lfb_data.texts.isFilled});break;case"datepicker":l.push({value:"filled",text:lfb_data.texts.isFilled}),t.find("option:selected").is('[data-datetype="date"]')?(l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"datefield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"datefield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"datefield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"datefield"})):t.find("option:selected").is('[data-datetype="time"]')?(l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"timefield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"timefield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"timefield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"timefield"})):t.find("option:selected").is('[data-datetype="dateTime"]')&&(l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"datetimefield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"datetimefield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"datetimefield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"datetimefield"}));break;case"timepicker":l.push({value:"filled",text:lfb_data.texts.isFilled}),l.push({value:"superior",text:lfb_data.texts.isSuperior,hasVariable:"timefield"}),l.push({value:"inferior",text:lfb_data.texts.isInferior,hasVariable:"timefield"}),l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"timefield"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"timefield"});break;case"select":l.push({value:"equal",text:lfb_data.texts.isEqual,hasVariable:"select"}),l.push({value:"different",text:lfb_data.texts.isntEqual,hasVariable:"select"}),l.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"}),l.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"}),l.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"}),l.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"});break;case"filefield":l.push({value:"filled",text:lfb_data.texts.isFilled});break;case"checkbox":l.push({value:"clicked",text:lfb_data.texts.isSelected}),l.push({value:"unclicked",text:lfb_data.texts.isUnselected}),l.push({value:"PriceSuperior",text:lfb_data.texts.isPriceSuperior,hasVariable:"numberfield"}),l.push({value:"PriceInferior",text:lfb_data.texts.isPriceInferior,hasVariable:"numberfield"}),l.push({value:"PriceEqual",text:lfb_data.texts.isPriceEqual,hasVariable:"numberfield"}),l.push({value:"PriceDifferent",text:lfb_data.texts.isntPriceEqual,hasVariable:"numberfield"});break;case"datefield":l.push({value:"filled",text:lfb_data.txt_filled}),l.push({value:"superior",text:lfb_data.txt_superiorTo}),l.push({value:"inferior",text:lfb_data.txt_inferiorTo}),l.push({value:"equal",text:lfb_data.txt_equalTo}),l.push({value:"different",text:lfb_data.texts.isntEqual});break;case"date":l.push({value:"superior",text:lfb_data.txt_superiorTo}),l.push({value:"inferior",text:lfb_data.txt_inferiorTo}),l.push({value:"equal",text:lfb_data.txt_equalTo}),l.push({value:"different",text:lfb_data.texts.isntEqual})}return l}function lfb_updateWinItemPosition(){var e;"none"!=jQuery("#lfb_winStep").css("display")&&0<(e=jQuery("#"+jQuery("#lfb_itemWindow").attr("data-item"))).length?jQuery("#lfb_itemWindow").css({top:e.offset().top-jQuery("#lfb_bootstraped.lfb_bootstraped").offset().top+e.outerHeight()+12,left:e.offset().left-jQuery("#lfb_bootstraped.lfb_bootstraped").offset().left}):jQuery("#lfb_itemWindow").fadeOut()}function lfb_checkEmail(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}function lfb_existInDefaultStep(e){var t=!1;return jQuery.each(lfb_defaultStep.interactions,function(){this.itemID==e&&(t=!0)}),t}function lfb_removeAllSteps(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeAllSteps",formID:lfb_currentFormID},success:function(){lfb_loadForm(lfb_currentFormID)}})}function lfb_addForm(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addForm"},success:function(e){lfb_loadForm(e)}})}function lfb_removeForm(e){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeForm",formID:e},success:function(){lfb_closeSettings()}})}function lfb_saveForm(){lfb_showLoader();var formData={},globalData={};jQuery("#lfb_formFields").find("input,select,textarea").each(function(){var value;0==jQuery(this).closest("#lfb_gdprSettings").length&&0==jQuery(this).closest("#lfb_fieldBubble").length&&0==jQuery(this).closest("#lfb_couponsTable").length&&0==jQuery(this).closest("#lfb_distanceValueBubble").length&&0==jQuery(this).closest("#lfb_calculationDatesDiffBubble").length&&(jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("formData."+jQuery(this).attr("name")+" = value;")):eval("formData."+jQuery(this).attr("name")+" = jQuery(this).val();"))}),jQuery("#lfb_gdprSettings").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("globalData."+jQuery(this).attr("name")+" = value;")):eval("globalData."+jQuery(this).attr("name")+" = jQuery(this).val();")}),jQuery('#lfb_formFields [name="encryptDB"]').is(":checked")?globalData.encryptDB=1:globalData.encryptDB=0,formData.pdf_adminContent=lfb_getEmailPdfContent(jQuery("#pdf_adminContent").code()),formData.pdf_userContent=lfb_getEmailPdfContent(jQuery("#pdf_userContent").code()),formData.email_adminContent=lfb_getEmailPdfContent(jQuery("#email_adminContent").code()),formData.email_userContent=lfb_getEmailPdfContent(jQuery("#email_userContent").code()),formData.legalNoticeContent=jQuery("#lfb_legalNoticeContent").code(),formData.emailVerificationContent=jQuery("#lfb_emailVerificationContent").code(),formData.customCss=lfb_editorCustomCSS.getValue(),formData.customJS=lfb_editorCustomJS.getValue(),formData.lastSave=Date.now(),formData.action="lfb_saveForm",formData.formID=lfb_currentFormID,formData.globalData=JSON.stringify(globalData),lfb_disableLinksAnim=!1,1==formData.disableLinksAnim&&(lfb_disableLinksAnim=!0),clearInterval(lfb_canvasTimer),lfb_disableLinksAnim||(lfb_canvasTimer=setInterval(lfb_updateStepCanvas,100)),jQuery.ajax({url:ajaxurl,type:"post",data:formData,success:function(){jQuery("#lfb_loader").fadeOut()}})}function lfb_editField(fieldID){jQuery("#lfb_fieldBubble").find("input,textarea").val(""),jQuery("#lfb_fieldBubble").find("select option").removeAttr("selected"),jQuery("#lfb_fieldBubble").find("select option:eq(0)").attr("selected","selected"),0<fieldID?(jQuery.each(lfb_currentForm.fields,function(){var field=this;field.id==fieldID&&jQuery("#lfb_fieldBubble").find("input,select,textarea").each(function(){eval("jQuery(this).val(field."+jQuery(this).attr("name")+");")})}),jQuery("#lfb_fieldBubble").css({left:jQuery('#lfb_finalStepFields tr[data-fieldid="'+fieldID+'"] td:eq(0) a').offset().left,top:jQuery('#lfb_finalStepFields tr[data-fieldid="'+fieldID+'"] td:eq(0) a').offset().top})):(jQuery("#lfb_fieldBubble").find('input[name="id"]').val(0),jQuery("#lfb_fieldBubble").css({left:jQuery("#lfb_addFieldBtn").offset().left,top:jQuery("#lfb_addFieldBtn").offset().top+18})),jQuery("#lfb_fieldBubble").fadeIn(),jQuery("#lfb_fieldBubble").addClass("lfb_hover"),setTimeout(function(){jQuery("#lfb_fieldBubble").removeClass("lfb_hover")},50)}function lfb_saveField(){lfb_showLoader(),jQuery("#lfb_fieldBubble").fadeOut();var fieldData={};jQuery("#lfb_fieldBubble").find("input,select,textarea").each(function(){eval("fieldData."+jQuery(this).attr("name")+" = jQuery(this).val();")}),fieldData.action="lfb_saveField",fieldData.formID=lfb_currentFormID,jQuery.ajax({url:ajaxurl,type:"post",data:fieldData,success:function(){lfb_loadFields()}})}function lfb_loadFields(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadFields",formID:lfb_currentFormID},success:function(e){jQuery("#lfb_finalStepFields table tbody").html(""),"[]"!=e&&(e=JSON.parse(e),lfb_currentForm.fields=e,jQuery.each(e,function(){var e=jQuery('<tr data-fieldid="'+this.id+'"></tr>');e.append('<td><a href="javascript:" data-action="lfb_editItem">'+this.title+"</a></td>"),e.append("<td>"+this.type+"</td>"),e.append("<td>"+this.groupitems+"</td>"),e.append('<td><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'" data-action="lfb_editItem" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.duplicate+'" data-action="lfb_duplicateItemLastStep" class="btn btn-default btn-circle"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.remove+'" data-action="lfb_removeItem" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>'),e.find('a[data-action="lfb_editItem"]').on("click",function(){lfb_editItem($(this).closest("tr").attr("data-fieldid"))}),e.find('a[data-action="lfb_duplicateItemLastStep"]').on("click",function(){lfb_duplicateItemLastStep($(this).closest("tr").attr("data-fieldid"))}),e.find('a[data-action="lfb_removeItem"]').on("click",function(){lfb_removeItem($(this).closest("tr").attr("data-fieldid"))}),e.find('[data-toggle="tooltip"]').b_tooltip(),jQuery("#lfb_finalStepFields table tbody").append(e),0==lfb_data.designForm&&jQuery("#lfb_loader").fadeOut()}))}})}function lfb_removeField(e){jQuery('#lfb_finalStepFields table tr[data-fieldid="'+e+'"]').slideUp(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeField",fieldID:e}})}function lfb_repositionLinks(){for(var e=new Array,t=0;t<lfb_links.length;t++)e.push(t);lfb_repositionLinkPoints(e)}function lfb_loadForm(formID){lfb_currentFormID=formID,jQuery("#lfb_btnLogsForm").attr("data-formid",formID),lfb_showLoader(),jQuery("#lfb_stepsContainer .lfb_stepBloc,.lfb_loadSteps,.lfb_linkPoint").remove(),jQuery("#lfb_formFields").find("#lfb_itemPricesGrid tbody tr").not(".static").remove(),jQuery("#lfb_logsBtn").attr("data-formid",formID),jQuery("#lfb_chartsBtn").attr("data-formid",formID),lfb_initFormsTopBtns(formID),jQuery("#lfb_btnPreview").unbind("click").on("click",function(){lfb_openFormPreview(formID)}),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:formID},success:function(rep){rep=JSON.parse(rep),lfb_currentForm=rep,lfb_loadFields(),lfb_params=rep.params,lfb_steps=rep.steps,lfb_disableLinksAnim=!1,"1"==rep.form.disableLinksAnim&&(lfb_disableLinksAnim=!0),lfb_updateLastStepTab(),clearInterval(lfb_canvasTimer),lfb_disableLinksAnim||jQuery("#lfb_stepsOverflow").bind("scroll",lfb_updateStepCanvas),jQuery("#lfb_formFields").find("input,select,textarea").each(function(){var value,self;jQuery(this).is('[data-name="encryptDB"]')||0!=jQuery(this).closest("#lfb_gdprSettings").length||0!=jQuery(this).closest("#lfb_calculationDatesDiffBubble").length||0!=jQuery(this).closest("#lfb_calculationValueBubble").length||(jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(rep.form."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}"),eval("if(rep.form."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}'),self=this,0<jQuery(self).closest(".form-group").find("small").length&&jQuery(self).closest(".has-switch").b_tooltip({title:jQuery(self).closest(".form-group").find("small").html()})):jQuery(this).is("pre")?eval("jQuery(this).html(rep.form."+jQuery(this).attr("name")+");"):eval("jQuery(this).val(rep.form."+jQuery(this).attr("name")+");"))}),jQuery('#lfb_formFields [name="paymentType"]').val(rep.form.paymentType),lfb_initFormsBackend(),jQuery("#lfb_itemRichText").summernote({height:300,minHeight:null,maxHeight:null}),jQuery("#lfb_tabEmail").show(),jQuery("#lfb_emailVerificationContent").summernote({height:200,minHeight:null,maxHeight:null}),jQuery("#lfb_emailVerificationContent").code(rep.form.emailVerificationContent),jQuery("#email_adminContent").summernote({height:300,minHeight:null,maxHeight:null}),jQuery("#email_adminContent").code(rep.form.email_adminContent),jQuery("#lfb_formEmailUser").show(),jQuery("#email_userContent").summernote({height:300,minHeight:null,maxHeight:null}),jQuery("#email_userContent").code(rep.form.email_userContent),jQuery("#pdf_adminContent").summernote({height:300,minHeight:null,maxHeight:null}),jQuery("#pdf_adminContent").code(rep.form.pdf_adminContent),jQuery("#pdf_userContent").summernote({height:300,minHeight:null,maxHeight:null}),jQuery("#pdf_userContent").code(rep.form.pdf_userContent),jQuery("#lfb_legalNoticeContent").summernote({height:180,minHeight:null,maxHeight:null}),jQuery("#lfb_legalNoticeContent").code(rep.form.legalNoticeContent),rep.form.customJS&&lfb_editorCustomJS.setValue(rep.form.customJS),rep.form.customCss&&lfb_editorCustomCSS.setValue(rep.form.customCss),setTimeout(function(){lfb_editorCustomJS.refresh()},100),jQuery(".imageBtn").on("click",function(){return lfb_formfield=jQuery(this).prev("input"),tb_show("","media-upload.php?TB_iframe=true"),!1}),jQuery('#lfb_formFields [name="email_toUser"]').is(":checked")||jQuery("#lfb_formEmailUser").hide(),jQuery("#lfb_tabEmail").attr("style",""),jQuery("#lfb_tabEmail").prop("style",""),jQuery("#lfb_formFields .colorpick").each(function(){var e=jQuery(this);0==jQuery(this).next(".lfb_colorPreview").length&&jQuery(this).after('<div class="lfb_colorPreview" style="background-color:#'+e.val().substr(1,7)+'"></div>'),jQuery(this).next(".lfb_colorPreview").on("click",function(){jQuery(this).prev(".colorpick").trigger("click")}),jQuery(this).css({width:226}),jQuery(this).colpick({color:e.val().substr(1,7),onChange:function(e,t,l,a,n){jQuery(a).val("#"+t),jQuery(a).next(".lfb_colorPreview").css({backgroundColor:"#"+t})}})}),lfb_updateFormVariablesTable(),jQuery.each(rep.steps,function(e){var t=this;if(""!=t.content){t.content=t.content.replace('}"',"}"),t.content=t.content.replace('"{',"{");try{t.content=JSON.parse(t.content),lfb_addStep(t)}catch(e){}}}),lfb_lastCreatedStepID=0,jQuery.each(rep.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t}),lfb_canvasTimer=setInterval(function(){lfb_disableLinksAnim&&!lfb_isLinking||lfb_updateStepCanvas()},30),lfb_updateStepCanvas(),setTimeout(function(){lfb_repositionLinks()},100),jQuery.each(rep.redirections,function(e){var t=jQuery('<tr data-id="'+this.id+'"></tr>');t.append("<td>"+this.url+"</td>"),t.append('<td><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'" data-action="lfb_editRedirection" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="lfb_removeRedirection" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>'),t.find('a[data-action="lfb_editRedirection"]').on("click",function(){lfb_editRedirection($(this).closest("tr").attr("data-id"))}),t.find('a[data-action="lfb_removeRedirection"]').on("click",function(){lfb_removeRedirection($(this).closest("tr").attr("data-id"))}),jQuery("#lfb_redirsTable tbody").append(t)}),jQuery("#lfb_formFields").find("input.lfb_iconField").trigger("change"),jQuery("#lfb_panelPreview").show(),jQuery("#lfb_panelFormsList").hide(),jQuery("#lfb_panelLogs").hide(),jQuery("#lfb_panelSettings").hide(),jQuery("#lfb_couponsTable tbody").html(""),jQuery.each(rep.coupons,function(){var e=this;"percentage"==e.reductionType?e.reduction="-"+e.reduction+"%":e.reduction="-"+parseFloat(e.reduction).toFixed(2);var t=$('<td style="text-align:right;"><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'" data-action="lfb_editCoupon" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.remove+'" data-action="lfb_removeCoupon" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>');t.find('a[data-action="lfb_editCoupon"]').on("click",function(){lfb_editCoupon($(this).closest("tr").attr("data-couponid"))}),t.find('a[data-action="lfb_removeCoupon"]').on("click",function(){lfb_removeCoupon($(this).closest("tr").attr("data-couponid"))});var l=$('<tr data-couponid="'+e.id+'"></div>');l.append("<td>"+e.couponCode+"</td>"),l.append("<td>"+e.useMax+"</td>"),l.append("<td>"+e.currentUses+"</td>"),l.append("<td>"+e.reduction+"</td>"),l.append(t),jQuery("#lfb_couponsTable tbody").append(l)}),jQuery("input.lfb_timepicker").each(function(){jQuery(this).datetimepicker({showMeridian:jQuery('#lfb_formFields [name="timeModeAM"]').is(":checked"),container:"#lfb_form.lfb_bootstraped",format:"HH:mm"}),jQuery(this).on("click",function(){jQuery(this).datetimepicker("show")})}),jQuery("#lfb_finalStepFields table tbody tr").each(function(){var e=jQuery(this).find("td:eq(1)").text();0<jQuery("#lfb_winItem").find('[name="type"] option[value="'+e+'"]').length&&(e=jQuery("#lfb_winItem").find('[name="type"] option[value="'+e+'"]').text(),jQuery(this).find("td:eq(1)").html(e))}),lfb_updateStepsDesign(),lfb_openChartsAuto?(lfb_openChartsAuto=!1,lfb_loadCharts(formID)):0==lfb_data.designForm&&jQuery("#lfb_loader").delay(1e3).fadeOut(),void 0!==lfb_settings&&1==lfb_settings.encryptDB?jQuery('#lfb_formFields [name="encryptDB"]').parent().bootstrapSwitch("setState",!0):jQuery('#lfb_formFields [name="encryptDB"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_emailTemplateAdmin").css({minHeight:jQuery("#lfb_emailTemplateCustomer").outerHeight()}),setTimeout(function(){jQuery('a[href="#collapse-lfb_tabEmail"]').on("click",lfb_openEmailTab),lfb_updateStepsDesign(),lfb_updateStepCanvas()},250),0!=lfb_data.designForm&&(lfb_data.designForm=0,window.history.pushState("lfb",document.title,"admin.php?page=lfb_menu"),lfb_openFormDesigner())}})}function lfb_openEmailTab(){setTimeout(function(){jQuery("#lfb_emailTemplateAdmin").css({minHeight:jQuery("#lfb_emailTemplateCustomer").outerHeight()})},100)}function lfb_initCharts(){"undefined"!=typeof google&&google.charts.load("current",{packages:["corechart"]})}function lfb_openCharts(e){lfb_openChartsAuto=!0,lfb_loadForm(e)}function lfb_closeCharts(){lfb_showLoader(),jQuery("#lfb_panelPreview").show(),jQuery("#lfb_panelCharts").hide(),lfb_loadForm(jQuery("#lfb_panelCharts").attr("data-formid"))}function lfb_loadCharts(e){jQuery("#lfb_panelCharts").attr("data-formid",e),jQuery("#lfb_panelPreview").hide(),jQuery("#lfb_panelFormsList").hide(),jQuery("#lfb_panelLogs").hide();var t=jQuery("#lfb_chartsTypeSelect").val(),l=jQuery("#lfb_chartsYear").val(),a=jQuery("#lfb_chartsMonth").val();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadCharts",formID:e,mode:t,year:l,yearMonth:a},success:function(e){jQuery("#lfb_panelCharts").show();var i=[];e=e.split("|"),jQuery.each(e,function(){var e;-1<this.indexOf(";")&&(0<(e=this.split(";"))[2]&&(chkSubs=!0),i.push([e[0].toString(),parseFloat(e[1]),parseFloat(e[2])]))}),google.charts.setOnLoadCallback(function(){var e=new google.visualization.DataTable;e.addColumn("string","X"),e.addColumn("number",lfb_data.texts.oneTimePayment),e.addColumn("number",lfb_data.texts.subscriptions);var t="",l="";"right"==jQuery('#lfb_formFields [name="currencyPosition"]').val()?l=jQuery('#lfb_formFields [name="currency"]').val():t=jQuery('#lfb_formFields [name="currency"]').val();var a=jQuery('#lfb_formFields [name="decimalsSeparator"]').val(),n=jQuery('#lfb_formFields [name="thousandsSeparator"]').val();"."==n&&(n=" ");a=t+"###"+jQuery('#lfb_formFields [name="millionSeparator"]').val()+"###"+n+"###"+a+"00"+l,l=new google.visualization.NumberFormat({prefix:t,suffix:l}),a={hAxis:{title:lfb_data.texts.months},vAxis:{title:lfb_data.texts.amountOrders,format:a,viewWindow:{min:0}},legend:{position:"bottom"},backgroundColor:"#FFFFFF",colors:["#16a085","#e67e22","#95a5a6","#34495e"],width:jQuery("#lfb_charts").parent().width(),height:550};jQuery("body").is(".lfb_dark")&&(a.backgroundColor="#222f3e",a.legendTextStyle={color:"#FFF"},a.titleTextStyle={color:"#FFF"},a.hAxis={textStyle:{color:"#FFF"}},a.vAxis={textStyle:{color:"#FFF"}}),e.addRows(i),l.format(e,1),l.format(e,2),lfb_currentChartsOptions=a,lfb_currentChartsData=e;l=new google.visualization.LineChart(document.getElementById("lfb_charts"));(lfb_currentCharts=l).draw(e,a),jQuery(window).resize(function(){var e=lfb_currentChartsData,t=lfb_currentChartsOptions;t.width=jQuery("#lfb_charts").parent().width(),lfb_currentCharts.draw(e,t)}),jQuery("#lfb_loader").fadeOut()})}})}function lfb_refreshLogs(){lfb_showLoader();var e=jQuery("#lfb_panelLogs").attr("data-formid");jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadLogs",formID:e},success:function(e){0<jQuery("#lfb_logsTable").closest(".dataTables_wrapper").length&&lfb_logsTable.destroy();var t=JSON.parse(e.trim());jQuery("#lfb_logsTable tbody").html("");for(var l=0;l<t.length;l++){var a=t[l],n=lfb_formatPrice(a.totalPrice,a.currency,a.currencyPosition,a.decimalsSeparator,a.thousandsSeparator,a.millionSeparator,a.billionsSeparator),i=lfb_formatPrice(a.totalSubscription,a.currency,a.currencyPosition,a.decimalsSeparator,a.thousandsSeparator,a.millionSeparator,a.billionsSeparator),r=jQuery('<tr data-id="'+a.id+'" data-formid="'+a.formID+'" data-logid="'+a.id+'" data-useremail="'+a.email+'"></tr>');r.append('<td><input name="tableSelector" type="checkbox" /></td>'),r.append("<td>"+a.dateLog+"</td>"),r.append('<td><a href="javascript:" data-action="viewOrder">'+a.ref+"</a></td>"),r.append("<td>"+a.firstName+" "+a.lastName+"</td>"),r.append("<td>"+a.email+"</td>"),r.append("<td>"+a.verifiedPayment+"</td>"),r.append('<td class="lfb_log_totalSubTd">'+i+"</td>"),r.append('<td class="lfb_log_totalTd">'+n+"</td>"),r.append('<td class="lfb_logStatusTd">'+a.statusText+"</td>"),r.append('<td class="lfb_actionTh"></td>'),r.find(".lfb_actionTh").append('<a href="javascript:" data-action="viewOrder" class="btn btn-primary btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["View this order"]+'" data-placement="bottom"><span class="glyphicon glyphicon-search"></span></a>'),r.find(".lfb_actionTh").append('<a href="javascript:"  data-action="editOrder"  class="btn btn-default btn-circle" data-toggle="tooltip" title="'+lfb_data.texts.edit+'" data-placement="bottom"><span class="glyphicon glyphicon-pencil"></span></a>'),r.find(".lfb_actionTh").append('<a href="javascript:"  data-action="downloadOrder"  class="btn btn-default btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["Download the order"]+'" data-placement="bottom"><span class="fa fa-file-download"></span></a>'),r.find(".lfb_actionTh").append('<a href="javascript:"  data-action="editCustomer" data-customerid="'+a.customerID+'" class="btn btn-default btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["Customer information"]+'" data-placement="bottom"><span class="fas fa-user"></span></a>'),r.find(".lfb_actionTh").append('<a href="javascript:" data-action="deleteOrder" class="btn btn-danger btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["Delete this order"]+'" data-placement="bottom"><span class="glyphicon glyphicon-trash"></span></a>'),jQuery("#lfb_logsTable tbody").append(r),r.find('[data-action="viewOrder"]').on("click",function(){(lfb_lastPanel=jQuery("#lfb_panelLogs")).fadeOut(),lfb_showLoader(),lfb_loadLog(jQuery(this).closest("tr").attr("data-id"),!1)}),r.find('[data-action="editOrder"]').on("click",function(){(lfb_lastPanel=jQuery("#lfb_panelLogs")).fadeOut(),lfb_showLoader(),lfb_loadLog(jQuery(this).closest("tr").attr("data-id"),!0)}),r.find('[data-action="downloadOrder"]').on("click",function(){var e=jQuery(this).closest("tr").attr("data-id");lfb_downloadOrder(lfb_currentLogID=e)}),r.find('[data-action="deleteOrder"]').on("click",function(){lfb_removeLog(jQuery(this).closest("tr").attr("data-id"),jQuery(this).closest("tr").attr("data-formid"))}),r.find('[data-action="editCustomer"]').on("click",function(){lfb_editCustomer(jQuery(this).attr("data-customerid"))})}lfb_logsTable=jQuery("#lfb_logsTable").DataTable({ordering:!1,language:{search:lfb_data.texts.search,infoFiltered:lfb_data.texts.filteredFrom,zeroRecords:lfb_data.texts.noRecords,infoEmpty:"",info:lfb_data.texts.showingPage,lengthMenu:lfb_data.texts.display+" _MENU_",paginate:{first:'<span class="glyphicon glyphicon-fast-backward"></span>',previous:'<span class="glyphicon glyphicon-step-backward"></span>',next:'<span class="glyphicon glyphicon-step-forward"></span>',last:'<span class="glyphicon glyphicon-fast-forward"></span>'}}}),jQuery("#lfb_logsTable").wrap('<div class="table-responsive"></div>'),jQuery('#lfb_logsTable [name="tableSelector"]').attr("checked","checked"),jQuery('#lfb_logsTable [name="tableSelector"]').on("change",function(){0==jQuery('#lfb_logsTable [name="tableSelector"]:checked').length?jQuery("#lfb_btnExportOrdersSelection,#lfb_btnDeleteOrdersSelection").attr("disabled","disabled"):jQuery("#lfb_btnExportOrdersSelection,#lfb_btnDeleteOrdersSelection").removeAttr("disabled")}),0==jQuery('#lfb_logsTable [name="tableSelector"]:checked').length?jQuery("#lfb_btnExportOrdersSelection,#lfb_btnDeleteOrdersSelection").attr("disabled","disabled"):jQuery("#lfb_btnExportOrdersSelection,#lfb_btnDeleteOrdersSelection").removeAttr("disabled"),jQuery("#lfb_logsTable thead th:last").css({width:238}),jQuery("#lfb_logsTableAllSelect").on("change",function(){jQuery(this).is(":checked")?jQuery('#lfb_logsTable tbody [name="tableSelector"]').prop("checked",!0):jQuery('#lfb_logsTable tbody [name="tableSelector"]').prop("checked",!1)}),jQuery("#lfb_panelPreview").hide(),jQuery("#lfb_panelFormsList").hide(),jQuery("#lfb_panelCharts").hide(),jQuery("#lfb_panelLogs").show(),jQuery('#lfb_logsTable tbody [data-toggle="tooltip"]').b_tooltip(),jQuery("#lfb_loader").fadeOut()}})}function lfb_loadLogs(e){lfb_showLoader(),jQuery("#lfb_panelLogs").attr("data-formid",e),jQuery("#lfb_customersPanel").fadeOut(),jQuery("#lfb_customerDetailsPanel").fadeOut(),lfb_refreshLogs(),jQuery('#lfb_logsToolbar [data-action="exportLogs"]').removeClass("lfb_noMargR"),0<lfb_currentFormID?(jQuery('#lfb_logsToolbar [data-action="openCharts"]').removeClass("lfb_noMargR"),jQuery('#lfb_logsToolbar [data-action="returnToForm"]').show()):(jQuery('#lfb_logsToolbar [data-action="openCharts"]').addClass("lfb_noMargR"),jQuery('#lfb_logsToolbar [data-action="returnToForm"]').hide()),0<e?(jQuery('#lfb_logsToolbar [data-action="openCharts"]').show(),jQuery('#lfb_logsToolbar [data-action="exportLogs"]').removeClass("lfb_noMargR")):(jQuery('#lfb_logsToolbar [data-action="openCharts"]').hide(),0==lfb_currentFormID&&jQuery('#lfb_logsToolbar [data-action="exportLogs"]').addClass("lfb_noMargR"))}function lfb_loadLog(t,l){lfb_currentLogID=t,lfb_orderModified=!1,jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadLog",logID:t},success:function(e){jQuery("#lfb_winLog").find(".lfb_logContainer").html(e),0==jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_summaryVat").length?jQuery('#lfb_winNewTotal [name="lfb_modifyVATField"]').closest(".form-group").hide():jQuery('#lfb_winNewTotal [name="lfb_modifyVATField"]').closest(".form-group").show(),jQuery('#lfb_winNewTotal [name="lfb_modifyVATField"]').val(jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logVatPrice").html()),jQuery('#lfb_winNewTotal [name="lfb_modifyTotalField"]').val(jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logTotal").html()),jQuery('#lfb_winNewTotal [name="lfb_modifySubTotalField"]').val(jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logSubTotal").html()),lfb_currentLogCurrency=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logCurrency").html(),lfb_currentLogCurrencyPosition=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logCurrencyPosition").html(),lfb_currentLogTotal=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logTotal").html(),lfb_currentLogSubTotal=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logSubTotal").html(),lfb_currentLogDecSep=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logDecSep").html(),lfb_currentLogThousSep=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logThousSep").html(),lfb_currentLogMilSep=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logMilSep").html(),lfb_currentLogSubTxt=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logSubTxt").html(),lfb_currentLogUseSub=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_currentLogUseSub").html(),lfb_currentLogIsPaid=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_currentLogIsPaid").html(),lfb_currentLogStatus=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_currentLogStatus").html(),lfb_currentLogCanPay=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_logCanPay").html(),jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_currentLogStatus").remove(),jQuery('#lfb_winLog [name="orderStatus"]').val(lfb_currentLogStatus),jQuery("#lfb_winLog").find("#lfb_logDecSep").remove(),jQuery("#lfb_winLog").find("#lfb_logThousSep").remove(),jQuery("#lfb_winLog").find("#lfb_logMilSep").remove(),jQuery("#lfb_winLog").find("#lfb_logSubTxt").remove(),jQuery("#lfb_winLog").find("#lfb_currentLogIsPaid").remove(),jQuery("#lfb_winLog").find("#lfb_currentLogUseSub").remove(),jQuery("#lfb_winLog").find("#lfb_logCurrency").remove(),jQuery("#lfb_winLog").find("#lfb_logCurrencyPosition").remove(),jQuery("#lfb_winLog").find("#lfb_logCanPay").remove(),jQuery("#lfb_editorLog").code(jQuery("#lfb_winLog").find(".lfb_logContainer").html()),jQuery("#lfb_winLog .lfb_logEditorContainer .panel-body *[bgcolor]").each(function(){jQuery(this).css({backgroundColor:jQuery(this).attr("bgcolor")})}),1==lfb_currentLogCanPay?jQuery('#lfb_winSendOrberByEmail [name="addPaymentLink"]').closest(".form-group").slideDown():(jQuery('#lfb_winSendOrberByEmail [name="addPaymentLink"]').closest(".form-group").slideUp(),jQuery('#lfb_winSendOrberByEmail [name="addPaymentLink"]').parent().bootstrapSwitch("setState",!1)),jQuery("#lfb_winLog .lfb_logEditorContainer .panel-body").on("click",function(){}),jQuery("#lfb_winLog").css({backgroundColor:jQuery("body").css("background-color")}),jQuery("#lfb_winLog .lfb_logEditorContainer .panel-body *[color]").each(function(){jQuery(this).css({color:jQuery(this).attr("bgcolor")})}),jQuery(".lfb_logEditorContainer .note-editable").on("keyup",function(){jQuery(".lfb_logEditorContainer .note-editable table tbody tr").find("th,td").each(function(){var e;0==jQuery(this).children("span").length&&(e=jQuery("<span></span>"),jQuery(this).append(e),e.bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(e){e.stopImmediatePropagation()})),jQuery(this).children().eq(0).is("br")&&jQuery(this).children().eq(0).remove()})}),jQuery("#lfb_winLog").find(".lfb_logContainer [bgcolor]").each(function(){jQuery(this).css({backgroundColor:jQuery(this).attr("bgcolor")})});e=jQuery('#lfb_logsTable tr[data-logid="'+t+'"]').attr("data-useremail");jQuery('#lfb_winSendOrberByEmail [name="recipients"]').val(e),jQuery("#lfb_winLog .lfb_logContainer").show(),jQuery("#lfb_winLog .lfb_logEditorContainer").hide(),jQuery("#lfb_winLog").fadeIn(),jQuery("#lfb_loader").fadeOut(),l&&lfb_editLog()}})}function lfb_openWinSendOrderEmail(){lfb_orderModified?jQuery("#lfb_winSaveBeforeSendOrder").fadeIn(260):(jQuery("#lfb_winLog .lfb_logContainer").show(),jQuery("#lfb_winLog .lfb_logEditorContainer").hide(),jQuery("#lfb_winSendOrberByEmail").fadeIn(260),jQuery('#lfb_winSendOrberByEmail [name="generatePdf"]').parent().bootstrapSwitch("setState",!1))}function lfb_editLog(){jQuery(".lfb_logEditorContainer .note-editable table tbody").is("ui-sortable")||(jQuery(".lfb_logEditorContainer .note-editable table tbody").sortable({helper:function(e,t){var l=t.children(),t=t.clone();return t.children().each(function(e){jQuery(this).width(l.eq(e).width())}),t},stop:function(e,t){}}),jQuery(".lfb_logEditorContainer .note-editable table tbody tr").find("td>span,th>span>strong").bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(e){e.stopImmediatePropagation()})),jQuery(".lfb_logEditorContainer .note-editable table").each(function(){0<jQuery(this).find('th[width="103"]').length&&(lfb_logEditorSummaryTable=jQuery(this),jQuery(this).find("tr>th[colspan]").each(function(){1==jQuery(this).closest("tr").children().length&&(lfb_logEditorStepThStyle=jQuery(this).closest("tr").children("th").children("span").find("strong").attr("style"))}),jQuery(this).find("tr>td:not([colspan])").each(function(){lfb_logEditorTdStyle=jQuery(this).closest("tr").children("th").children("span").attr("style")}))}),lfb_logEditorSummaryTable=lfb_logEditorSummaryTable||jQuery(jQuery(".lfb_logEditorContainer .note-editable table").get(0)),jQuery("#lfb_winLog .lfb_logContainer").hide(),jQuery("#lfb_winLog .lfb_logEditorContainer").show(),lfb_orderModified=!0}function lfb_orderAddRow(){var e=!1;lfb_logEditorSummaryTable.find("tr").each(function(){0<jQuery(this).children("td").length&&!jQuery(this).children("td").first().is("[colspan]")&&(e=jQuery(this))});var t=e.clone();t.find("td>span").html(""),t.find("td>span").bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(e){e.stopImmediatePropagation()}),t.attr("style",lfb_logEditorTdStyle),lfb_logEditorSummaryTable.find("tbody").append(t)}function lfb_orderAddStepRow(){var e=!1;lfb_logEditorSummaryTable.find("tr").each(function(){1==jQuery(this).children("th").length&&1==jQuery(this).children().length&&(e=jQuery(this))});var t=e.clone();t.find("th>span>strong").html(""),t.find("th>span>strong").bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(e){e.stopImmediatePropagation()}),lfb_logEditorSummaryTable.find("tbody").append(t)}function lfb_exportCalendarEvents(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportCalendarEvents",calendarID:lfb_currentCalendarID},success:function(e){e=e.trim(),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_exportCalendarCsvLink").attr("href","admin.php?page=lfb_menu&lfb_action=downloadCalendarCsv"),jQuery("#lfb_winCalendarCsv").fadeIn(260)}})}function lfb_exportCustomersCSV(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportCustomersCSV"},success:function(e){e=e.trim(),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_exportCustomerCsvLink").attr("href","admin.php?page=lfb_menu&lfb_action=downloadCustomersCsv"),jQuery("#lfb_winExportCustomersCsv").fadeIn(260)}})}function lfb_downloadOrder(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_downloadLog",logID:lfb_currentLogID},success:function(e){e=e.trim(),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_downloadOrderLink").attr("href","admin.php?page=lfb_menu&lfb_action=downloadOrder&ref="+e),jQuery("#lfb_winDownloadOrder").fadeIn(260)}})}function lfb_sendOrderByEmail(){jQuery('#lfb_winSendOrberByEmail [name="recipients"]').closest(".form-group").removeClass("has-error"),jQuery('#lfb_winSendOrberByEmail [name="subject"]').closest(".form-group").removeClass("has-error");var e=jQuery('#lfb_winSendOrberByEmail [name="recipients"]').val(),t=jQuery('#lfb_winSendOrberByEmail [name="subject"]').val(),l=!1;0==e.length?(l=!0,jQuery('#lfb_winSendOrberByEmail [name="recipients"]').closest(".form-group").addClass("has-error")):(n=e.split(","),jQuery.each(n,function(){lfb_checkEmail(this)||(l=!0,jQuery('#lfb_winSendOrberByEmail [name="recipients"]').closest(".form-group").addClass("has-error"))})),0==t.length&&(l=!0,jQuery('#lfb_winSendOrberByEmail [name="subject"]').closest(".form-group").addClass("has-error"));var a=0;jQuery('#lfb_winSendOrberByEmail [name="generatePdf"]').is(":checked")&&(a=1);var n=0;jQuery('#lfb_winSendOrberByEmail [name="addPaymentLink"]').is(":checked")&&(n=1),l||(lfb_showLoader(),jQuery("#lfb_winSendOrberByEmail").fadeOut(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_sendOrderByEmail",logID:lfb_currentLogID,recipients:e,subject:t,generatePDF:a,addPayLink:n},success:function(){jQuery("#lfb_loader").fadeOut()}}))}function lfb_saveLog(e){lfb_orderModified=!1,lfb_showLoader(),jQuery(".lfb_logEditorContainer .note-editable table tbody tr").find("td>span,th>span").each(function(){jQuery(this).css("display","inline-block")}),jQuery('.lfb_logEditorContainer .note-editable *[class!="lfb_value"]').removeAttr("class"),jQuery(".lfb_logEditorContainer .note-editable table").each(function(){jQuery(this).is("[width]")||(jQuery(this).attr("width","668"),jQuery(this).css("width","100%"))}),jQuery(".lfb_logEditorContainer .note-editable table").find("td,th").each(function(){var e=parseInt(100*jQuery(this).width()/jQuery(this).closest("table").width());jQuery(this).css("width",parseInt(e)+"%"),e=parseInt(668*e/100),jQuery(this).attr("width",e)});var t=lfb_formatPrice(lfb_currentLogTotal,lfb_currentLogCurrency,lfb_currentLogCurrencyPosition,lfb_currentLogDecSep,lfb_currentLogThousSep,lfb_currentLogMilSep,""),l=lfb_formatPrice(lfb_currentLogSubTotal,lfb_currentLogCurrency,lfb_currentLogCurrencyPosition,lfb_currentLogDecSep,lfb_currentLogThousSep,lfb_currentLogMilSep,"");jQuery("#lfb_logsTable,#lfb_customerOrdersTable").find('tr[data-id="'+lfb_currentLogID+'"] .lfb_log_totalTd').html(t),jQuery("#lfb_logsTable,#lfb_customerOrdersTable").find('tr[data-id="'+lfb_currentLogID+'"] .lfb_log_totalSubTd').html(l);t=jQuery("#lfb_editorLog").code(),l=jQuery('<div id="lfb_tmpLogContent"></div>');l.html(t),l.find('[style="display: none;"],[style="display:none;"]').remove(),l.find("#lfb_logVatPrice,#lfb_logTotal,#lfb_logSubTotal").remove(),l.find('[id="lfb_logVatPrice"],[id="lfb_logTotal"],[id="lfb_logSubTotal"]').remove(),t=l.html(),l.remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveLog",logID:lfb_currentLogID,formID:lfb_currentFormID,content:t,total:lfb_currentLogTotal,totalSub:lfb_currentLogSubTotal},success:function(){jQuery("#lfb_winLog").find(".lfb_logContainer").html(jQuery("#lfb_editorLog").code()),jQuery("#lfb_winLog .lfb_logContainer").show(),jQuery("#lfb_winLog .lfb_logEditorContainer").hide(),jQuery("#lfb_loader").fadeOut(),e&&lfb_openWinSendOrderEmail()}})}function lfb_closeLog(){jQuery("#lfb_winLog").fadeOut(),lfb_lastPanel?(lfb_lastPanel.fadeIn(),lfb_lastPanel=!1):jQuery("#lfb_panelLogs").show()}function lfb_removeLog(e,t){jQuery("#lfb_winDeleteOrder").attr("data-logid",e),jQuery("#lfb_winDeleteOrder").attr("data-formid",t),jQuery("#lfb_winDeleteOrder").fadeIn(260)}function lfb_confirmRemoveLog(){var e=jQuery("#lfb_winDeleteOrder").attr("data-logid"),t=jQuery("#lfb_winDeleteOrder").attr("data-formid"),l=0;jQuery('#lfb_winDeleteOrder [name="allOrders"]').is(":checked")&&(l=1),jQuery("#lfb_winDeleteOrder").fadeOut(260),lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeLog",logID:e,allOrders:l},success:function(){lfb_loadLogs(t)}})}function lfb_exportForms(){var e=0,t=0;jQuery('[name="exportLogs"]').is(":checked")&&(e=1),jQuery('[name="exportCoupons"]').is(":checked")&&(t=1),lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportForms",withLogs:e,withCoupons:t},success:function(e){jQuery("#lfb_loader").fadeOut(),"1"==e?jQuery("#lfb_winExport").fadeIn(260):alert(lfb_data.texts.errorExport)}})}function lfb_importForms(){lfb_showLoader(),jQuery("#lfb_winImport").fadeOut(260);var e=new FormData(jQuery("#lfb_winImportForm")[0]);jQuery.ajax({url:ajaxurl,type:"post",xhr:function(){return jQuery.ajaxSettings.xhr()},success:function(e){"1"!=e?(jQuery("#lfb_loader").fadeOut(),alert(lfb_data.texts.errorImport)):document.location.reload()},data:e,cache:!1,contentType:!1,processData:!1})}function lfb_editCoupon(e){var t="",l=1,a=0;0<e&&(t=jQuery('#lfb_couponsTable tbody tr[data-couponid="'+e+'"] td:eq(0)').html(),l=jQuery('#lfb_couponsTable tbody tr[data-couponid="'+e+'"] td:eq(1)').html(),"%"==(a=(a=jQuery('#lfb_couponsTable tbody tr[data-couponid="'+e+'"] td:eq(3)').html()).substr(1,a.length)).substr(a.length-1,1)&&(a=a.substr(0,a.length-1))),jQuery("#lfb_winEditCoupon .form-group").removeClass("has-error"),jQuery("#lfb_winEditCoupon").attr("data-couponid",e),jQuery('#lfb_winEditCoupon [name="couponCode"]').val(t),jQuery('#lfb_winEditCoupon [name="useMax"]').val(l),jQuery('#lfb_winEditCoupon [name="reduction"]').val(a),jQuery("#lfb_winEditCoupon").fadeIn(260)}function lfb_removeCoupon(e){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeCoupon",formID:lfb_currentFormID,couponID:e},success:function(){jQuery('#lfb_couponsTable tbody tr[data-couponid="'+e+'"]').slideUp(),setTimeout(function(){jQuery('#lfb_couponsTable tbody tr[data-couponid="'+e+'"]').remove()},300)}})}function lfb_removeAllCoupons(){jQuery("#lfb_couponsTable tbody").html(""),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeAllCoupons",formID:lfb_currentFormID},success:function(){}})}function lfb_saveCoupon(){var l=jQuery("#lfb_winEditCoupon").attr("data-couponid");jQuery("#lfb_winEditCoupon .form-group").removeClass("has-error");var a,n,i,r,e=!1;jQuery('#lfb_winEditCoupon [name="couponCode"]').val().length<3&&(e=!0,jQuery('#lfb_winEditCoupon [name="couponCode"]').closest(".form-group").addClass("has-error")),e||(jQuery("#lfb_winEditCoupon").fadeOut(260),a=jQuery('#lfb_winEditCoupon [name="couponCode"]').val(),n=jQuery('#lfb_winEditCoupon [name="useMax"]').val(),i=jQuery('#lfb_winEditCoupon [name="reduction"]').val(),r=jQuery('#lfb_winEditCoupon [name="reductionType"]').val(),""!=i&&!isNaN(i)||(i=0),i<0&&(i*=-1),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCoupon",formID:lfb_currentFormID,couponID:l,couponCode:jQuery('#lfb_winEditCoupon [name="couponCode"]').val(),useMax:jQuery('#lfb_winEditCoupon [name="useMax"]').val(),reduction:jQuery('#lfb_winEditCoupon [name="reduction"]').val(),reductionType:jQuery('#lfb_winEditCoupon [name="reductionType"]').val()},success:function(e){var t;i="percentage"==r?"-"+i+"%":"-"+parseFloat(i).toFixed(2),0==l?((t=$('<td style="text-align:right;"><a href="javascript:" data-action="lfb_editCoupon" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="lfb_removeCoupon" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>')).find('a[data-action="lfb_editCoupon"]').on("click",function(){lfb_editCoupon($(this).closest("tr").attr("data-id"))}),t.find('a[data-action="lfb_removeCoupon"]').on("click",function(){lfb_removeCoupon($(this).closest("tr").attr("data-id"))}),(e=$('<tr data-couponid="'+e+'"></div>')).append("<td>"+a+"</td>"),e.append("<td>"+n+"</td>"),e.append("<td>0</td>"),e.append("<td>"+i+"</td>"),e.append(t),jQuery("#lfb_couponsTable tbody").append(e)):(jQuery('#lfb_couponsTable tbody tr[data-couponid="'+l+'"] td:eq(0)').html(a),jQuery('#lfb_couponsTable tbody tr[data-couponid="'+l+'"] td:eq(1)').html(n),jQuery('#lfb_couponsTable tbody tr[data-couponid="'+l+'"] td:eq(3)').html(i))}}))}function lfb_addDateDiffValue(e){jQuery("#lfb_calculationDatesDiffBubble").find("select").val("currentDate"),jQuery("#lfb_calculationDatesDiffBubble").css({left:jQuery(e).offset().left,top:jQuery(e).offset().top+10+$("body").scrollTop()}),jQuery("#lfb_calculationValueBubble").fadeOut(),jQuery("#lfb_calculationDatesDiffBubble").fadeIn(),jQuery("#lfb_calculationDatesDiffBubble").addClass("lfb_hover"),lfb_updateCalculationsDates()}function lfb_updateCalculationsDates(){jQuery("#lfb_calculationDatesDiffBubble select option:not([data-static])").remove(),jQuery.each(lfb_steps,function(){var t=this;jQuery.each(t.items,function(){var e;"datepicker"==this.type&&(e=this.id,jQuery("#lfb_calculationDatesDiffBubble select").append('<option value="'+e+'" data-type="'+this.type+'">'+t.title+' : " '+this.title+' "</option>'))})}),jQuery.each(lfb_currentForm.fields,function(){var e;"datepicker"==this.type&&(e=this.id,jQuery("#lfb_calculationDatesDiffBubble select").append('<option value="'+e+'" data-type="'+this.type+'">'+lfb_data.texts.lastStep+' : " '+this.title+' "</option>'))})}function lfb_addCalculationValue(e){jQuery("#lfb_calculationValueBubble").find("select,textarea,input").val(""),lfb_updateCalculationsValueItems(),jQuery("#lfb_calculationValueBubble").css({left:jQuery(e).offset().left,top:jQuery(e).offset().top+10}),jQuery("#lfb_calculationDatesDiffBubble").fadeOut(),jQuery("#lfb_calculationValueBubble").fadeIn(),jQuery("#lfb_calculationValueBubble").addClass("lfb_hover"),lfb_updateCalculationsValueElements(),lfb_updateCalculationsValueType()}function lfb_updateCalculationsValueItems(){var a=jQuery('#lfb_calculationValueBubble select[name="itemID"]');a.html(""),jQuery.each(lfb_steps,function(){var l=this;a.append('<option value="step-'+l.id+'" >'+l.title+" :  "+lfb_data.texts.totalQuantity+" </option>"),jQuery.each(l.items,function(){var e,t=this;"picture"!=t.type&&"checkbox"!=t.type&&"numberfield"!=t.type&&"select"!=t.type&&"slider"!=t.type&&"button"!=t.type&&"imageButton"!=t.type&&"numberfield"!=this.type&&"textfield"!=this.type&&"datepicker"!=this.type&&"select"!=this.type&&"textarea"!=this.type||(e=t.id,a.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+l.title+' : " '+t.title+' "</option>'))})}),jQuery.each(lfb_currentForm.fields,function(){var e,t=this;"picture"!=t.type&&"checkbox"!=t.type&&"numberfield"!=t.type&&"select"!=t.type&&"slider"!=t.type&&"button"!=t.type&&"imageButton"!=t.type&&"numberfield"!=this.type&&"textfield"!=this.type&&"datepicker"!=this.type&&"select"!=this.type&&"textarea"!=this.type||(e=t.id,a.append('<option value="'+e+'" data-type="'+t.type+'" data-datetype="'+t.dateType+'">'+lfb_data.texts.lastStep+' : " '+t.title+' "</option>'))}),a.append('<option value="_total" data-type="totalPrice">'+lfb_data.texts.totalPrice+"</option>"),a.append('<option value="_total_qt" data-type="totalQt">'+lfb_data.texts.totalQuantity+"</option>")}function lfb_updateCalculationsValueElements(){var e,t=jQuery('#lfb_calculationValueBubble select[name="itemID"]'),l=jQuery('#lfb_calculationValueBubble select[name="element"]');l.val(""),l.find('option[value="quantity"]').hide(),l.find('option[value=""]').show(),0==t.val().indexOf("step-")?(l.find('option[value="quantity"]').show(),l.find('option[value=""]').hide(),l.find('option[value="value"]').hide(),l.val("quantity")):""!=t.val()&&(e=t.val(),jQuery.each(lfb_currentForm.steps,function(){jQuery.each(this.items,function(){if(this.id==e)return 1==this.quantity_enabled||"slider"==this.type?l.find('option[value="quantity"]').show():l.find('option[value="quantity"]').hide(),"numberfield"==this.type||"textfield"==this.type||"datepicker"==this.type||"select"==this.type||"textarea"==this.type||"rate"==this.type?(l.find('option[value="value"]').show(),l.find('option[value=""]').hide(),l.val("value")):(l.find('option[value="value"]').hide(),l.find('option[value=""]').show()),"select"==this.type&&l.find('option[value=""]').show(),!1})}),jQuery.each(lfb_currentForm.fields,function(){this.id==e&&(1==this.quantity_enabled||"slider"==this.type?l.find('option[value="quantity"]').show():l.find('option[value="quantity"]').hide(),"numberfield"==this.type||"textfield"==this.type||"datepicker"==this.type||"select"==this.type||"textarea"==this.type||"rate"==this.type?(l.find('option[value="value"]').show(),l.find('option[value=""]').hide(),l.val("value")):(l.find('option[value="value"]').hide(),l.find('option[value=""]').show()),"select"==this.type&&l.find('option[value=""]').show())}),"_total_qt"==t.val()&&(l.find('option[value="quantity"]').show(),l.find('option[value=""]').hide(),l.find('option[value="value"]').hide(),l.val("quantity")))}function lfb_addDistanceCondition(){jQuery("#lfb_winDistances").fadeIn()}function lfb_saveCalculationValue(){var e="calculation";1==lfb_calculationModeQt?e="calculationQt":2==lfb_calculationModeQt&&(e="variableCalculation");var t=jQuery('#lfb_calculationValueBubble select[name="itemID"]'),l=jQuery('#lfb_calculationValueBubble select[name="element"]'),a=jQuery('#lfb_calculationValueBubble select[name="variableID"]'),n="price";""!=l.val()&&(n=l.val()),"value"==n&&jQuery.each(lfb_currentForm.steps,function(){jQuery.each(this.items,function(){if(this.id==t.val())return"datepicker"==this.type&&(n="date"),!1})});var i,r,l="[item-"+t.val()+"_"+n+"]";"_total"==t.val()&&(l="[total]"),"_total_qt"==t.val()&&(l="[total_quantity]"),0==t.val().indexOf("step-")&&(l="[step-"+t.val().substr(5)+"_"+n+"]"),"variable"==jQuery('#lfb_calculationValueBubble select[name="valueType"]').val()&&(l=""!=a.val()&&null!=a.val()?"[variable-"+a.val()+"]":""),jQuery("#lfb_winItem").find('[name="'+e+'"]').next().is(".CodeMirror")?(r=lfb_itemPriceCalculationEditor,"calculationQt"==e?r=lfb_itemCalculationQtEditor:"variableCalculation"==e&&(r=lfb_itemVariableCalculationEditor),r=(i=r.getDoc()).getCursor(),i.replaceRange(l,r),lfb_applyCalculationEditorTooltips(e)):(i=jQuery("#lfb_winItem").find('[name="'+e+'"]').prop("selectionStart"),r=jQuery("#lfb_winItem").find('[name="'+e+'"]').val(),isNaN(i)&&(i=r.length),r=r.substr(0,i)+" "+l+" "+r.substr(i,r.length),jQuery("#lfb_winItem").find('[name="'+e+'"]').val(r)),jQuery("#lfb_calculationValueBubble").fadeOut()}function lfb_saveCalculationDatesDiff(){var e="calculation";1==lfb_calculationModeQt?e="calculationQt":2==lfb_calculationModeQt&&(e="variableCalculation");var t,l,a=jQuery('#lfb_calculationDatesDiffBubble select[name="startDate"]'),n=jQuery('#lfb_calculationDatesDiffBubble select[name="endDate"]'),n="[dateDifference-"+a.val()+"_"+n.val()+"]";jQuery("#lfb_winItem").find('[name="'+e+'"]').next().is(".CodeMirror")?(l=lfb_itemPriceCalculationEditor,"calculationQt"==e?l=lfb_itemCalculationQtEditor:"variableCalculation"==e&&(l=lfb_itemVariableCalculationEditor),l=(t=l.getDoc()).getCursor(),t.replaceRange(n,l),lfb_applyCalculationEditorTooltips(e)):(t=jQuery("#lfb_winItem").find('[name="'+e+'"]').prop("selectionStart"),l=jQuery("#lfb_winItem").find('[name="'+e+'"]').val(),isNaN(t)&&(t=l.length),l=l.substr(0,t)+" "+n+" "+l.substr(t,l.length),jQuery("#lfb_winItem").find('[name="'+e+'"]').val(l)),jQuery("#lfb_calculationDatesDiffBubble").fadeOut()}function lfb_addCalculationCondition(){jQuery("#lfb_winCalculationConditions #lfb_calcConditionsTable tbody").html(""),jQuery("body,html").animate({scrollTop:0},200),jQuery("#lfb_winCalculationConditions").fadeIn()}function lfb_calcConditionSave(){var e="calculation";1==lfb_calculationModeQt?e="calculationQt":2==lfb_calculationModeQt&&(e="variableCalculation");var a="if(";0<jQuery("#lfb_winItem").find('[name="'+e+'"]').val().length&&(a="\n"+a);var t,l,n="&&";"OR"==jQuery("#lfb_calcOperator").val()&&(n="||"),jQuery("#lfb_winCalculationConditions #lfb_calcConditionsTable tbody tr.lfb_conditionItem").each(function(){var e=this,t=jQuery(e).find(".lfb_conditionSelect").val(),l=lfb_getConditionValue(jQuery(this).find(".lfb_conditionValue"),!0);"_total"!=t&&"_total_qt"!=t&&(t.length<2||"v_"!=t.substr(0,2))?t="item-"+t.substr(t.indexOf("_")+1,t.length):2<=t.length&&"v_"==t.substr(0,2)&&(t="variable-"+t.substr(t.indexOf("_")+1,t.length)),"Qt"==jQuery(e).find(".lfb_conditionoperatorSelect ").val().substr(0,2)?(a+="["+t+"_quantity]","QtSuperior"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+=" >":"QtInferior"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+=" <":"QtDifferent"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+=" !=":a+=" ==",a+=l):"Price"==jQuery(e).find(".lfb_conditionoperatorSelect ").val().substr(0,5)?(a+="["+t+"_price]","PriceSuperior"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+=" >":"PriceInferior"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+=" <":"PriceDifferent"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+=" !=":a+=" ==",a+=l):"clicked"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+="["+t+"_isChecked]":"unclicked"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?a+="["+t+"_isUnchecked]":"superior"==jQuery(e).find(".lfb_conditionoperatorSelect ").val()?"_total"==t?(a+="[total]",a+=" >",a+=l):"_total_qt"==t?(a+="[total_quantity]",a+=" >",a+=l):"select"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" >",a+="'"+l+"'"):"numberfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")||"rate"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" >",a+=l):("textfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?a+="["+t+"_value]":a+="["+t+"_date]",a+=" >",a+="'"+l+"'"):"inferior"==jQuery(e).find(".lfb_conditionoperatorSelect").val()?"_total"==t?(a+="[total]",a+=" <",a+=l):"_total_qt"==t?(a+="[total_quantity]",a+=" <",a+=l):"select"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" <",a+="'"+l+"'"):"numberfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")||"rate"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" <",a+=l):"textfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" <",a+="'"+l+"'"):(a+="["+t+"_date]",a+=" <",a+='"'+l+'"'):"equal"==jQuery(e).find(".lfb_conditionoperatorSelect").val()?"_total"==t?(a+="[total]",a+=" ==",a+=l):"_total_qt"==t?(a+="[total_quantity]",a+=" ==",a+=l):"select"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" ==",a+="'"+l+"'"):"numberfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")||"rate"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" ==",a+=l):("textfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?a+="["+t+"_value]":a+="["+t+"_date]",a+=" ==",a+="'"+l+"'"):"different"==jQuery(e).find(".lfb_conditionoperatorSelect").val()?"_total"==t?(a+="[total]",a+=" !=",a+=l):"_total_qt"==t?(a+="[total_quantity]",a+=" !=",a+=l):"select"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" !=",a+="'"+l+"'"):"numberfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")||"rate"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?(a+="["+t+"_value]",a+=" !=",a+=l):("textfield"==jQuery(e).find('.lfb_conditionSelect option[value="'+jQuery(e).find(".lfb_conditionSelect").val()+'"]').attr("data-type")?a+="["+t+"_value]":a+="["+t+"_date]",a+=" !=",a+="'"+l+"'"):"filled"==jQuery(e).find(".lfb_conditionoperatorSelect").val()&&(a+="["+t+"_isFilled]"),a+=n}),a=a.substr(0,a.length-2),a+=") {\n\n}",0==jQuery("#lfb_winCalculationConditions #lfb_calcConditionsTable tbody tr.lfb_conditionItem").length&&(a="if( ) { }"),jQuery("#lfb_winItem").find('[name="'+e+'"]').next().is(".CodeMirror")?(l=lfb_itemPriceCalculationEditor,"calculationQt"==e?l=lfb_itemCalculationQtEditor:"variableCalculation"==e&&(l=lfb_itemVariableCalculationEditor),l=(t=l.getDoc()).getCursor(),t.replaceRange(a,l),setTimeout(function(){lfb_applyCalculationEditorTooltips(e)},250)):(t=jQuery("#lfb_winItem").find('[name="'+e+'"]').prop("selectionStart"),l=jQuery("#lfb_winItem").find('[name="'+e+'"]').val(),isNaN(t)&&l.length,l=l.substr(0,t)+a+" "+l.substr(t,l.length),jQuery("#lfb_winItem").find('[name="'+e+'"]').val(l)),jQuery("#lfb_winCalculationConditions").fadeOut()}function lfb_addEmailValue(e){jQuery("#lfb_emailValueBubble").find("select,textarea,input").val(""),lfb_updateEmailValueItems();var t="#lfb_btnAddEmailValue";jQuery("#lfb_emailValueBubble").attr("data-customermode",e),1==e?t="#lfb_btnAddEmailValueCustomer":2==e?t="#lfb_btnAddRichtextValue":3==e?t="#lfb_btnAddPdfValue":4==e&&(t="#lfb_btnAddPdfValueCustomer"),jQuery("#lfb_emailValueBubble").css({left:jQuery(t).offset().left-80,top:jQuery(t).offset().top+28}),jQuery("#lfb_emailValueBubble").fadeIn(),jQuery("#lfb_emailValueBubble").addClass("lfb_hover"),lfb_updateEmailValueType(),lfb_updateEmailValueElements()}function lfb_updateCalculationsValueType(){"variable"==jQuery('#lfb_calculationValueBubble select[name="valueType"]').val()?(jQuery('#lfb_calculationValueBubble select[name="element"]').closest(".form-group").hide(),jQuery('#lfb_calculationValueBubble select[name="itemID"]').closest(".form-group").hide(),jQuery('#lfb_calculationValueBubble select[name="variableID"]').closest(".form-group").show(),0<jQuery('#lfb_calculationValueBubble select[name="variableID"] option').length&&jQuery('#lfb_calculationValueBubble select[name="variableID"]').val(jQuery('#lfb_emailValueBubble select[name="variableID"] option').first().attr("value"))):(jQuery('#lfb_calculationValueBubble select[name="element"]').closest(".form-group").show(),jQuery('#lfb_calculationValueBubble select[name="itemID"]').closest(".form-group").show(),jQuery('#lfb_calculationValueBubble select[name="variableID"]').closest(".form-group").hide())}function lfb_updateEmailValueType(){"variable"==jQuery('#lfb_emailValueBubble select[name="valueType"]').val()?(jQuery('#lfb_emailValueBubble select[name="element"]').closest(".form-group").hide(),jQuery('#lfb_emailValueBubble select[name="itemID"]').closest(".form-group").hide(),jQuery('#lfb_emailValueBubble select[name="variableID"]').closest(".form-group").show(),0<jQuery('#lfb_emailValueBubble select[name="variableID"] option').length&&jQuery('#lfb_emailValueBubble select[name="variableID"]').val(jQuery('#lfb_emailValueBubble select[name="variableID"] option').first().attr("value"))):(jQuery('#lfb_emailValueBubble select[name="element"]').closest(".form-group").show(),jQuery('#lfb_emailValueBubble select[name="itemID"]').closest(".form-group").show(),jQuery('#lfb_emailValueBubble select[name="variableID"]').closest(".form-group").hide())}function lfb_updateEmailValueElements(){var e,t=jQuery('#lfb_emailValueBubble select[name="itemID"]'),l=jQuery('#lfb_emailValueBubble select[name="element"]');l.val(""),l.find('option[value="quantity"]').hide(),l.find('option[value=""]').show(),l.find('option[value="image"]').hide(),""!=t.val()&&(e=t.val(),jQuery.each(lfb_currentForm.steps,function(){jQuery.each(this.items,function(){this.id==e&&(1==this.quantity_enabled||"slider"==this.type?l.find('option[value="quantity"]').show():l.find('option[value="quantity"]').hide(),"textfield"==this.type||"numberfield"==this.type||"textarea"==this.type||"select"==this.type||"colorpicker"==this.type||"datepicker"==this.type||"timepicker"==this.type||"filefield"==this.type||"rate"==this.type?(l.find('option[value="value"]').show(),l.find('option[value=""]').hide(),l.val("value")):(l.find('option[value="value"]').hide(),l.find('option[value=""]').show()),"select"==this.type?l.find('option[value=""]').show():"picture"==this.type&&l.find('option[value="image"]').show())})}),jQuery.each(lfb_currentForm.fields,function(){this.id==e&&(1==this.quantity_enabled||"slider"==this.type?l.find('option[value="quantity"]').show():l.find('option[value="quantity"]').hide(),"textfield"==this.type||"textarea"==this.type||"select"==this.type||"colorpicker"==this.type||"datepicker"==this.type||"timepicker"==this.type||"filefield"==this.type||"rate"==this.type?(l.find('option[value="value"]').show(),l.find('option[value=""]').hide(),l.val("value")):(l.find('option[value="value"]').hide(),l.find('option[value=""]').show()),"select"==this.type?l.find('option[value=""]').show():"picture"==this.type&&l.find('option[value="image"]').show())}),"_total_qt"==t.val()?(l.find('option[value="quantity"]').show(),l.find('option[value=""]').hide(),l.find('option[value="title"]').hide(),l.val("quantity")):"_total"==t.val()?(l.find('option[value="quantity"]').hide(),l.find('option[value=""]').show(),l.find('option[value="title"]').hide(),l.val("")):l.find('option[value="title"]').show())}function lfb_updateEmailValueItems(){var l=jQuery('#lfb_emailValueBubble select[name="itemID"]');l.html(""),jQuery.each(lfb_steps,function(){var t=this;jQuery.each(t.items,function(){var e;"picture"!=this.type&&"checkbox"!=this.type&&"numberfield"!=this.type&&"select"!=this.type&&"slider"!=this.type&&"button"!=this.type&&"imageButton"!=this.type&&"rate"!=this.type&&"textfield"!=this.type&&"textarea"!=this.type&&"select"!=this.type&&"colorpicker"!=this.type&&"datepicker"!=this.type&&"timepicker"!=this.type||(e=this.id,l.append('<option value="'+e+'" data-type="'+this.type+'" data-datetype="'+this.dateType+'">'+t.title+' : " '+this.title+' "</option>'))})}),jQuery.each(lfb_currentForm.fields,function(){var e;"picture"!=this.type&&"checkbox"!=this.type&&"numberfield"!=this.type&&"select"!=this.type&&"slider"!=this.type&&"button"!=this.type&&"imageButton"!=this.type&&"filefield"!=this.type&&"rate"!=this.type&&"textfield"!=this.type&&"textarea"!=this.type&&"select"!=this.type&&"colorpicker"!=this.type&&"datepicker"!=this.type&&"timepicker"!=this.type||(e=this.id,l.append('<option value="'+e+'" data-type="'+this.type+'" data-datetype="'+this.dateType+'">'+lfb_data.texts.lastStep+' : " '+this.title+' "</option>'))}),l.append('<option value="_total" data-static="1" data-type="totalPrice" data-variable="pricefield">'+lfb_data.texts.totalPrice+"</option>"),l.append('<option value="_total_qt" data-static="1" data-type="totalQt" data-variable="numberfield">'+lfb_data.texts.totalQuantity+"</option>")}function lfb_saveEmailValue(){var e=jQuery('#lfb_emailValueBubble select[name="itemID"]'),t=jQuery('#lfb_emailValueBubble select[name="element"]'),l=jQuery('#lfb_emailValueBubble select[name="variableID"]'),a="#email_adminContent";"1"==jQuery("#lfb_emailValueBubble").attr("data-customermode")?a="#email_userContent":"2"==jQuery("#lfb_emailValueBubble").attr("data-customermode")?a="#lfb_itemRichText":"3"==jQuery("#lfb_emailValueBubble").attr("data-customermode")?a="#pdf_adminContent":"4"==jQuery("#lfb_emailValueBubble").attr("data-customermode")&&(a="#pdf_userContent");var n=jQuery('#lfb_emailValueBubble select[name="element"]').val();""==n&&(n="price"),""!=t.val()&&(n=t.val());n="[item-"+e.val()+"_"+n+"]";"_total"==e.val()&&(n="[total]"),"_total_qt"==e.val()&&(n="[total_quantity]"),"variable"==jQuery('#lfb_emailValueBubble select[name="valueType"]').val()&&(n=""!=l.val()&&null!=l.val()?"[variable-"+l.val()+"]":""),jQuery(a).summernote("editor.focus"),jQuery(a).summernote("editor.insertText",n),jQuery("#lfb_emailValueBubble").fadeOut()}function lfb_exportLogs(){var e=jQuery("#lfb_panelLogs").attr("data-formid");jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportLogs",formID:e},success:function(e){"error"!=e&&(document.location.href="admin.php?page=lfb_menu&lfb_action=downloadLogs")}})}function lfb_showLayerConditionSave(){var t=new Array;jQuery("#lfb_showLayerConditionsTable .lfb_conditionItem").each(function(){var e=(e=lfb_getConditionValue(jQuery(this).find(".lfb_conditionValue")))&&e.replace(/\'/g,"`");t.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:e})}),lfb_currentLayerTr.find('[name="showConditions"]').val(JSON.stringify(t)),lfb_currentLayerTr.find('[name="showConditionsOperator"]').val(jQuery("#lfb_showLayerOperator").val()),jQuery("#lfb_winLayerShowConditions").fadeOut()}function lfb_editLayerConditions(e){lfb_currentLayerTr=jQuery(e).closest("tr"),jQuery("#lfb_winLayerShowConditions #lfb_showStepOperator").val(lfb_currentLayerTr.find('[name="showConditions"]').val()),jQuery("#lfb_winLayerShowConditions #lfb_showLayerConditionsTable tbody").html(""),""!=lfb_currentLayerTr.find('[name="showConditions"]').val()&&(e=JSON.parse(lfb_currentLayerTr.find('[name="showConditions"]').val()),jQuery.each(e,function(){lfb_addShowLayerInteraction(this)})),jQuery("#lfb_winLayerShowConditions").fadeIn(),setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300),jQuery("body,html").animate({scrollTop:0},200)}function lfb_editShowStepConditions(){jQuery("#lfb_winStepSettings").fadeOut(260);var e=jQuery("#lfb_winStep");if(1==lfb_settings.useVisualBuilder&&(e=jQuery("#lfb_winStepSettings")),jQuery("#lfb_winShowStepConditions #lfb_showStepOperator").val(e.find('[name="showConditionsOperator"]').val()),jQuery("#lfb_winShowStepConditions #lfb_showStepConditionsTable tbody").html(""),""!=e.find('[name="showConditions"]').val())try{var t=JSON.parse(e.find('[name="showConditions"]').val());jQuery.each(t,function(){lfb_addShowStepInteraction(this)})}catch(e){}jQuery("#lfb_winShowStepConditions").fadeIn(),setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300),jQuery("body,html").animate({scrollTop:0},200)}function lfb_editShowConditions(){if(jQuery("#lfb_winShowConditions #lfb_showOperator").val(jQuery("#lfb_winItem").find('[name="showConditionsOperator"]').val()),jQuery("#lfb_winShowConditions #lfb_showConditionsTable tbody").html(""),""!=jQuery("#lfb_winItem").find('[name="showConditions"]').val())try{var e=JSON.parse(jQuery("#lfb_winItem").find('[name="showConditions"]').val());jQuery.each(e,function(){lfb_addShowInteraction(this)})}catch(e){}jQuery("#lfb_winShowConditions").fadeIn(),setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300),jQuery("body,html").animate({scrollTop:0},200)}function lfb_showConditionSave(){var t=new Array;jQuery("#lfb_showConditionsTable .lfb_conditionItem").each(function(){var e=(e=lfb_getConditionValue(jQuery(this).find(".lfb_conditionValue")))&&e.replace(/\'/g,"`");t.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:e})}),jQuery("#lfb_winItem").find('.form-group [name="showConditionsOperator"]').val(jQuery("#lfb_showOperator").val()),jQuery("#lfb_winItem").find('.form-group [name="showConditions"]').val(JSON.stringify(t)),jQuery("#lfb_winShowConditions").fadeOut()}function lfb_showStepConditionSave(){var t=new Array,e=jQuery("#lfb_winStep");1==lfb_settings.useVisualBuilder&&(e=jQuery("#lfb_winStepSettings")),0==jQuery("#lfb_showStepConditionsTable .lfb_conditionItem").length?e.find('[name="useShowConditions"]').parent().bootstrapSwitch("setState",!1):jQuery("#lfb_showStepConditionsTable .lfb_conditionItem").each(function(){var e=(e=lfb_getConditionValue(jQuery(this).find(".lfb_conditionValue")))&&e.replace(/\'/g,"`");t.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:e})}),e.find('[name="showConditionsOperator"]').val(jQuery("#lfb_showStepOperator").val()),e.find('[name="showConditions"]').val(JSON.stringify(t)),jQuery("#lfb_winShowStepConditions").fadeOut(),1==lfb_settings.useVisualBuilder&&jQuery("#lfb_winStepSettings").fadeIn(260)}function lfb_selectPre(e){jQuery(e).select()}function lfb_removeRedirection(e){jQuery('#lfb_redirsTable tr[data-id="'+e+'"]').remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeRedirection",id:e,formID:lfb_currentFormID}})}function lfb_editRedirection(t,e){lfb_currentRedirEdit=t,jQuery("#lfb_winRedirection #lfb_redirOperator").val(jQuery("#lfb_winItem").find('[name="showConditionsOperator"]').val()),jQuery("#lfb_winRedirection #lfb_redirConditionsTable tbody").html(""),jQuery("#lfb_winRedirection #lfb_redirUrl").val(""),0<t&&jQuery.each(lfb_currentForm.redirections,function(){var e;this.id==t&&(jQuery("#lfb_winRedirection #lfb_redirUrl").val(this.url),e=this.conditions.replace(/\\"/g,'"'),e=JSON.parse(e),jQuery.each(e,function(){lfb_addRedirInteraction(this)}))}),jQuery("#lfb_winRedirection").fadeIn(),setTimeout(function(){jQuery("#wpwrap").css({height:jQuery("#lfb_bootstraped").height()+48})},300),jQuery("body,html").animate({scrollTop:0},200)}function lfb_redirSave(){var t=new Array;jQuery("#lfb_winRedirection #lfb_redirUrl").parent().removeClass("has-error"),jQuery("#lfb_winRedirection .lfb_conditionItem").each(function(){var e=(e=jQuery(this).find(".lfb_conditionValue").val())&&e.replace(/\'/g,"`");t.push({interaction:jQuery(this).find(".lfb_conditionSelect").val(),action:jQuery(this).find(".lfb_conditionoperatorSelect").val(),value:e})});var l,e=jQuery("#lfb_winRedirection #lfb_redirUrl").val();e.length<1?jQuery("#lfb_winRedirection #lfb_redirUrl").parent().addClass("has-error"):(l={action:"lfb_saveRedirection",id:lfb_currentRedirEdit,url:e,formID:lfb_currentFormID,conditions:JSON.stringify(t),operator:jQuery("#lfb_redirOperator").val()},lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:l,success:function(e){0==lfb_currentRedirEdit?(l.id=e,lfb_currentForm.redirections.push(l),(e=jQuery('<tr data-id="'+l.id+'"></tr>')).append("<td>"+l.url+"</td>"),e.append('<td style="text-align:right;"><a href="javascript:" data-action="lfb_editRedirection" class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="lfb_removeRedirection" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>'),e.find('a[data-action="lfb_editRedirection"]').on("click",function(){lfb_editRedirection($(this).closest("tr").attr("data-id"))}),e.find('a[data-action="lfb_removeRedirection"]').on("click",function(){lfb_removeRedirection($(this).closest("tr").attr("data-id"))}),jQuery("#lfb_redirsTable tbody").append(e)):jQuery.each(lfb_currentForm.redirections,function(){this.id==lfb_currentRedirEdit&&(this.url=l.url,this.conditions=l.conditions,this.conditionsOperator=l.operator)}),jQuery("#lfb_loader").fadeOut()}})),jQuery("#lfb_winRedirection").fadeOut()}function lfb_editDistanceValue(e){lfb_distanceModeQt=e;var u=-1,c=-1,_=-1,b=-1,m=-1,p=-1,y=-1,h=-1,t="km";if(jQuery("#lfb_distanceDuration").closest("p").show(),9==e){"gmap"==jQuery('#lfb_winItem [name="type"]').val()&&jQuery("#lfb_distanceDuration").closest("p").hide();var l=jQuery('#lfb_winItem [name="distanceQt"]').val();if(-1<l.indexOf("distance_"))for(var a=-1;-1!=(a=l.indexOf("distance_",a+1));)var n=l.indexOf("-",a+9)+1,u=l.substr(a+9,l.indexOf("-",a)-(a+9)),i=l.indexOf("-",n)+1,c=l.substr(n,l.indexOf("-",n)-n),n=l.indexOf("-",i)+1,_=l.substr(i,l.indexOf("-",i)-i),i=l.indexOf("_",n)+1,b=l.substr(n,l.indexOf("_",n)-n),n=l.indexOf("-",i)+1,m=l.substr(i,l.indexOf("-",i)-i),i=l.indexOf("-",n)+1,p=l.substr(n,l.indexOf("-",n)-n),n=l.indexOf("-",i)+1,y=l.substr(i,l.indexOf("-",i)-i),i=l.indexOf("-",n)+1,h=l.substr(n,l.indexOf("_",n)-n),t=l.substr(i,l.indexOf("]",i)-i)}var j=jQuery("#lfb_departAdressItem"),Q=jQuery("#lfb_arrivalAdressItem"),g=jQuery("#lfb_departCityItem"),w=jQuery("#lfb_arrivalCityItem"),v=jQuery("#lfb_departZipItem"),I=jQuery("#lfb_arrivalZipItem"),C=jQuery("#lfb_departCountryItem"),S=jQuery("#lfb_arrivalCountryItem");jQuery("#lfb_distanceType").val(t),j.find("option").remove(),Q.find("option").remove(),g.find("option").remove(),w.find("option").remove(),v.find("option").remove(),I.find("option").remove(),C.find("option").remove(),S.find("option").remove(),j.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),Q.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),g.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),w.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),v.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),I.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),C.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),S.append('<option value="" data-type="">'+lfb_data.texts.Nothing+"</option>"),jQuery.each(lfb_currentForm.steps,function(){var f=this;jQuery.each(this.items,function(){var e,t,l,a,n,i,r,o,s,d=this;"textfield"!=d.type&&"select"!=d.type||(e=d.id,s=o=r=i=n=a=l=t="",d.id==u&&(t="selected"),d.id==c&&(l="selected"),d.id==_&&(a="selected"),d.id==b&&(n="selected"),d.id==m&&(i="selected"),d.id==p&&(r="selected"),d.id==y&&(o="selected"),d.id==h&&(s="selected"),j.append("<option "+t+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),Q.append("<option "+i+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),g.append("<option "+l+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),w.append("<option "+r+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),v.append("<option "+a+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),I.append("<option "+o+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),C.append("<option "+n+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'),S.append("<option "+s+' value="'+e+'" data-type="'+d.type+'">'+f.title+' : " '+d.title+' "</option>'))})});var f=lfb_data.texts.lastStep;jQuery.each(lfb_currentForm.fields,function(){var e,t,l,a,n,i,r,o,s,d=this;"textfield"!=d.type&&"select"!=d.type||(e=d.id,s=o=r=i=n=a=l=t="",d.id==u&&(t="selected"),d.id==c&&(l="selected"),d.id==_&&(a="selected"),d.id==b&&(n="selected"),d.id==m&&(i="selected"),d.id==p&&(r="selected"),d.id==y&&(o="selected"),d.id==h&&(s="selected"),j.append("<option "+t+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),Q.append("<option "+i+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),g.append("<option "+l+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),w.append("<option "+r+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),v.append("<option "+a+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),I.append("<option "+o+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),C.append("<option "+n+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'),S.append("<option "+s+' value="'+e+'" data-type="'+d.type+'">'+f+' : " '+d.title+' "</option>'))}),jQuery("body,html").animate({scrollTop:0},200),jQuery("#lfb_winItem").hide(),jQuery("#lfb_winDistance").fadeIn()}function lfb_addonTdgn(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addonTdgn",code:jQuery("#lfb_winTldAddon").find('input[name="purchaseCode"]').val()},success:function(e){e.trim(),"101"==e?document.location.href=document.location.href+"&lfb_formDesign="+lfb_currentFormID:(jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_winTldAddon").fadeIn(260),jQuery("#lfb_winTldAddon").find('input[name="purchaseCode"]').closest(".form-group").addClass("has-error"))}})}function lfb_saveDistanceValue(){var e="calculation";1==lfb_calculationModeQt?e="calculationQt":2==lfb_calculationModeQt&&(e="variableCalculation");var t="";""!=jQuery("#lfb_departAdressItem").val()&&(t=jQuery("#lfb_departAdressItem").val());var l="";""!=jQuery("#lfb_departCityItem").val()&&(l=jQuery("#lfb_departCityItem").val());var a="";""!=jQuery("#lfb_departCountryItem").val()&&(a=jQuery("#lfb_departCountryItem").val());var n="";""!=jQuery("#lfb_departZipItem").val()&&(n=jQuery("#lfb_departZipItem").val());var i="";""!=jQuery("#lfb_arrivalAdressItem").val()&&(i=jQuery("#lfb_arrivalAdressItem").val());var r="";""!=jQuery("#lfb_arrivalCityItem").val()&&(r=jQuery("#lfb_arrivalCityItem").val());var o="";""!=jQuery("#lfb_arrivalCountryItem").val()&&(o=jQuery("#lfb_arrivalCountryItem").val());var s="";""!=jQuery("#lfb_arrivalZipItem").val()&&(s=jQuery("#lfb_arrivalZipItem").val());var d=jQuery("#lfb_distanceType").val();"duration"==jQuery("#lfb_distanceDuration").val()&&(d=jQuery("#lfb_durationType").val());var f,u,c="[distance_";c+=t+"-"+l+"-"+n+"-"+a+"_"+i+"-"+r+"-"+s+"-"+o+"_"+d,c+="]",""==t&&""==l&&""==a&&""==i&&""==r&&""==o&&""==n&&""==s&&(c=""),9!=lfb_distanceModeQt?jQuery("#lfb_winItem").find('[name="'+e+'"]').next().is(".CodeMirror")?(u=lfb_itemPriceCalculationEditor,"calculationQt"==e?u=lfb_itemCalculationQtEditor:"variableCalculation"==e&&(u=lfb_itemVariableCalculationEditor),u=(f=u.getDoc()).getCursor(),f.replaceRange(c,u),lfb_applyCalculationEditorTooltips(e)):(f=jQuery("#lfb_winItem").find('[name="'+e+'"]').prop("selectionStart"),u=jQuery("#lfb_winItem").find('[name="'+e+'"]').val(),isNaN(f)&&u.length,u=u.substr(0,f)+" "+c+" "+u.substr(f,u.length),jQuery("#lfb_winItem").find('[name="'+e+'"]').val(u)):jQuery("#lfb_winItem").find('[name="distanceQt"]').val(c),jQuery("#lfb_winItem").show(),jQuery("#lfb_winDistance").fadeOut()}function lfb_openFormDesigner(e,t){void 0!==e&&(lfb_tld_targetStepID=e),void 0!==t&&(lfb_tld_targetDomElement=t),lfb_tld_targetDomElement=t,jQuery("#lfb_loader").css({position:"fixed"}),jQuery("body").css({overflow:"hidden"}),setTimeout(function(){jQuery("#lfb_tld_tdgnPanel").fadeIn(),jQuery(".lfb_tld_tdgnBootstrap").fadeIn()},500),lfb_tld_onOpen()}function lfb_closeFormDesigner(){var e;1==lfb_settings.useVisualBuilder&&""!=lfb_tld_targetStepID&&(e="final"==lfb_tld_targetStepID?0:lfb_tld_targetStepID,jQuery("#lfb_stepFrame").attr("src","about:blank"),lfb_editVisualStep(e)),lfb_tld_targetDomElement=lfb_tld_targetStepID="",setTimeout(function(){jQuery("#lfb_tld_tdgnFrame").attr("src","about:blank")},400),jQuery("#lfb_loader").css({position:"absolute"}),jQuery(".lfb_tld_tdgnBootstrap").fadeOut(),jQuery("#lfb_tld_tdgnPanel").fadeOut(),jQuery("body").css({overflow:"initial"})}function lfb_edit_option(e){var t=jQuery(e).closest("tr"),l=t.children("td:eq(0)").html(),a=t.children("td:eq(1)").html();t.children("td:eq(0)").html('<input type="text" id="option_edit_value" class="form-control" value="'+l+'" placeholder="Option value">'),t.children("td:eq(1)").html('<input type="number" id="option_new_price" step="any" class="form-control" value="'+a+'" placeholder="Option price">'),jQuery(e).hide(),jQuery(e).after('<a href="javascript:"  data-action="lfb_edit_saveOption" class="btn btn-primary btn-circle "><span class="glyphicon glyphicon-ok"></span></a>'),jQuery(e).next('a[data-action="lfb_edit_saveOption"]').on("click",function(){lfb_edit_saveOption(this)})}function lfb_edit_saveOption(e){var t=jQuery(e).closest("tr"),l=t.children("td:eq(0)").find("input").val(),a=t.children("td:eq(1)").find("input").val();t.children("td:eq(0)").html(l),t.children("td:eq(1)").html(a),jQuery(e).prev("a").show(),jQuery(e).remove()}function lfb_askDeleteItem(e){jQuery("#lfb_winDeleteItem").attr("data-itemid",e),jQuery("#lfb_winDeleteItem").fadeIn(260)}function lfb_confirmDeleteItem(){lfb_removeItem(jQuery("#lfb_winDeleteItem").attr("data-itemid")),1==lfb_settings.useVisualBuilder&&$("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_onItemDeleted",[jQuery("#lfb_winDeleteItem").attr("data-itemid")]),jQuery("#lfb_winDeleteItem").fadeOut(260)}function lfb_askDeleteStep(e){jQuery("#lfb_winDeleteStep").attr("data-stepid",e),jQuery("#lfb_winDeleteStep").fadeIn(260)}function lfb_confirmDeleteStep(){jQuery("#lfb_winDeleteStep").fadeOut(260),lfb_removeStep(jQuery("#lfb_winDeleteStep").attr("data-stepid"))}function lfb_askDeleteForm(e){lfb_formToDelete=e;e=jQuery('#lfb_panelFormsList table tbody > tr[data-formid="'+e+'"] a.lfb_formListTitle').text();jQuery("#lfb_winDeleteForm #lfb_deleteFormTitle").html(e),jQuery("#lfb_winDeleteForm").fadeIn(260)}function lfb_confirmDeleteForm(){jQuery("#lfb_winDeleteForm").fadeOut(260),lfb_removeForm(lfb_formToDelete)}function lfb_removeLayerImg(e){var t=jQuery(e).closest("tr");t.slideUp(),setTimeout(function(){t.remove()},380)}function lfb_showLayersTable(e){jQuery("#lfb_imageLayersTable tbody").html(""),jQuery.each(e,function(){var e='<input type="hidden" name="image" value="'+this.image+'" />';""!=this.image?e+='<a href="javascript:" class="imageBtn" data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'" ><img src="'+this.image+'" class="lfb_layerImgPreview" /></a>':e+='<a href="javascript:" class="btn btn-circle btn-primary imageBtn"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'"><span class="glyphicon glyphicon-plus"></span></a>';var t=jQuery('<tr data-layerid="'+this.id+'"></tr>');t.append('<td><a href="javascript:" data-action="lfb_editLayerTitle">'+this.title+"</a></td>"),t.append("<td>"+e+"</td>"),t.append('<td style="text-align: right;"><a href="javascript:" data-toggle="tooltip" data-placement="bottom"  title="'+lfb_data.texts.editConditions+'" class="btn btn-circle btn-primary" data-action="lfb_editLayerConditions"><span class="fa fa-eye"></span></a><textarea style="display: none;" name="showConditions">'+this.showConditions+'</textarea><input type="hidden" name="showConditionsOperator" value="'+this.showConditionsOperator+'"/><a href="javascript:" data-action="lfb_duplicateLayer" data-toggle="tooltip" data-placement="bottom"  title="'+lfb_data.texts.duplicate+'"  class="btn btn-default btn-circle"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:" data-toggle="tooltip" data-placement="bottom"  title="'+lfb_data.texts.remove+'" class="btn btn-circle btn-danger" data-action="lfb_removeLayerImg"><span class="glyphicon glyphicon-trash"></span></a></td>'),jQuery("#lfb_imageLayersTable tbody").append(t),t.find('[name="image"]').on("keyup",function(){lfb_onLayerImgChange(this)}),t.find('[data-toggle="tooltip"]').b_tooltip(),t.find('a[data-action="lfb_editLayerTitle"]').on("click",function(){lfb_editLayerTitle(this)}),t.find('a[data-action="lfb_editLayerConditions"]').on("click",function(){lfb_editLayerConditions(this)}),t.find('a[data-action="lfb_duplicateLayer"]').on("click",function(){lfb_duplicateLayer(this)}),t.find('a[data-action="lfb_removeLayerImg"]').on("click",function(){lfb_removeLayerImg(this)}),t.find(".imageBtn").on("click",function(){return lfb_formfield=jQuery(this).prev("input"),tb_show("","media-upload.php?TB_iframe=true"),!1})})}function lfb_duplicateLayer(e){jQuery("#lfb_imageLayersTable .lfb_layerEditField").remove();var t=jQuery(e).closest("tr"),e=t.clone();t.after(e),e.find(".imageBtn").on("click",function(){return lfb_formfield=jQuery(this).prev("input"),tb_show("","media-upload.php?TB_iframe=true"),!1})}function lfb_newLayerImg(){var e=jQuery('<tr data-layerid="0"></tr>');e.append('<td><a href="javascript:" data-action="lfb_editLayerTitle">'+lfb_data.texts.myNewLayer+"</a></td>"),e.append('<td><input type="hidden" name="image" value="" /><a href="javascript:"  data-placement="bottom" data-toggle="tooltip" title="'+lfb_data.texts.edit+'" class="btn btn-circle btn-primary imageBtn"><span class="glyphicon glyphicon-plus"></span></a></td>'),e.find('[name="image"]').on("keyup",function(){lfb_onLayerImgChange(this)}),e.append('<td style="text-align: right;"><a href="javascript:" data-toggle="tooltip"  data-placement="bottom" title="'+lfb_data.texts.editConditions+'" class="btn btn-circle btn-primary" data-action="lfb_editLayerConditions"><span class="fa fa-eye"></span></a><textarea style="display: none;" name="showConditions"></textarea><input type="hidden" name="showConditionsOperator" value=""/><a href="javascript:"  data-placement="bottom" data-toggle="tooltip" title="'+lfb_data.texts.duplicate+'" data-action="lfb_duplicateLayer" class="btn btn-default btn-circle"><span class="glyphicon glyphicon-duplicate"></span></a><a href="javascript:"  data-placement="bottom" data-toggle="tooltip" title="'+lfb_data.texts.remove+'" class="btn btn-circle btn-danger" data-action="lfb_removeLayerImg"><span class="glyphicon glyphicon-trash"></span></a></td>'),e.find('a[data-action="lfb_editLayerTitle"]').on("click",function(){lfb_editLayerTitle(this)}),e.find('a[data-action="lfb_editLayerConditions"]').on("click",function(){lfb_editLayerConditions(this)}),e.find('a[data-action="lfb_duplicateLayer"]').on("click",function(){lfb_duplicateLayer(this)}),e.find('a[data-action="lfb_removeLayerImg"]').on("click",function(){lfb_removeLayerImg(this)}),e.find('[data-toggle="tooltip"]').b_tooltip(),jQuery("#lfb_imageLayersTable tbody").append(e),e.find(".imageBtn").on("click",function(){return lfb_formfield=jQuery(this).prev("input"),tb_show("","media-upload.php?TB_iframe=true"),!1})}function lfb_editLayerTitle(e){0<jQuery("#lfb_imageLayersTable .lfb_layerEditField").length&&(jQuery("#lfb_imageLayersTable .lfb_layerEditField").prev().html(jQuery("#lfb_imageLayersTable .lfb_layerEditField input").val()),jQuery("#lfb_imageLayersTable .lfb_layerEditField").prev().show(),jQuery("#lfb_imageLayersTable .lfb_layerEditField").remove()),jQuery(e).closest("tr").children("td").first().find("a").hide(),jQuery(e).closest("tr").children("td").first().find("a").after('<div class="lfb_layerEditField form-group"><input type="text" class="form-control" value="'+jQuery(e).closest("tr").children("td").first().find("a").text()+'"/></div>'),jQuery("#lfb_imageLayersTable .lfb_layerEditField").on("focusout",function(){jQuery("#lfb_imageLayersTable .lfb_layerEditField").prev().html(jQuery("#lfb_imageLayersTable .lfb_layerEditField input").val()),jQuery("#lfb_imageLayersTable .lfb_layerEditField").prev().show(),jQuery("#lfb_imageLayersTable .lfb_layerEditField").remove()})}function lfb_onLayerImgChange(e){""==jQuery(e).val()?(jQuery(e).closest("td").find("a").addClass("btn"),jQuery(e).closest("td").find("a").addClass("btn-primary"),jQuery(e).closest("td").find("a").addClass("btn-circle"),jQuery(e).closest("td").find("a").html('<span class="glyphicon glyphicon-plus"></span>')):(jQuery(e).closest("td").find("a").removeClass("btn"),jQuery(e).closest("td").find("a").removeClass("btn-primary"),jQuery(e).closest("td").find("a").removeClass("btn-circle"),jQuery(e).closest("td").find("a").html('<img src="'+jQuery(e).val()+'" class="lfb_layerImgPreview" />'))}function lfb_openWinModifyTotal(){1==lfb_currentLogUseSub?jQuery('#lfb_winNewTotal [name="lfb_modifySubTotalField"]').closest(".form-group").slideDown():(jQuery('#lfb_winNewTotal [name="lfb_modifySubTotalField"]').val(0),jQuery('#lfb_winNewTotal [name="lfb_modifySubTotalField"]').closest(".form-group").slideUp()),jQuery("#lfb_winNewTotal").fadeIn(260)}function lfb_confirmModifyTotal(){jQuery("#lfb_winNewTotal").fadeOut(260);var e=parseFloat(jQuery('#lfb_winNewTotal [name="lfb_modifyVATField"]').val()),t=parseFloat(jQuery('#lfb_winNewTotal [name="lfb_modifyTotalField"]').val()),l=parseFloat(jQuery('#lfb_winNewTotal [name="lfb_modifySubTotalField"]').val());isNaN(e)&&(e=0),lfb_currentLogTotal=t;var a,n=lfb_currentLogCurrency+""+lfb_formatPrice((lfb_currentLogSubTotal=l).toFixed(2),lfb_currentFormID),i=lfb_currentLogCurrency+""+lfb_formatPrice(t.toFixed(2),lfb_currentFormID);"left"!=lfb_currentLogCurrencyPosition?(e=lfb_formatPrice(e.toFixed(2),lfb_currentFormID)+""+lfb_currentLogCurrency,n=lfb_formatPrice(l.toFixed(2),lfb_currentFormID)+""+lfb_currentLogCurrency,i=lfb_formatPrice(t.toFixed(2),lfb_currentFormID)+""+lfb_currentLogCurrency):e=lfb_currentLogCurrency+""+lfb_formatPrice(e.toFixed(2),lfb_currentFormID),0<jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_summaryVat").length&&(a=jQuery("#lfb_winLog").find(".lfb_logContainer #lfb_vatRow").find("th").first().css("color"),jQuery(".lfb_logEditorContainer #lfb_summaryVat").html('<span style="color: '+a+' !important;">'+e+"</span>"));e=jQuery(".lfb_logEditorContainer #lfb_summaryTotal span").css("color");0<t&&0<l?jQuery(".lfb_logEditorContainer #lfb_summaryTotal").html('<span style="color: '+e+' !important;">'+n+"</span>"+lfb_currentLogSubTxt+" <br/>+"+i):0<l?jQuery(".lfb_logEditorContainer #lfb_summaryTotal").html('<span style="color: '+e+' !important;">'+n+"</span>"+lfb_currentLogSubTxt):jQuery(".lfb_logEditorContainer #lfb_summaryTotal").html('<span style="color: '+e+' !important;">'+i+"</span>"),jQuery(".lfb_logEditorContainer #lfb_summaryTotal").css("color",jQuery(".lfb_logEditorContainer #lfb_summaryTotal").attr("color"))}function lfb_formatPrice(e,t){var l=(e=e||0).toString();-1<l.indexOf(".")&&(l=parseFloat(e).toFixed(2).toString()),"1"==lfb_currentForm.summary_noDecimals&&(l=Math.round(l).toString());var a=lfb_currentLogDecSep,n=lfb_currentLogThousSep,i=l,r=lfb_currentLogMilSep,e="";return-1<l.indexOf(".")?(i=l.substr(0,l.indexOf(".")),e=l.substr(l.indexOf(".")+1,2),l=l.replace(".",a),1==e.toString().length&&(e=e.toString()+"0"),6<i.length?l=i.substr(0,i.length-6)+r+i.substr(i.length-6,3)+n+i.substr(i.length-3,i.length)+a+e:3<i.length&&(l=i.substr(0,i.length-3)+n+i.substr(i.length-3,i.length)+a+e)):6<i.length?l=i.substr(0,i.length-6)+r+i.substr(i.length-6,3)+n+i.substr(i.length-3,i.length):3<i.length&&(l=i.substr(0,i.length-3)+n+i.substr(i.length-3,i.length)),l}function lfb_resetReference(){jQuery("#lfb_btnResetRef").addClass("disabled"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_resetReference",formID:lfb_currentFormID}})}function lfb_openCalendarPanelFromItem(){lfb_openCalendarsPanel(jQuery('#lfb_winItem [name="calendarID"]').val())}function lfb_openCalendarsPanel(e){null==e&&(e=1),lfb_lastPanel="none"!=jQuery("#lfb_panelLogs").css("display")&&jQuery("#lfb_panelLogs"),lfb_showLoader(),jQuery("#lfb_panelFormsList .tooltip").remove(),jQuery(".lfb_winHeader .tooltip").remove(),jQuery("#lfb_winCalendars").fadeIn(),lfb_currentCalendarEventID=0,jQuery("#lfb_selectCalendar").val(e),jQuery("#lfb_selectCalendar").trigger("change")}function lfb_openCalendarLeftMenu(){lfb_openLeftPanel("lfb_calendarLeftMenu")}function lfb_closeCalendarLeftMenu(){jQuery("#lfb_calendarLeftMenu .lfb_lPanelBody").fadeOut(),jQuery("#lfb_calendarLeftMenu .lfb_lPanelHeader").fadeOut(),setTimeout(function(){jQuery("#lfb_calendar").removeClass("lfb_open"),jQuery("#lfb_calendarLeftMenu").removeClass("lfb_open")},300)}function lfb_editCalendarEvent(e){var t,l=!1;0<e?(jQuery("#lfb_calEventRemindersTable").closest(".form-group").show(),0!=(t=lfb_getCalendarEvent(e))&&(l=!0,lfb_currentCalendarEventID=e,jQuery('#lfb_calendarLeftMenu [name="title"]').val(t.title),jQuery('#lfb_calendarLeftMenu [name="start"]').datetimepicker("setDate",moment(t.start,"YYYY-MM-DD "+lfb_data.timeFormatMoment).toDate()),1==t.allDay?(jQuery('#lfb_calendarLeftMenu [name="end"]').closest(".form-group").slideUp(),jQuery('#lfb_calendarLeftMenu [name="end"]').val(""),jQuery('#lfb_calendarLeftMenu [name="allDay"]').parent().bootstrapSwitch("setState",!0)):(jQuery('#lfb_calendarLeftMenu [name="end"]').datetimepicker("setDate",moment(t.end,"YYYY-MM-DD "+lfb_data.timeFormatMoment).toDate()),jQuery('#lfb_calendarLeftMenu [name="end"]').closest(".form-group").slideDown(),jQuery('#lfb_calendarLeftMenu [name="allDay"]').parent().bootstrapSwitch("setState",!1)),e=!1,1==t.isBusy&&(e=!0),jQuery('#lfb_calendarLeftMenu [name="orderID"]').val(t.orderID),jQuery('#lfb_calendarLeftMenu [name="categoryID"]').val(t.categoryID),jQuery('#lfb_calendarLeftMenu [name="customerID"]').val(t.customerID),jQuery('#lfb_calendarLeftMenu [name="notes"]').val(t.notes),jQuery('#lfb_calendarLeftMenu [name="customerAddress"]').val(t.customerAddress),jQuery('#lfb_calendarLeftMenu [name="customerEmail"]').val(t.customerEmail),jQuery('#lfb_calendarLeftMenu [name="isBusy"]').parent().bootstrapSwitch("setState",e),lfb_generateRemindersTable(t.reminders))):jQuery("#lfb_calEventRemindersTable").closest(".form-group").hide(),l||(lfb_currentCalendarEventID=0,jQuery('#lfb_calendarLeftMenu [name="title"]').val(""),jQuery('#lfb_calendarLeftMenu [name="start"]').val(""),jQuery('#lfb_calendarLeftMenu [name="end"]').val(""),jQuery('#lfb_calendarLeftMenu [name="allDay"]').parent().bootstrapSwitch("setState",!1),jQuery('#lfb_calendarLeftMenu [name="orderID"]').val(""),jQuery('#lfb_calendarLeftMenu [name="notes"]').val(""),jQuery('#lfb_calendarLeftMenu [name="categoryID"]').val(jQuery('#lfb_calendarLeftMenu [name="categoryID"] option').first().attr("value")),jQuery('#lfb_calendarLeftMenu [name="customerID"]').val(jQuery('#lfb_calendarLeftMenu [name="customerID"] option').first().attr("value")),jQuery('#lfb_calendarLeftMenu [name="customerAddress"]').val(""),jQuery('#lfb_calendarLeftMenu [name="customerEmail"]').val(""),jQuery('#lfb_calendarLeftMenu [name="isBusy"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_calendarLeftMenu #lfb_calEventRemindersTable tbody").html("")),jQuery("html,body").animate({scrollTop:0},250),lfb_updatelLeftPanels(),lfb_openCalendarLeftMenu()}function lfb_generateRemindersTable(e){var t=0==lfb_currentCalendarEventID?"#lfb_calEventRemindersTableDefault":"#lfb_calendarLeftMenu #lfb_calEventRemindersTable";jQuery(t).find("tbody").html(""),jQuery.each(e,function(){lfb_data.texts.days;"hours"==this.delayType?lfb_data.texts.hours:"weeks"==this.delayType?lfb_data.texts.weeks:"months"==this.delayType&&lfb_data.texts.months;var e=jQuery('<tr data-id="'+this.id+'"><td>'+this.delayValue+" "+this.delayType+'</td><td class="lfb_calReminderActionTd"><a href="javascript:" data-action="lfb_editCalendarReminder" class="btn btn-primary  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="lfb_deleteCalendarReminder" class="btn btn-danger btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>');e.find('a[data-action="lfb_editCalendarReminder"]').on("click",function(){lfb_editCalendarReminder($(this).closest("tr").attr("data-id"))}),e.find('a[data-action="lfb_deleteCalendarReminder"]').on("click",function(){lfb_deleteCalendarReminder($(this).closest("tr").attr("data-id"))}),jQuery(t).find("tbody").append(e)}),0==e.length&&jQuery(t).find("tbody").html('<tr><td colspan="2">'+lfb_data.texts.noReminders+"</td></tr>")}function lfb_calEventFullDayChange(){jQuery('#lfb_calendarLeftMenu [name="allDay"]').is(":checked")?jQuery('#lfb_calendarLeftMenu [name="end"]').closest(".form-group").slideUp():jQuery('#lfb_calendarLeftMenu [name="end"]').closest(".form-group").slideDown()}function lfb_calEventStartDateChange(){jQuery('#lfb_calendarLeftMenu [name="allDay"]').is(":checked")||(""==jQuery('#lfb_calendarLeftMenu [name="end"]').val()||moment(jQuery('#lfb_calendarLeftMenu [name="end"]').datetimepicker("getDate"))<moment(jQuery('#lfb_calendarLeftMenu [name="start"]').datetimepicker("getDate")))&&jQuery('#lfb_calendarLeftMenu [name="end"]').datetimepicker("setDate",moment(moment(jQuery('#lfb_calendarLeftMenu [name="start"]').datetimepicker("getDate")).add(1,"hours"),"YYYY-MM-DD  HH:mm").toDate())}function lfb_calEventCategoryIDChange(){1==lfb_getCalendarCat(jQuery('#lfb_calendarLeftMenu [name="categoryID"]').val()).isBusy?jQuery('#lfb_calendarLeftMenu [name="isBusy"]').parent().bootstrapSwitch("setState",!0):jQuery('#lfb_calendarLeftMenu [name="isBusy"]').parent().bootstrapSwitch("setState",!1)}function lfb_selectCalendarChange(){1<jQuery("#lfb_selectCalendar").val()?jQuery("#lfb_btnDeleteCalendar").removeAttr("disabled"):jQuery("#lfb_btnDeleteCalendar").attr("disabled","disabled"),lfb_closeAllLeftPanels(),lfb_currentCalendarEventID=0,lfb_currentCalendarID=jQuery("#lfb_selectCalendar").val(),jQuery("#lfb_calendar").fullCalendar("refetchEvents")}function lfb_saveCalendarEvent(){var l=jQuery('#lfb_calendarLeftMenu [name="title"]').val(),a=moment(jQuery('#lfb_calendarLeftMenu [name="start"]').datetimepicker("getDate")).format("YYYY-MM-DD HH:mm:ss"),n=moment(jQuery('#lfb_calendarLeftMenu [name="end"]').datetimepicker("getDate")).format("YYYY-MM-DD HH:mm:ss"),i=jQuery('#lfb_calendarLeftMenu [name="customerEmail"]').val(),r=jQuery('#lfb_calendarLeftMenu [name="customerAddress"]').val(),o=jQuery('#lfb_calendarLeftMenu [name="notes"]').val(),s=jQuery('#lfb_calendarLeftMenu [name="categoryID"]').val(),d=0,f=0,e=!1;jQuery('#lfb_calendarLeftMenu [name="title"]').closest(".form-group").removeClass("has-error"),jQuery('#lfb_calendarLeftMenu [name="end"]').closest(".form-group").removeClass("has-error"),0==l.length&&(e=!0,jQuery('#lfb_calendarLeftMenu [name="title"]').closest(".form-group").addClass("has-error")),jQuery('#lfb_calendarLeftMenu [name="allDay"]').is(":checked")&&(d=1),jQuery('#lfb_calendarLeftMenu [name="isBusy"]').is(":checked")&&(f=1),d||""!=jQuery('#lfb_calendarLeftMenu [name="end"]').val()||(e=!0,jQuery('#lfb_calendarLeftMenu [name="end"]').closest(".form-group").addClass("has-error")),e||(jQuery("body,html").animate({scrollTop:0},200),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCalendarEvent",calendarID:lfb_currentCalendarID,eventID:lfb_currentCalendarEventID,title:l,allDay:d,orderID:jQuery('#lfb_calendarLeftMenu [name="orderID"]').val(),start:a,end:n,customerEmail:i,customerAddress:r,categoryID:s,notes:o,isBusy:f},success:function(e){var t={calendarID:lfb_currentCalendarID,eventID:e,title:l,allDay:d,orderID:jQuery('#lfb_calendarLeftMenu [name="orderID"]').val(),start:a,end:n,customerEmail:i,customerAddress:r,notes:o,isBusy:f,categoryID:s,reminders:new Array};0==lfb_currentCalendarEventID?(lfb_currentCalendarEvents.push(t),lfb_currentCalendarEventID=e):lfb_getCalendarEvent(e),jQuery("#lfb_calendar").fullCalendar("refetchEvents"),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_calEventRemindersTable").closest(".form-group").slideDown()}}))}function lfb_addCalendarEvent(e,t){lfb_editCalendarEvent(0),jQuery('#lfb_calendarLeftMenu [name="start"]').datetimepicker("setDate",new Date(moment.utc(e).format("YYYY-MM-DD "+lfb_data.timeFormatMoment)));e=e.toDate();e.setTime(e.getTime()+36e5),jQuery('#lfb_calendarLeftMenu [name="end"]').datetimepicker("setDate",new Date(moment.utc(e).format("YYYY-MM-DD "+lfb_data.timeFormatMoment)))}function lfb_confirmDeleteCalendarEvent(){jQuery("body,html").animate({scrollTop:0},200),jQuery("#lfb_winDeleteCalendarEvent").fadeOut(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_deleteCalendarEvent",eventID:lfb_currentCalendarEventID},success:function(){jQuery("#lfb_calendar").fullCalendar("refetchEvents"),lfb_currentCalendarEventID=0,lfb_closeAllLeftPanels()}})}function lfb_deleteCalendarEvent(){jQuery("#lfb_winDeleteCalendarEvent").fadeIn(260)}function lfb_addNewCalendar(){jQuery("#lfb_winEditCalendar").attr("data-calendarid",0),jQuery("#lfb_winEditCalendar").fadeIn(260)}function lfb_addEditCalendar(){jQuery("#lfb_winEditCalendar").attr("data-calendarid",lfb_currentCalendarID),jQuery("#lfb_winEditCalendar").fadeIn(260)}function lfb_saveCalendar(){var t=jQuery("#lfb_winEditCalendar").attr("data-calendarid"),l=jQuery('#lfb_winEditCalendar [name="title"]').val();jQuery('#lfb_winEditCalendar [name="title"]').closest(".form-group").removeClass("has-error"),0==l.length?jQuery('#lfb_winEditCalendar [name="title"]').closest(".form-group").addClass("has-error"):(jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCalendar",calendarID:t,title:l},success:function(e){0<t?jQuery('#lfb_selectCalendar option[value="'+e+'"]').html(rep):(jQuery("#lfb_selectCalendar").append('<option value="'+e+'">'+l+"</option>"),jQuery("#lfb_winItem").find('[name="calendarID"]').append('<option value="'+e+'">'+l+"</option>"),jQuery("#lfb_selectCalendar").val(e),jQuery("#lfb_selectCalendar").trigger("change"))}}),jQuery("#lfb_winEditCalendar").fadeOut(260))}function lfb_askDeleteCalendar(){jQuery("#lfb_winDeleteCalendar").fadeIn(260)}function lfb_deleteCalendar(){jQuery("#lfb_winDeleteCalendar").fadeOut(260),1<lfb_currentCalendarID&&jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_deleteCalendar",calendarID:lfb_currentCalendarID},success:function(e){e=e.trim(),jQuery("#lfb_winItem").find('[name="calendarID"] option[value="'+lfb_currentCalendarID+'"]').remove(),jQuery('#lfb_selectCalendar option[value="'+lfb_currentCalendarID+'"]').remove(),lfb_currentCalendarID=1,jQuery("#lfb_selectCalendar").val(1),jQuery("#lfb_selectCalendar").trigger("change"),jQuery("#lfb_calendar").fullCalendar("refetchEvents")}})}function lfb_getCalendarEvent(e){var t=!1;return jQuery.each(lfb_currentCalendarEvents,function(){this.id==e&&(t=this)}),t}function lfb_btnCalEventViewCustomerClick(){var e=parseInt(jQuery('#lfb_calendarLeftMenu [name="customerID"]').val());0<e&&(lfb_showLoader(),lfb_editCustomer(e),jQuery("#lfb_winCalendars").fadeOut(),jQuery("#lfb_loader").fadeOut())}function lfb_btnCalEventViewOrderClick(){var e=parseInt(jQuery('#lfb_calendarLeftMenu [name="orderID"]').val());0<e&&(lfb_lastPanel=jQuery("#lfb_winCalendars"),lfb_showLoader(),lfb_loadLog(e,!1),jQuery("#lfb_loader").fadeOut())}function lfb_calEventCustomerIDChange(){var e=parseInt(jQuery('#lfb_calendarLeftMenu [name="customerID"]').val());0==e||0!=jQuery('#lfb_calendarLeftMenu [name="orderID"]').val()&&jQuery('#lfb_calendarLeftMenu [name="orderID"] option:selected').attr("data-customerid")!=e&&jQuery('#lfb_calendarLeftMenu [name="orderID"]').val(0)}function lfb_calEventOrderIDChange(){var e;0==parseInt(jQuery('#lfb_calendarLeftMenu [name="orderID"]').val())?jQuery('#lfb_calendarLeftMenu [name="orderID"]').parent().find(".btn-circle").attr("disabled","disabled"):(jQuery('#lfb_calendarLeftMenu [name="orderID"]').parent().find(".btn-circle").removeAttr("disabled"),e=jQuery('#lfb_calendarLeftMenu [name="orderID"] option:selected').attr("data-customerid"),jQuery('#lfb_calendarLeftMenu [name="customerID"]').val(e))}function lfb_getCalendarReminder(e,t){var l=!1;return 0<t?jQuery.each(lfb_getCalendarEvent(t).reminders,function(){this.id==e&&(l=this)}):jQuery.each(lfb_currentCalendarDefaultReminders,function(){this.id==e&&(l=this)}),l}function lfb_editCalendarReminder(e){var t=lfb_getCalendarReminder(e,lfb_currentCalendarEventID);jQuery("#lfb_winEditReminder").attr("data-remininderid",e),0<e?(jQuery('#lfb_winEditReminder [name="delayValue"]').val(t.delayValue),jQuery('#lfb_winEditReminder [name="delayType"]').val(t.delayType),jQuery('#lfb_winEditReminder [name="title"]').val(t.title),jQuery('#lfb_winEditReminder [name="email"]').val(t.email),jQuery("#calEventContent").code(t.content)):(jQuery('#lfb_winEditReminder [name="email"]').val(jQuery('#lfb_formFields [name="email"]').val()),jQuery('#lfb_winEditReminder [name="delayValue"]').val(2),jQuery('#lfb_winEditReminder [name="delayType"]').val("hours"),jQuery('#lfb_winEditReminder [name="title"]').val(lfb_data.texts.newEventSubject),jQuery("#calEventContent").code(lfb_data.texts.newEventContent.replace("[date]","<strong>[date]</strong>"))),jQuery("#lfb_winEditReminder").attr("data-reminderid",e),jQuery("#lfb_winEditReminder").fadeIn(260)}function lfb_saveCalendarReminder(){var l=jQuery('#lfb_winEditReminder [name="delayType"]').val(),a=jQuery('#lfb_winEditReminder [name="delayValue"]').val(),n=jQuery('#lfb_winEditReminder [name="title"]').val(),e=jQuery('#lfb_winEditReminder [name="email"]').val(),i=jQuery("#calEventContent").code(),r=jQuery("#lfb_winEditReminder").attr("data-remininderid");jQuery('#lfb_winEditReminder [name="delayValue"]').closest(".form-group").removeClass("has-error"),jQuery('#lfb_winEditReminder [name="title"]').closest(".form-group").removeClass("has-error");var t=!1;""==a&&(t=!0,jQuery('#lfb_winEditReminder [name="delayValue"]').closest(".form-group").addClass("has-error")),""==n&&(t=!0,jQuery('#lfb_winEditReminder [name="title"]').closest(".form-group").addClass("has-error")),lfb_checkEmail(e)||(t=!0,jQuery('#lfb_winEditReminder [name="email"]').closest(".form-group").addClass("has-error")),t||(jQuery("#lfb_winEditReminder").fadeOut(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCalendarReminder",calendarID:lfb_currentCalendarID,eventID:lfb_currentCalendarEventID,reminderID:r,delayValue:a,delayType:l,email:e,title:n,content:i},success:function(e){e=e.trim();var t={};0<r&&(t=lfb_getCalendarReminder(r,lfb_currentCalendarEventID)),t.delayType=l,t.delayValue=a,t.title=n,t.content=i,0==r&&(t.id=e,0<lfb_currentCalendarEventID?(lfb_getCalendarEvent(lfb_currentCalendarEventID).reminders.push(t),lfb_editCalendarEvent(lfb_currentCalendarEventID)):(lfb_currentCalendarDefaultReminders.push(t),lfb_openDefaultReminders())),jQuery("#lfb_loader").fadeOut()}}))}function lfb_deleteCalendarReminder(t){var e;0<lfb_currentCalendarEventID?(e=lfb_getCalendarEvent(lfb_currentCalendarEventID)).reminders=jQuery.grep(e.reminders,function(e){return e.id!=t}):lfb_currentCalendarDefaultReminders=jQuery.grep(lfb_currentCalendarDefaultReminders,function(e){return e.id!=t});var l=0==lfb_currentCalendarEventID?"#lfb_calEventRemindersTableDefault":"#lfb_calendarLeftMenu #lfb_calEventRemindersTable";0==jQuery(l).find("tbody").children().length&&jQuery(l).find("tbody").html('<tr><td colspan="2">'+lfb_data.texts.noReminders+"</td></tr>"),jQuery(l).find('tr[data-id="'+t+'"]').slideUp(),setTimeout(function(){jQuery(l).find('tr[data-id="'+t+'"]').remove()},300),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_deleteCalendarReminder",reminderID:t},success:function(e){}})}function lfb_calendarEventViewGmap(){var e=jQuery('#lfb_calendarLeftMenu [name="customerAddress"]').val();0<e.length&&(e="https://www.google.com/maps/place/"+encodeURIComponent(e),window.open(e,"_blank").focus())}function lfb_openLeftPanel(e){"lfb_calendarLeftMenu"!=e&&(lfb_currentCalendarEventID=0),jQuery("#"+e).parent().find(".lfb_lPanelMain").addClass("lfb_open"),jQuery("#"+e).addClass("lfb_open"),jQuery("#"+e).parent().find(".lfb_lPanelLeft").not("#"+e).find(".lfb_lPanelBody,.lfb_lPanelHeader").fadeOut(),setTimeout(function(){jQuery("#"+e).parent().find(".lfb_lPanelLeft").not("#"+e).removeClass("lfb_open"),jQuery("#"+e).find(".lfb_lPanelBody,.lfb_lPanelHeader").fadeIn()},300)}function lfb_closeLeftPanel(e){lfb_currentCalendarEventID=0,jQuery("#"+e).find(".lfb_lPanelBody,.lfb_lPanelHeader").fadeOut(),setTimeout(function(){jQuery("#"+e).parent().find(".lfb_lPanelMain").removeClass("lfb_open"),jQuery("#"+e).removeClass("lfb_open")},300)}function lfb_closeAllLeftPanels(){jQuery(".lfb_lPanelLeft.lfb_open").each(function(){lfb_closeLeftPanel(jQuery(this).attr("id"))})}function lfb_openDefaultReminders(){lfb_currentCalendarEventID=0,lfb_generateRemindersTable(lfb_currentCalendarDefaultReminders),lfb_openLeftPanel("lfb_calendarDefaultReminders")}function lfb_closeDefaultReminders(){jQuery("#lfb_calendarDefaultReminders .lfb_lPanelBody").fadeOut(),jQuery("#lfb_calendarDefaultReminders .lfb_lPanelHeader").fadeOut(),setTimeout(function(){jQuery("#lfb_calendar").removeClass("lfb_open"),jQuery("#lfb_calendarDefaultReminders").removeClass("lfb_open")},300)}function lfb_openEventsCategories(){lfb_openLeftPanel("lfb_calendarEventsCategories")}function lfb_closeEventsCategories(){jQuery("#lfb_calendarEventsCategories .lfb_lPanelBody").fadeOut(),jQuery("#lfb_calendarEventsCategories .lfb_lPanelHeader").fadeOut(),setTimeout(function(){jQuery("#lfb_calendar").removeClass("lfb_open"),jQuery("#lfb_calendarEventsCategories").removeClass("lfb_open")},300)}function lfb_editCalendarCat(e){var t;0<e?0!=(t=lfb_getCalendarCat(e))&&(jQuery("#lfb_winEditCalendarCat").find('[name="title"]').val(t.title),jQuery("#lfb_winEditCalendarCat").find('[name="color"]').val(t.color),t.isBusy?jQuery('#lfb_calendarLeftMenu [name="isBusy"]').parent().bootstrapSwitch("setState",!0):jQuery('#lfb_calendarLeftMenu [name="isBusy"]').parent().bootstrapSwitch("setState",!1)):(jQuery("#lfb_winEditCalendarCat").find('[name="title"]').val(""),jQuery("#lfb_winEditCalendarCat").find('[name="color"]').val("#f39c12")),jQuery("#lfb_winEditCalendarCat").find(".lfb_colorPreview").css("backgroundColor",jQuery("#lfb_winEditCalendarCat").find('[name="color"]').val()),jQuery("#lfb_winEditCalendarCat").attr("data-id",e),jQuery("#lfb_winEditCalendarCat").fadeIn(260)}function lfb_saveCalendarCat(){var e=jQuery("#lfb_winEditCalendarCat").attr("data-id"),t=jQuery("#lfb_winEditCalendarCat").find('[name="title"]').val(),l=jQuery("#lfb_winEditCalendarCat").find('[name="color"]').val(),a=!1;""==t&&(a=!0,jQuery('#lfb_winEditCalendarCat [name="title"]').closest(".form-group").addClass("has-error")),a||(jQuery("#lfb_winEditCalendarCat").fadeOut(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCalendarCat",calendarID:lfb_currentCalendarID,catID:e,title:t,color:l},success:function(){jQuery("#lfb_calendar").fullCalendar("refetchEvents"),jQuery("#lfb_loader").fadeOut()}}))}function lfb_generateCalendarCatsSelect(){jQuery("#lfb_calendarLeftMenu").find('[name="categoryID"]').html(""),jQuery.each(lfb_currentCalendarCats,function(){jQuery("#lfb_calendarLeftMenu").find('[name="categoryID"]').append('<option value="'+this.id+'">'+this.title+"</option>")})}function lfb_generateCalendarCatsTable(){jQuery("#lfb_calendarEventsCatsTable").find("tbody").html(""),jQuery.each(lfb_currentCalendarCats,function(){var e="";1==this.id&&(e="display:none;");e=jQuery('<tr data-id="'+this.id+'"><td>'+this.title+'</td><td><div class="lfb_calendarCatColor" style="background-color: '+this.color+';"></div></td><td class="lfb_calReminderActionTd"><a href="javascript:" data-action="lfb_editCalendarCat" class="btn btn-primary  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" style="'+e+'" data-action="lfb_deleteCalendarCat" class="btn btn-danger btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td></tr>');e.find('a[data-action="lfb_editCalendarCat"]').on("click",function(){lfb_editCalendarCat($(this).closest("tr").attr("data-id"))}),e.find('a[data-action="lfb_deleteCalendarCat"]').on("click",function(){lfb_deleteCalendarCat($(this).closest("tr").attr("data-id"))}),jQuery("#lfb_calendarEventsCatsTable").find("tbody").append(e)}),0==lfb_currentCalendarCats.length&&jQuery("#lfb_calendarEventsCatsTable").find("tbody").html('<tr><td colspan="3">'+lfb_data.texts.noCategories+"</td></tr>")}function lfb_confirmDeleteCalendarCat(){lfb_showLoader();var e=jQuery("#lfb_winDeleteCalendarCat").attr("data-id");jQuery("#lfb_winDeleteCalendarCat").fadeOut(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_deleteCalendarCat",catID:e},success:function(){jQuery("#lfb_calendar").fullCalendar("refetchEvents")}})}function lfb_deleteCalendarCat(e){jQuery("#lfb_winDeleteCalendarCat").attr("data-id",e),jQuery("#lfb_winDeleteCalendarCat").fadeIn(260)}function lfb_getCalendarCat(e){var t=!1;return jQuery.each(lfb_currentCalendarCats,function(){this.id==e&&(t=this)}),t}function lfb_updateCalendarDaysWeekTable(){jQuery("#lfb_calendarDaysWeekTable tr[data-day]").find('input[type="checkbox"]').parent().bootstrapSwitch("setState",!0),jQuery.each(lfb_currentCalendarDaysWeek,function(e){jQuery('#lfb_calendarDaysWeekTable tr[data-day="'+this+'"]').find('input[type="checkbox"]').parent().bootstrapSwitch("setState",!1)})}function lfb_updateCalendarHoursEnabledTable(){jQuery("#lfb_calendarHoursEnabledTable tr[data-hour]").find('input[type="checkbox"]').parent().bootstrapSwitch("setState",!0),jQuery.each(lfb_currentCalendarDisabledHours,function(e){jQuery('#lfb_calendarHoursEnabledTable tr[data-hour="'+this+'"]').find('input[type="checkbox"]').parent().bootstrapSwitch("setState",!1)})}function lfb_saveCalendarHoursDisabled(){for(var e="",t=0;t<24;t++)jQuery('#lfb_calendarHoursEnabledTable tr[data-hour="'+t+'"]').find('input[type="checkbox"]').is(":checked")||(e+=t+",");0<e.length&&(e=e.substr(0,e.length-1)),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCalendarHoursDisabled",calendarID:lfb_currentCalendarID,hours:e},success:function(){jQuery("#lfb_calendar").fullCalendar("refetchEvents"),jQuery("#lfb_loader").fadeOut()}})}function lfb_saveCalendarDaysWeek(){if(0<jQuery("#lfb_calendarDaysWeekTable tr[data-day]").find('input[type="checkbox"]:checked').length){for(var e="",t=0;t<7;t++)jQuery('#lfb_calendarDaysWeekTable tr[data-day="'+t+'"]').find('input[type="checkbox"]').is(":checked")||(e+=t+",");0<e.length&&(e=e.substr(0,e.length-1)),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCalendarDaysWeek",calendarID:lfb_currentCalendarID,days:e},success:function(){jQuery("#lfb_calendar").fullCalendar("refetchEvents"),jQuery("#lfb_loader").fadeOut()}})}}function lfb_initWeeksDaysText(){jQuery("#lfb_calendarDaysWeekTable tr[data-day]").each(function(){void 0!==jQuery.fn.datetimepicker&&void 0!==jQuery.fn.datetimepicker.dates&&void 0!==jQuery.fn.datetimepicker.dates[lfb_data.locale]&&jQuery(this).find("td").first().html(jQuery.fn.datetimepicker.dates[lfb_data.locale].days[parseInt(jQuery(this).attr("data-day"))])}),void 0!==jQuery.fn.datetimepicker&&void 0!==jQuery.fn.datetimepicker.dates&&void 0!==jQuery.fn.datetimepicker.dates[lfb_data.locale]&&1==jQuery.fn.datetimepicker.dates[lfb_data.locale].weekStart&&jQuery('#lfb_calendarDaysWeekTable tr[data-day="0"]').detach().appendTo("#lfb_calendarDaysWeekTable tbody")}function lfb_deleteOrdersSelection(){var e="";jQuery('#lfb_logsTable tr[data-logid] [name="tableSelector"]:checked').each(function(){e+=jQuery(this).closest("tr").attr("data-logid")+","}),0<e.length&&(lfb_showLoader(),e=e.substr(0,e.length-1),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_removeLogs",logsIDs:e},success:function(){lfb_loadLogs(jQuery("#lfb_panelLogs").attr("data-formid"))}}))}function lfb_exportOrdersSelection(){var e,t="";jQuery('#lfb_logsTable tr[data-logid] [name="tableSelector"]:checked').each(function(){t+=jQuery(this).closest("tr").attr("data-logid")+","}),0<t.length&&(e=jQuery("#lfb_panelLogs").attr("data-formid"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_exportLogs",formID:e,logsIDs:t},success:function(e){"error"!=e&&(jQuery("#lfb_loader").fadeOut(),document.location.href="admin.php?page=lfb_menu&lfb_action=downloadLogs")}}))}function lfb_saveCustomerDataSettings(){var e=!1;0==jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataWarningText"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataWarningText"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataDownloadLink"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataDownloadLink"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataDeleteLink"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataDeleteLink"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataLeaveLink"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataLeaveLink"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="customersDataDeleteDelay"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="customersDataDeleteDelay"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataTitle"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataTitle"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelEmail"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelEmail"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelPass"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelPass"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelModify"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelModify"]').closest(".form-group").addClass("has-error")),0==jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataEditLink"]').val().length&&(e=!0,jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataEditLink"]').closest(".form-group").addClass("has-error")),e||(jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveCustomerDataSettings",txtCustomersDataWarningText:jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataWarningText"]').val(),txtCustomersDataDownloadLink:jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataDownloadLink"]').val(),txtCustomersDataDeleteLink:jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataDeleteLink"]').val(),txtCustomersDataLeaveLink:jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataLeaveLink"]').val(),customersDataDeleteDelay:jQuery("#lfb_winCustDataSettings").find('[name="customersDataDeleteDelay"]').val(),txtCustomersDataTitle:jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataTitle"]').val(),customersDataLabelEmail:jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelEmail"]').val(),customersDataLabelPass:jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelPass"]').val(),customersDataLabelModify:jQuery("#lfb_winCustDataSettings").find('[name="customersDataLabelModify"]').val(),txtCustomersDataEditLink:jQuery("#lfb_winCustDataSettings").find('[name="txtCustomersDataEditLink"]').val()}}),jQuery("#lfb_winCustDataSettings").fadeOut(260))}function generateShortcode(){var e=jQuery("#lfb_winShortcode").find("span[data-displayid]").html(),t=jQuery('#lfb_winShortcode [name="startStep"]').val(),l="";t&&!jQuery('#lfb_winShortcode [name="startStep"] :selected').is(".default")&&(l=' step="'+t+'"'),"fullscreen"==jQuery('#lfb_winShortcode [name="display"]').val()?(jQuery("#lfb_shortcodeField").val('[estimation_form form_id="'+e+'" fullscreen="true"'+l+"]"),jQuery('#lfb_winShortcode [data-display="popup"]').slideUp()):"popup"==jQuery('#lfb_winShortcode [name="display"]').val()?(jQuery("#lfb_shortcodeField").val('[estimation_form form_id="'+e+'" popup="true"'+l+"]"),jQuery("#lfb_shortcodePopup").val('<a href="#" class="open-estimation-form form-'+e+'">Open Form</a>'),jQuery('#lfb_winShortcode [data-display="popup"]').slideDown()):(jQuery("#lfb_shortcodeField").val('[estimation_form form_id="'+e+'"'+l+"]"),jQuery('#lfb_winShortcode [data-display="popup"]').slideUp())}function lfb_linkLightStep(e){jQuery('#lfb_stepsContainer .lfb_stepBloc[data-stepid="'+e+'"]').addClass("linkLight"),setTimeout(function(){jQuery('#lfb_stepsContainer .lfb_stepBloc[data-stepid="'+e+'"]').removeClass("linkLight")},2e3),lfb_lastCreatedStepID=-1}function lfb_viewFormVariables(){jQuery("#lfb_panelVariables").show(),jQuery("#lfb_panelPreview").hide()}function lfb_closeFormVariables(){jQuery("#lfb_panelVariables").hide(),jQuery("#lfb_panelPreview").show()}function lfb_closeLogs(){jQuery("#lfb_panelLogs").hide(),jQuery("#lfb_panelPreview").show(),setTimeout(function(){jQuery(window).trigger("resize")},500)}function lfb_addNewVariable(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_addNewVariable",formID:lfb_currentFormID},success:function(e){e=e.trim(),lfb_currentForm.variables.push({id:e,title:lfb_data.texts["My Variable"],type:"integer",sendAsGet:0,defaultValue:0}),lfb_updateFormVariablesTable(),lfb_editVariable(e)}})}function lfb_getVariable(e){for(var t=!1,l=0;l<lfb_currentForm.variables.length;l++)lfb_currentForm.variables[l].id==e&&(t=lfb_currentForm.variables[l]);return t}function lfb_editVariable(e){var t=lfb_getVariable(e);t&&(jQuery("#lfb_winEditVariable").data("variableID",e),jQuery("#lfb_winEditVariable").find('[name="title"]').val(t.title),jQuery("#lfb_winEditVariable").find('[name="type"]').val(t.type),jQuery("#lfb_winEditVariable").find('[name="defaultValue"]').val(t.defaultValue),jQuery('#lfb_winEditVariable [name="sendAsGet"]').removeAttr("checked"),jQuery('#lfb_winEditVariable [name="sendAsGet"]').parent().bootstrapSwitch("setState",!1),1==t.sendAsGet&&jQuery('#lfb_winEditVariable [name="sendAsGet"]').parent().bootstrapSwitch("setState",!0),jQuery("#lfb_winEditVariable").fadeIn(260)),jQuery("#lfb_loader").fadeOut()}function lfb_deleteVariable(e){var t=lfb_getVariable(e);t&&(jQuery("#modal_deleteVariable").data("variableID",e),jQuery("#modal_deleteVariable .modal-body").html(jQuery("#modal_deleteVariable .modal-body").html().replace("[variableName]",t.title)),jQuery("#modal_deleteVariable").fadeIn(260))}function lfb_confirmDeleteVariable(){var e=jQuery("#modal_deleteVariable").data("variableID");jQuery("#modal_deleteVariable").fadeOut(260),jQuery('#lfb_variablesTable tbody tr[data-id="'+e+'"]').remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_deleteVariable",variableID:e},success:function(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_loadForm",formID:lfb_currentFormID},success:function(e){e=JSON.parse(e),lfb_params=(lfb_currentForm=e).params,lfb_steps=e.steps,jQuery.each(e.links,function(e){var t=this;t.originID=jQuery('.lfb_stepBloc[data-stepid="'+t.originID+'"]').attr("id"),t.destinationID=jQuery('.lfb_stepBloc[data-stepid="'+t.destinationID+'"]').attr("id"),t.conditions=JSON.parse(t.conditions),lfb_links[e]=t}),lfb_repositionLinks(),lfb_updateLastStepTab()}})}})}function lfb_saveVariable(){var e=jQuery("#lfb_winEditVariable").data("variableID"),t=jQuery('#lfb_winEditVariable [name="title"]').val(),l=jQuery('#lfb_winEditVariable [name="type"]').val(),a=jQuery('#lfb_winEditVariable [name="defaultValue"]').val(),n=0;jQuery('#lfb_winEditVariable [name="sendAsGet"]').is(":checked")&&(n=1);var i=!1;jQuery("#lfb_winEditVariable .has-error").removeClass("has-error"),t.length<2&&(i=!0,jQuery('#lfb_winEditVariable [name="title"]').closest(".form-group").addClass("has-error")),i||(i=lfb_getVariable(e))&&(i.title=t,i.type=l,i.sendAsGet=n,i.defaultValue=a,lfb_updateFormVariablesTable(),jQuery("#lfb_winEditVariable").fadeOut(260),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_saveVariable",variableID:e,title:t,type:l,defaultValue:a,sendAsGet:n},success:function(){}}))}function lfb_updateFormVariablesTable(){jQuery("#lfb_variablesTable tbody").html(""),jQuery('#lfb_winItem [name="modifiedVariableID"] option:not([value="0"]),#lfb_emailValueBubble select[name="variableID"] option').remove(),jQuery.each(lfb_currentForm.variables,function(e){var t=jQuery('<tr data-id="'+this.id+'"></tr>');t.append("<td>"+this.title+"</td>");var l=lfb_data.texts.Integer;"float"==this.type?l=lfb_data.texts.Float:"currency"==this.type?l=lfb_data.texts.Currency:"text"==this.type&&(l=lfb_data.texts.Text),t.append("<td>"+l+"</td>"),t.append("<td>"+this.defaultValue+"</td>"),t.append('<td class="lfb_actionTh"><a href="javascript:" data-action="editVariable"  data-toggle="tooltip" data-placement="bottom" title="'+lfb_data.texts.edit+'"  class="btn btn-primary btn-circle"><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="deleteVariable" class="btn btn-danger btn-circle"><span class="glyphicon glyphicon-trash"></span></a></td>'),t.find('a[data-action="editVariable"]').on("click",function(){lfb_editVariable(jQuery(this).closest("tr").attr("data-id"))}),t.find('a[data-action="deleteVariable"]').on("click",function(){lfb_deleteVariable(jQuery(this).closest("tr").attr("data-id"))}),jQuery("#lfb_variablesTable tbody").append(t),jQuery('#lfb_winItem [name="modifiedVariableID"],#lfb_emailValueBubble select[name="variableID"],#lfb_calculationValueBubble select[name="variableID"]').append('<option value="'+this.id+'">'+this.title+"</option>")})}function lfb_returnToOrdersList(){jQuery("#lfb_winLog").fadeOut(),lfb_lastPanel?(lfb_lastPanel.fadeIn(),lfb_lastPanel=!1):jQuery("#lfb_panelLogs").show()}function lfb_showCustomersPanel(){jQuery("#lfb_panelFormsList .tooltip").remove(),jQuery(".lfb_winHeader .tooltip").remove(),lfb_refreshCustomersList(),jQuery("#lfb_panelFormsList,#lfb_panelPreview,#lfb_customerDetailsPanel").hide(),jQuery("#lfb_customersPanel").show()}function lfb_refreshCustomersList(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getCustomersList"},success:function(e){e.trim();var t=jQuery.parseJSON(e);0<jQuery("#lfb_customersTable").closest(".dataTables_wrapper").length&&lfb_customersTable.destroy(),jQuery("#lfb_customersTable tbody").html("");for(var l=0;l<t.length;l++){var a=t[l],n=jQuery('<tr data-id="'+a.id+'"></tr>');n.append("<td>"+a.email+"</td>"),n.append("<td>"+a.firstName+" "+a.lastName+"</td>"),n.append("<td>"+a.phone+"</td>"),n.append("<td>"+a.lastOrderDate+"</td>"),n.append("<td>"+a.inscriptionDate+"</td>"),n.append('<td class="lfb_actionTh"><a href="javascript:" data-action="editCustomer" class="btn btn-default  btn-circle "><span class="glyphicon glyphicon-pencil"></span></a><a href="javascript:" data-action="deleteCustomer" class="btn btn-danger  btn-circle "><span class="glyphicon glyphicon-trash"></span></a></td>'),n.find('a[data-action="editCustomer"]').on("click",function(){lfb_editCustomer(jQuery(this).closest("tr").attr("data-id"))}),n.find('a[data-action="deleteCustomer"]').on("click",function(){lfb_deleteCustomer(jQuery(this).closest("tr").attr("data-id"))}),jQuery("#lfb_customersTable tbody").append(n)}lfb_customersTable=jQuery("#lfb_customersTable").DataTable({language:{search:lfb_data.texts.search,infoFiltered:lfb_data.texts.filteredFrom,zeroRecords:lfb_data.texts.noRecords,infoEmpty:"",info:lfb_data.texts.showingPage,lengthMenu:lfb_data.texts.display+" _MENU_",paginate:{first:'<span class="glyphicon glyphicon-fast-backward"></span>',previous:'<span class="glyphicon glyphicon-step-backward"></span>',next:'<span class="glyphicon glyphicon-step-forward"></span>',last:'<span class="glyphicon glyphicon-fast-forward"></span>'}}}),jQuery("#lfb_customersTable").wrap('<div class="table-responsive"></div>'),jQuery('#lfb_customersTable [name="tableSelector"]').attr("checked","checked")}})}function lfb_editCustomer(customerID){jQuery("#lfb_customerDetailsPanel").data("customerID",customerID),0<customerID?(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getCustomerDetails",customerID:customerID},success:function(rep){rep=jQuery.parseJSON(rep),jQuery("#lfb_customersPanel").hide(),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_customerDetailsPanel").find("input[name],select[name],textarea[name]").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(rep."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(rep."+jQuery(this).attr("name")+");")}),0<jQuery("#lfb_customerOrdersTable").closest(".dataTables_wrapper").length&&lfb_customerOrdersTable.destroy(),jQuery("#lfb_customerOrdersTable tbody").html("");for(var i=0;i<rep.orders.length;i++){var order=rep.orders[i],total=lfb_formatPrice(order.totalPrice,order.currency,order.currencyPosition,order.decimalsSeparator,order.thousandsSeparator,order.millionSeparator,order.billionsSeparator),totalSubscription=lfb_formatPrice(order.totalSubscription,order.currency,order.currencyPosition,order.decimalsSeparator,order.thousandsSeparator,order.millionSeparator,order.billionsSeparator),tr=jQuery('<tr data-id="'+order.id+'" data-formid="'+order.formID+'"></tr>');tr.append("<td>"+order.dateLog+"</td>"),tr.append("<td>"+order.ref+"</td>"),tr.append("<td>"+order.paid+"</td>"),tr.append('<td class="lfb_log_totalTd">'+total+"</td>"),tr.append('<td class="lfb_log_totalSubTd">'+totalSubscription+"</td>"),tr.append('<td class="lfb_logStatusTd">'+order.statusText+"</td>"),tr.append('<td class="lfb_actionTh"><a href="javascript:" data-action="viewOrder" class="btn btn-primary btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["View this order"]+'" data-placement="bottom"><span class="glyphicon glyphicon-search"></span></a><a href="javascript:" data-action="editOrder" class="btn btn-default btn-circle" data-toggle="tooltip" title="'+lfb_data.texts.edit+'" data-placement="bottom"><span class="glyphicon glyphicon-pencil"></span></a> <a href="javascript:" data-action="downloadOrder" class="btn btn-default btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["Download the order"]+'" data-placement="bottom"><span class="fa fa-file-download"></span></a><a href="javascript:" data-action="deleteOrder"  class="btn btn-danger btn-circle" data-toggle="tooltip" title="'+lfb_data.texts["Delete this order"]+'" data-placement="bottom"><span class="glyphicon glyphicon-trash"></span></a></td>'),jQuery("#lfb_customerOrdersTable tbody").append(tr),tr.find('[data-action="viewOrder"]').on("click",function(){(lfb_lastPanel=jQuery("#lfb_customerDetailsPanel")).fadeOut(),lfb_showLoader(),lfb_loadLog(jQuery(this).closest("tr").attr("data-id"),!1)}),tr.find('[data-action="editOrder"]').on("click",function(){(lfb_lastPanel=jQuery("#lfb_customerDetailsPanel")).fadeOut(),lfb_showLoader(),lfb_loadLog(jQuery(this).closest("tr").attr("data-id"),!0)}),tr.find('[data-action="downloadOrder"]').on("click",function(){var e=jQuery(this).closest("tr").attr("data-id");lfb_downloadOrder(lfb_currentLogID=e)}),tr.find('[data-action="deleteOrder"]').on("click",function(){lfb_removeLog(jQuery(this).closest("tr").attr("data-id"),jQuery(this).closest("tr").attr("data-formid"))})}lfb_customerOrdersTable=jQuery("#lfb_customerOrdersTable").DataTable({language:{search:lfb_data.texts.search,infoFiltered:lfb_data.texts.filteredFrom,zeroRecords:lfb_data.texts.noRecords,infoEmpty:"",info:lfb_data.texts.showingPage,lengthMenu:lfb_data.texts.display+" _MENU_",paginate:{first:'<span class="glyphicon glyphicon-fast-backward"></span>',previous:'<span class="glyphicon glyphicon-step-backward"></span>',next:'<span class="glyphicon glyphicon-step-forward"></span>',last:'<span class="glyphicon glyphicon-fast-forward"></span>'}}}),jQuery("#lfb_customerOrdersTable").wrap('<div class="table-responsive"></div>'),jQuery('#lfb_customerOrdersTable [name="tableSelector"]').attr("checked","checked"),jQuery("#lfb_customerDetailsPanel").show()}})):(jQuery("#lfb_customerDetailsPanel").find("input[name],select[name],textarea[name]").val(""),0<jQuery("#lfb_customerOrdersTable").closest(".dataTables_wrapper").length&&lfb_customerOrdersTable.destroy(),jQuery("#lfb_customerOrdersTable tbody").html(""),lfb_customerOrdersTable=jQuery("#lfb_customerOrdersTable").DataTable({language:{search:lfb_data.texts.search,infoFiltered:lfb_data.texts.filteredFrom,zeroRecords:lfb_data.texts.noRecords,infoEmpty:"",info:lfb_data.texts.showingPage,lengthMenu:lfb_data.texts.display+" _MENU_",paginate:{first:'<span class="glyphicon glyphicon-fast-backward"></span>',previous:'<span class="glyphicon glyphicon-step-backward"></span>',next:'<span class="glyphicon glyphicon-step-forward"></span>',last:'<span class="glyphicon glyphicon-fast-forward"></span>'}}}),jQuery("#lfb_customerOrdersTable").wrap('<div class="table-responsive"></div>'),jQuery('#lfb_customerOrdersTable [name="tableSelector"]').attr("checked","checked"),jQuery("#lfb_customerDetailsPanel").show())}function lfb_deleteCustomer(e){jQuery("#lfb_winAskDeleteCustomer").data("customerID",e),jQuery("#lfb_winAskDeleteCustomer").fadeIn(260)}function lfb_confirmDeleteCustomer(e){jQuery('#lfb_customersTable tbody tr[data-id="'+e+'"]').remove(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_deleteCustomer",customerID:e},success:function(e){}})}function lfb_formatPrice(e,t,l,a,n,i,r){var o=(e=e||0).toString(),s=n,n=o=parseFloat(e).toFixed(2).toString(),e=i,i=r,r="";return-1<o.indexOf(".")?(n=o.substr(0,o.indexOf(".")),r=o.substr(o.indexOf(".")+1,2),o=o.replace(".",a),1==r.toString().length&&(r=r.toString()+"0"),9<n.length?o=n.substr(0,n.length-9)+i+n.substr(n.length-9,3)+e+n.substr(n.length-6,3)+s+n.substr(n.length-3,n.length)+a+r:6<n.length?o=n.substr(0,n.length-6)+e+n.substr(n.length-6,3)+s+n.substr(n.length-3,n.length)+a+r:3<n.length&&(o=n.substr(0,n.length-3)+s+n.substr(n.length-3,n.length)+a+r)):9<n.length?o=n.substr(0,n.length-9)+i+n.substr(n.length-9,3)+e+n.substr(n.length-6,3)+s+n.substr(n.length-3,n.length):6<n.length?o=n.substr(0,n.length-6)+e+n.substr(n.length-6,3)+s+n.substr(n.length-3,n.length):3<n.length&&(o=n.substr(0,n.length-3)+s+n.substr(n.length-3,n.length)),o="left"==l?t.toString()+o.toString():o.toString()+t.toString()}function lfb_saveCustomer(){var customerID=jQuery("#lfb_customerDetailsPanel").data("customerID"),customerData={};jQuery("#lfb_customerDetailsPanel").find("input[name],select[name],textarea[name]").each(function(){jQuery("#lfb_customerDetailsPanel").find("input[name],select[name],textarea[name]").each(function(){var value;0==jQuery(this).closest("#lfb_customerOrders").length&&(jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("customerData."+jQuery(this).attr("name")+" = value;")):eval("customerData."+jQuery(this).attr("name")+" = jQuery(this).val();"))})});var error=!1;jQuery("#lfb_customerDetailsPanel .has-error").removeClass("has-error"),lfb_checkEmail(jQuery('#lfb_customerDetailsPanel [name="email"]').val())||(error=!0,jQuery('#lfb_customerDetailsPanel [name="email"]').closest(".form-group").addClass("has-error")),customerData.action="lfb_saveCustomer",customerData.customerID=customerID,error||(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:customerData,success:function(e){jQuery("#lfb_loader").fadeOut()}}))}function lfb_openGlobalSettings(){jQuery("#lfb_smtpTestRep").html(""),jQuery("#lfb_winGlobalSettings").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(lfb_settings."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(lfb_settings."+jQuery(this).attr("name")+");")}),1==lfb_settings.encryptDB?jQuery('#lfb_winGlobalSettings [name="encryptDB"]').parent().bootstrapSwitch("setState",!0):jQuery('#lfb_winGlobalSettings [name="encryptDB"]').parent().bootstrapSwitch("setState",!1),jQuery("#lfb_winGlobalSettings").fadeIn(260)}function lfb_saveGlobalSettings(callback){var settingsData={},error=!1;jQuery("#lfb_winGlobalSettings").find("input[name],select[name],textarea[name]").each(function(){jQuery("#lfb_winGlobalSettings").find("input[name],select[name],textarea[name]").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=0,jQuery(this).is(":checked")&&(value=1),eval("settingsData."+jQuery(this).attr("name")+" = value;")):eval("settingsData."+jQuery(this).attr("name")+" = jQuery(this).val();")})}),settingsData.action="lfb_saveGlobalSettings",error||(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:settingsData,success:function(e){jQuery("#lfb_loader").fadeOut(),callback()}}),1==settingsData.useVisualBuilder?(jQuery("#lfb_finalStepVisualBtn").show(),jQuery("#lfb_finalStepItemsList").hide()):(jQuery("#lfb_finalStepVisualBtn").hide(),jQuery("#lfb_finalStepItemsList").show()))}function lfb_editCustomerDataSettings(){jQuery("#lfb_winGlobalSettings").fadeIn(260),jQuery('#lfb_winGlobalSettings a[href="#lfb_tabTextsSettings"]').trigger("click")}function lfb_changeOrderStatus(e){var t=jQuery('#lfb_winLog [name="orderStatus"]').val();jQuery("#lfb_logsTable,#lfb_customerOrdersTable").find('tr[data-id="'+lfb_currentLogID+'"] .lfb_logStatusTd').html(jQuery('#lfb_winLog [name="orderStatus"] option:selected').text()),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeOrderStatus",orderID:lfb_currentLogID,status:t}})}function lfb_getEmailPdfContent(e){var t=jQuery("<div></div>");return t.html(e),t.find("span").each(function(){var e;-1<jQuery(this).html().indexOf("[project_content]")&&(e=jQuery(this),0<jQuery(this).parents("span").last().length&&(e=jQuery(this).parents("span").last()),e.after("[project_content]"),jQuery(this).remove())}),t.html()}function lfb_testSMTP(){var e=!1;jQuery("#lfb_winGlobalSettings .has-error").removeClass("has-error"),lfb_checkEmail(jQuery('#lfb_winGlobalSettings [name="adminEmail"]').val())||(e=!0,jQuery('#lfb_winGlobalSettings [name="adminEmail"]').closest(".form-group").addClass("has-error")),jQuery('#lfb_winGlobalSettings [name="smtp_host"]').val().length<3&&(e=!0,jQuery('#lfb_winGlobalSettings [name="smtp_host"]').closest(".form-group").addClass("has-error")),jQuery('#lfb_winGlobalSettings [name="smtp_port"]').val().length<1&&(e=!0,jQuery('#lfb_winGlobalSettings [name="smtp_port"]').closest(".form-group").addClass("has-error")),jQuery('#lfb_winGlobalSettings [name="smtp_username"]').val().length<3&&(e=!0,jQuery('#lfb_winGlobalSettings [name="smtp_username"]').closest(".form-group").addClass("has-error")),jQuery('#lfb_winGlobalSettings [name="smtp_password"]').val().length<3&&(e=!0,jQuery('#lfb_winGlobalSettings [name="smtp_password"]').closest(".form-group").addClass("has-error")),e||lfb_saveGlobalSettings(function(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_testSMTP",senderName:jQuery('#lfb_winGlobalSettings [name="senderName"]').val(),email:jQuery('#lfb_winGlobalSettings [name="adminEmail"]').val(),host:jQuery('#lfb_winGlobalSettings [name="smtp_host"]').val(),port:jQuery('#lfb_winGlobalSettings [name="smtp_port"]').val(),username:jQuery('#lfb_winGlobalSettings [name="smtp_username"]').val(),pass:jQuery('#lfb_winGlobalSettings [name="smtp_password"]').val(),mode:jQuery('#lfb_winGlobalSettings [name="smtp_mode"]').val()},success:function(e){var t=(e=e.trim()).substr(0,e.indexOf("|")),e=e.substr(e.indexOf("|")+1,e.length),t=1==t?"alert-success":"alert-danger";jQuery("#lfb_smtpTestRep").html('<div class="alert '+t+'">'+e+"</div>")}})})}function lfb_applyCalculationEditorTooltips(e){jQuery("#lfb_winItem .tooltip").remove(),jQuery('textarea[name="'+e+'"]').data("codeMirrorEditor").jObject.next(".CodeMirror").find(".cm-variable").each(function(){var e,t,l,a,n=jQuery(this),i="";"item"==n.html()?(t=0,e="",t=parseInt(n.next().next(".cm-number").text()),e=n.next().next().next(".cm-variable").text(),(t=lfb_getItemByID(t))&&(a=lfb_getStepByID(t.stepID),0==t.stepID&&(a={title:lfb_data.texts.lastStep}),"_price"==e?i=lfb_data.texts["Price of the item [item]"].replace("[item]","<strong>"+t.title+"</strong> ("+a.title+")"):"_value"==e?i=lfb_data.texts["Value of the item [item]"].replace("[item]","<strong>"+t.title+"</strong> ("+a.title+")"):"_quantity"==e?i=lfb_data.texts["Quantity of the item [item]"].replace("[item]","<strong>"+t.title+"</strong> ("+a.title+")"):"_title"==e?i=lfb_data.texts["Title of the item [item]"].replace("[item]","<strong>"+t.title+"</strong> ("+a.title+")"):"_isChecked"!=e&&"_isUnchecked"!=e||(i="<strong>"+t.title+"</strong> ("+a.title+")"))):"variable"==n.html()?(l=lfb_getVariable(parseInt(n.next().next(".cm-number").text())))&&(i=l.title):"step"==n.html()?(a=lfb_getStepByID(l=parseInt(n.next().next(".cm-number").text())),0==l&&(a={title:lfb_data.texts.lastStep}),e=n.next().next().next(".cm-variable").text(),a&&("_quantity"==e?i=lfb_data.texts["Total quantity of the step [step]"].replace("[step]","<strong>"+a.title+"</strong>"):"_price"==e?i=lfb_data.texts["Total price of the step [step]"].replace("[step]","<strong>"+a.title+"</strong>"):"_title"==e&&(i=lfb_data.texts["Title of the step [step]"].replace("[step]","<strong>"+a.title+"</strong>")))):"total"==n.html()?i=lfb_data.texts["Total price of the form"]:"total_quantity"==n.html()&&(i=lfb_data.texts["Total selected quantity in the form"]),""!=i&&(n.b_tooltip({title:i,html:!0,container:"#lfb_winItem",placement:"bottom",template:'<div class="tooltip lfb_greyTooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),n.next(".cm-operator").b_tooltip({title:i,html:!0,container:"#lfb_winItem",placement:"bottom",template:'<div class="tooltip lfb_greyTooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),1==n.next().next(".cm-number").length&&n.next().next(".cm-number").b_tooltip({title:i,html:!0,container:"#lfb_winItem",placement:"bottom",template:'<div class="tooltip lfb_greyTooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),1==n.next().next().next(".cm-variable").length&&n.next().next().next(".cm-variable").b_tooltip({title:i,html:!0,container:"#lfb_winItem",placement:"bottom",template:'<div class="tooltip lfb_greyTooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}))})}function lfb_initCalculationEditor(e){jQuery('textarea[name="'+e+'"]').data("codeMirrorEditor").on("change",function(){setTimeout(function(){lfb_applyCalculationEditorTooltips(e)},500)})}function lfb_openFormPreview(e){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getFormPreviewURL",formID:e},success:function(e){e=window.open(e,"_blank");"null"!=typeof e&&null!=e&&e.focus()}})}function lfb_showAllOrders(){lfb_loadLogs(0)}function lfb_initStepVisual(){jQuery('#lfb_winEditStepVisual a[data-action="openComponents"]').on("click",function(){$("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_showComponentsMenu")})}function lfb_stepFrameLoaded(){"block"==jQuery("#lfb_winEditStepVisual").css("display")&&jQuery("#lfb_stepFrame").contents().find("#lfb_form").is(".lfb_visualReady")&&($("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_initComponentsMenu"),$("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_initVisualStep",[lfb_currentStepID,lfb_currentFormID]),jQuery("#lfb_loader").fadeOut(),setTimeout(function(){jQuery('#lfb_formFields [name="gmap_key"]').val().length<3?jQuery("#lfb_stepFrame").contents().find('#lfb_componentsPanel [data-component="gmap"]').addClass("disabled"):jQuery("#lfb_stepFrame").contents().find('#lfb_componentsPanel [data-component="gmap"]').removeClass("disabled")},5e3),jQuery("#lfb_stepFrame").css({height:jQuery(window).innerHeight()-(jQuery("#lfb_winEditStepVisual .lfb_lPanelMenu").outerHeight()+jQuery("#lfb_winEditStepVisual .lfb_winHeader").outerHeight()+jQuery("#wpadminbar").outerHeight())}))}function lfb_editVisualStep(stepID){jQuery('#lfb_formFields [name="gmap_key"]').val().length<3?jQuery("#lfb_stepFrame").contents().find('#lfb_componentsPanel [data-component="gmap"]').addClass("disabled"):jQuery("#lfb_stepFrame").contents().find('#lfb_componentsPanel [data-component="gmap"]').removeClass("disabled"),lfb_currentStepID=stepID,lfb_currentStep=lfb_getStepByID(stepID),lfb_currentStep?(jQuery("#lfb_winEditStepVisual #lfb_stepTitle").val(lfb_currentStep.title),jQuery("#lfb_winEditStepVisual #lfb_stepMaxWidth").slider("value",0),0<lfb_currentStep.maxWidth&&jQuery("#lfb_winEditStepVisual #lfb_stepMaxWidth").slider("value",lfb_stepPossibleWidths.indexOf(lfb_currentStep.maxWidth)),jQuery("#lfb_winEditStepVisual .lfb_lPanelMenu .lfb_alignRight").show(),jQuery('#lfb_winEditStepVisual a[data-action="openStepSettings"]').show(),jQuery("#lfb_winStepSettings").find("input,select,textarea").each(function(){var value;jQuery(this).is('[data-switch="switch"]')?(value=!1,eval("if(lfb_currentStep."+jQuery(this).attr("name")+" == 1){jQuery(this).attr('checked','checked');} else {jQuery(this).attr('checked',false);}"),eval("if(lfb_currentStep."+jQuery(this).attr("name")+' == 1){ jQuery(this).parent().bootstrapSwitch("setState",true); } else {jQuery(this).parent().bootstrapSwitch("setState",false);}')):eval("jQuery(this).val(lfb_currentStep."+jQuery(this).attr("name")+");")})):(jQuery("#lfb_winEditStepVisual .lfb_lPanelMenu .lfb_alignRight").hide(),jQuery('#lfb_winEditStepVisual a[data-action="openStepSettings"]').hide()),"about:blank"==jQuery("#lfb_stepFrame").attr("src")||0==jQuery("#lfb_stepFrame").contents().find('#lfb_form .lfb_genSlide[data-stepid="'+lfb_currentStepID+'"]').length?(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getFormPreviewURL",formID:lfb_currentFormID},success:function(e){e+="?lfb_editForm=1",0==document.location.href.indexOf("https:")&&0==e.indexOf("http:")?e=e.replace("http:","https:"):0==document.location.href.indexOf("http:")&&0==e.indexOf("https:")&&(e=e.replace("https:","http:")),jQuery("#lfb_stepFrame").attr("src",e),jQuery("#lfb_winEditStepVisual").show(),jQuery("html,body").css("overflow-y","hidden"),jQuery("#lfb_stepFrame").css({height:jQuery(window).innerHeight()-(jQuery("#lfb_winEditStepVisual .lfb_lPanelMenu").outerHeight()+jQuery("#lfb_winEditStepVisual .lfb_winHeader").outerHeight()+jQuery("#wpadminbar").outerHeight())})}})):(jQuery("html,body").css("overflow-y","hidden"),jQuery("#lfb_winEditStepVisual").show(),$("#lfb_stepFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_initVisualStep",[lfb_currentStepID,lfb_currentFormID]),jQuery("#lfb_loader").fadeOut(),jQuery("#lfb_stepFrame").css({height:jQuery(window).height()-(jQuery("#lfb_winEditStepVisual .lfb_lPanelMenu").outerHeight()+jQuery("#lfb_winEditStepVisual .lfb_winHeader").outerHeight()+jQuery("#wpadminbar").outerHeight())}))}function lfb_stepContentModified(){}function lfb_renderComponent(e){var t=jQuery('<div class="lfb_componentBloc"></div>'),l=jQuery('<div class="lfb_elementToolbar"></div>');l.append('<a href="javascript:" class="btn-primary lfb-handler"><span class="fas fa-arrows-alt" data-tooltip="true"  data-placement="bottom" title="'+lfb_data.texts.move+'"></span></a>'),l.append('<a href="javascript:" data-action="edit" class="btn-secondary"><span class="fas fa-pencil-alt" data-tooltip="true"  data-placement="bottom" title="'+lfb_data.texts.edit+'"></span></a>'),t.is('[data-id="kafb_stepsContainer"]')||l.append('<a href="javascript:" data-action="duplicate" class="btn-secondary"><span class="fas fa-copy" data-tooltip="true"  data-placement="bottom" title="'+lfb_data.texts.duplicate+'"></span></a>'),l.append('<a href="javascript:" data-action="delete" class="btn-danger"><span class="fas fa-trash" data-tooltip="true"  data-placement="bottom" title="'+lfb_data.texts.remove+'"></span></a>'),t.append(l);l=jQuery('<div class="lfb_elementContent"></div>');t.on("mouseenter",function(){clearTimeout(lfb_elementHoverTimer);var e=!1;jQuery(this).find(".lfb_componentBloc").each(function(){jQuery(this).is(":hover")&&(e=!0)}),(lfb_isDraggingComponent&&0<jQuery(this).find(".lfb-column-inner.kafb_hoverEdit").length||!lfb_isDraggingComponent&&0<jQuery(this).find(".lfb-column-inner:hover").length)&&(e=!0),e?(jQuery(this).removeClass("lfb_hover"),jQuery(this).removeClass("lfb_hoverEdit")):(jQuery(".lfb_hoverEdit").removeClass("lfb_hoverEdit"),jQuery(this).addClass("lfb_hover"),jQuery(this).addClass("lfb_hoverEdit"));jQuery(this);jQuery(this).parent().closest(".lfb_componentBloc ").removeClass("lfb_hover")}).on("mouseleave",function(){var e=jQuery(this);e.removeClass("lfb_hover"),e.children(".lfb_hover").removeClass("lfb_hover"),lfb_elementHoverTimer=setTimeout(function(){e.removeClass("lfb_hoverEdit"),e.children(".lfb_hoverEdit").removeClass("lfb_hoverEdit")},500),0<jQuery(this).closest(".lfb_componentBloc :hover").length&&jQuery(this).closest(".lfb_componentBloc :hover").trigger("mouseenter")}),"row"==e.attr("data-component")&&l.append('<div class="row lfb_rowEdited"></div>'),t.append(l),e.after(t),e.remove()}function lfb_newItemAdded(e){(lfb_currentStep?lfb_currentStep.items:lfb_currentForm.fields).push(e)}function lfb_updateStepMainSettings(){var e=0;0<jQuery("#lfb_stepMaxWidth").slider("value")&&(e=lfb_stepPossibleWidths[jQuery("#lfb_stepMaxWidth").slider("value")]+"px");var t=e;0==t&&(t="100%"),jQuery("#lfb_stepFrame").contents().find(".lfb_activeStep").css({"max-width":t}),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_changeStepMainSettings",stepID:lfb_currentStepID,title:jQuery("#lfb_winEditStepVisual #lfb_stepTitle").val(),maxWidth:e},success:function(e){}})}function lfb_updateLastStepTab(){jQuery('#lfb_formFields [href="#lfb_tabLastStep"]').removeClass("lfb_highlightTab"),jQuery("#lfb_editFinalStepVisual").removeClass("lfb_highlightTab"),lfb_currentForm&&0==lfb_currentForm.steps.length&&(jQuery('#lfb_formFields [href="#lfb_tabLastStep"]').addClass("lfb_highlightTab"),jQuery("#lfb_editFinalStepVisual").addClass("lfb_highlightTab"))}function lfb_tld_initStyles(){(lfb_tld_styles=new Array).push({device:"all",elements:new Array}),lfb_tld_styles.push({device:"desktop",elements:new Array}),lfb_tld_styles.push({device:"desktopTablet",elements:new Array}),lfb_tld_styles.push({device:"tablet",elements:new Array}),lfb_tld_styles.push({device:"tabletPhone",elements:new Array}),lfb_tld_styles.push({device:"phone",elements:new Array}),lfb_tld_modifsMade=!1}function lfb_showLoader(){jQuery("html,body").animate({scrollTop:0},250),jQuery("#lfb_loader").fadeIn()}function lfb_tld_onOpen(){"about:blank"==jQuery("#lfb_tld_tdgnFrame").attr("src")&&(lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_getFormPreviewURL",formID:lfb_currentFormID},success:function(e){lfb_tld_previewUrl=e+"?rand="+Math.random()+"&lfb_designForm=1",jQuery("#lfb_tld_tdgnFrame").attr("src",lfb_tld_previewUrl)}}))}function lfb_tld_tdgn_init(){$("#lfb_form").on("lfb_tld_itemSelected",lfb_tld_itemSelected),jQuery('[data-action="lfb_tld_editCSS"]').on("click",lfb_tld_editCSS),jQuery('[data-action="lfb_tld_resetSessionStyles"]').on("click",lfb_tld_resetSessionStyles),jQuery('[data-action="lfb_tld_resetAllStyles"]').on("click",lfb_tld_resetAllStyles),jQuery('[data-action="lfb_tld_saveEditedCSS"]').on("click",lfb_tld_saveEditedCSS),jQuery("#lfb_tld_savePanelToggleBtn").on("click",lfb_tld_toggleSavePanel),jQuery('#lfb_tld_panelSectionStyles a[data-devicebtn="all"]').on("click",function(){lfb_tld_changeDeviceMode("all")}),jQuery('#lfb_tld_panelSectionStyles a[data-devicebtn="desktop"]').on("click",function(){lfb_tld_changeDeviceMode("desktop")}),jQuery('#lfb_tld_panelSectionStyles a[data-devicebtn="desktopTablet"]').on("click",function(){lfb_tld_changeDeviceMode("desktopTablet")}),jQuery('#lfb_tld_panelSectionStyles a[data-devicebtn="tabletPhone"]').on("click",function(){lfb_tld_changeDeviceMode("tabletPhone")}),jQuery('#lfb_tld_panelSectionStyles a[data-devicebtn="tablet"]').on("click",function(){lfb_tld_changeDeviceMode("tablet")}),jQuery('#lfb_tld_panelSectionStyles a[data-devicebtn="phone"]').on("click",function(){lfb_tld_changeDeviceMode("phone")}),$('[data-action="lfb_tld_leaveConfirm"]').on("click",lfb_tld_leaveConfirm),$('[data-action="lfb_tld_saveCurrentElement"]').on("click",lfb_tld_saveCurrentElement),$('[data-action="lfb_tld_confirmSaveStyles"]').on("click",lfb_tld_confirmSaveStyles),$('[data-action="lfb_tld_confirmSaveStylesBeforeEdit"]').on("click",lfb_tld_confirmSaveStylesBeforeEdit),$('[data-action="lfb_tld_confirmSaveStyles"]').on("click",lfb_tld_confirmSaveStyles),lfb_tld_initStyles(),lfb_tld_tdgn_initMenu(),jQuery("#lfb_tld_tdgn_applyModifsTo").on("change",lfb_tld_tdgn_applyModifsChange),jQuery("#lfb_tld_styleBackgroundType").on("change",lfb_tld_styleBackgroundTypeChange),jQuery("#lfb_tld_styleBackgroundType_color").on("change",lfb_tld_styleBackgroundType_colorChange),jQuery("#lfb_tld_styleBackgroundType_imageUrl").on("keyup",lfb_tld_styleBackgroundType_imageChange),jQuery("#lfb_tld_styleBackgroundType_imageUrl").on("change",lfb_tld_styleBackgroundType_imageChange),jQuery("#lfb_tld_styleBackgroundType_imageSize").on("change",lfb_tld_styleBackgroundType_imageChange),jQuery("#lfb_tld_style_borderColor").on("change",lfb_tld_style_borderColorChange),jQuery("#lfb_tld_style_borderStyle").on("change",lfb_tld_style_borderStyleChange),jQuery("#lfb_tld_style_widthType").on("change",lfb_tld_style_widthTypeChange),jQuery("#lfb_tld_style_heightType").on("change",lfb_tld_style_heightTypeChange),jQuery("#lfb_tld_tdgn_applyScope").on("change",lfb_tld_tdgn_applyScopeChange),jQuery("#lfb_tld_style_display").on("change",lfb_tld_style_displayChange),jQuery("#lfb_tld_style_position").on("change",lfb_tld_style_positionChange),jQuery("#lfb_tld_style_positionLeft").on("change",lfb_tld_style_positionLeftChange),jQuery("#lfb_tld_style_positionTop").on("change",lfb_tld_style_positionTopChange),jQuery("#lfb_tld_style_positionBottom").on("change",lfb_tld_style_positionBottomChange),jQuery("#lfb_tld_style_positionRight").on("change",lfb_tld_style_positionRightChange),jQuery("#lfb_tld_style_float").on("change",lfb_tld_style_floatChange),jQuery("#lfb_tld_style_clear").on("change",lfb_tld_style_clearChange),jQuery("#lfb_tld_style_paddingTypeBottom").on("change",lfb_tld_style_paddingTypeBottomChange),jQuery("#lfb_tld_style_paddingTypeTop").on("change",lfb_tld_style_paddingTypeTopChange),jQuery("#lfb_tld_style_paddingTypeLeft").on("change",lfb_tld_style_paddingTypeLeftChange),jQuery("#lfb_tld_style_paddingTypeRight").on("change",lfb_tld_style_paddingTypeRightChange),jQuery("#lfb_tld_style_marginTypeBottom").on("change",lfb_tld_style_marginTypeBottomChange),jQuery("#lfb_tld_style_marginTypeTop").on("change",lfb_tld_style_marginTypeTopChange),jQuery("#lfb_tld_style_marginTypeLeft").on("change",lfb_tld_style_marginTypeLeftChange),jQuery("#lfb_tld_style_marginTypeRight").on("change",lfb_tld_style_marginTypeRightChange),jQuery("#lfb_tld_style_fontType").on("change",lfb_tld_style_fontTypeChange),jQuery("#lfb_tld_style_fontFamily").on("change",lfb_tld_style_fontFamilyChange),jQuery("#lfb_tld_style_fontStyle").on("change",lfb_tld_style_fontStyleChange),jQuery("#lfb_tld_style_fontColor").on("change",lfb_tld_style_fontColorChange),jQuery("#lfb_tld_style_lineHeightType").on("change",lfb_tld_style_lineHeightTypeChange),jQuery("#lfb_tld_style_scrollX").on("change",lfb_tld_style_scrollXChange),jQuery("#lfb_tld_style_scrollY").on("change",lfb_tld_style_scrollYChange),jQuery("#lfb_tld_style_visibility").on("change",lfb_tld_style_visibilityChange),jQuery("#lfb_tld_style_shadowType").on("change",lfb_tld_style_shadowTypeChange),jQuery("#lfb_tld_style_shadowColor").on("change",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_textShadowColor").on("change",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_textAlign").on("change",lfb_tld_style_textAlignChange),jQuery("#lfb_tld_stateSelect").on("change",lfb_tld_changeStateMode),jQuery("#lfb_tld_styleBackgroundType_colorAlpha").on("slidechange",lfb_tld_styleBackgroundType_colorAlphaChange),jQuery("#lfb_tld_styleBackgroundType_colorAlpha").on("slide",lfb_tld_styleBackgroundType_colorAlphaChange),jQuery("#lfb_tld_style_borderSize").on("slidechange",lfb_tld_style_borderSizeChange),jQuery("#lfb_tld_style_borderSize").on("slide",lfb_tld_style_borderSizeChange),jQuery("#lfb_tld_style_borderSize").bind("lfb_tld_update",lfb_tld_style_borderSizeChange),jQuery("#lfb_tld_style_width").on("slide",lfb_tld_style_widthChange),jQuery("#lfb_tld_style_width").bind("lfb_tld_update",lfb_tld_style_widthChange),jQuery("#lfb_tld_style_widthFlex").on("slide",lfb_tld_style_widthFlexChange),jQuery("#lfb_tld_style_widthFlex").bind("lfb_tld_update",lfb_tld_style_widthFlexChange),jQuery("#lfb_tld_style_height").on("slide",lfb_tld_style_heightChange),jQuery("#lfb_tld_style_height").bind("lfb_tld_update",lfb_tld_style_heightChange),jQuery("#lfb_tld_style_heightFlex").on("slide",lfb_tld_style_heightFlexChange),jQuery("#lfb_tld_style_heightFlex").bind("lfb_tld_update",lfb_tld_style_heightFlexChange),jQuery("#lfb_tld_style_left").on("slide",lfb_tld_style_leftChange),jQuery("#lfb_tld_style_left").bind("lfb_tld_update",lfb_tld_style_leftChange),jQuery("#lfb_tld_style_right").on("slide",lfb_tld_style_rightChange),jQuery("#lfb_tld_style_right").bind("lfb_tld_update",lfb_tld_style_rightChange),jQuery("#lfb_tld_style_bottom").on("slide",lfb_tld_style_bottomChange),jQuery("#lfb_tld_style_bottom").bind("lfb_tld_update",lfb_tld_style_bottomChange),jQuery("#lfb_tld_style_top").on("slide",lfb_tld_style_topChange),jQuery("#lfb_tld_style_top").bind("lfb_tld_update",lfb_tld_style_topChange),jQuery("#lfb_tld_style_leftFlex").on("slide",lfb_tld_style_leftFlexChange),jQuery("#lfb_tld_style_leftFlex").bind("lfb_tld_update",lfb_tld_style_leftFlexChange),jQuery("#lfb_tld_style_rightFlex").on("slide",lfb_tld_style_rightFlexChange),jQuery("#lfb_tld_style_rightFlex").bind("lfb_tld_update",lfb_tld_style_rightFlexChange),jQuery("#lfb_tld_style_topFlex").on("slide",lfb_tld_style_topFlexChange),jQuery("#lfb_tld_style_topFlex").bind("lfb_tld_update",lfb_tld_style_topFlexChange),jQuery("#lfb_tld_style_bottomFlex").on("slide",lfb_tld_style_bottomFlexChange),jQuery("#lfb_tld_style_bottomFlex").bind("lfb_tld_update",lfb_tld_style_bottomFlexChange),jQuery("#lfb_tld_style_marginLeft").on("slide",lfb_tld_style_marginLeftChange),jQuery("#lfb_tld_style_marginLeft").bind("lfb_tld_update",lfb_tld_style_marginLeftChange),jQuery("#lfb_tld_style_marginRight").on("slide",lfb_tld_style_marginRightChange),jQuery("#lfb_tld_style_marginRight").bind("lfb_tld_update",lfb_tld_style_marginRightChange),jQuery("#lfb_tld_style_marginTop").on("slide",lfb_tld_style_marginTopChange),jQuery("#lfb_tld_style_marginTop").bind("lfb_tld_update",lfb_tld_style_marginTopChange),jQuery("#lfb_tld_style_marginBottom").on("slide",lfb_tld_style_marginBottomChange),jQuery("#lfb_tld_style_marginBottom").bind("lfb_tld_update",lfb_tld_style_marginBottomChange),jQuery("#lfb_tld_style_marginLeftFlex").on("slide",lfb_tld_style_marginLeftFlexChange),jQuery("#lfb_tld_style_marginLeftFlex").bind("lfb_tld_update",lfb_tld_style_marginLeftFlexChange),jQuery("#lfb_tld_style_marginRightFlex").on("slide",lfb_tld_style_marginRightFlexChange),jQuery("#lfb_tld_style_marginRightFlex").bind("lfb_tld_update",lfb_tld_style_marginRightFlexChange),jQuery("#lfb_tld_style_marginTopFlex").on("slide",lfb_tld_style_marginTopFlexChange),jQuery("#lfb_tld_style_marginTopFlex").bind("lfb_tld_update",lfb_tld_style_marginTopFlexChange),jQuery("#lfb_tld_style_marginBottomFlex").on("slide",lfb_tld_style_marginBottomFlexChange),jQuery("#lfb_tld_style_marginBottomFlex").bind("lfb_tld_update",lfb_tld_style_marginBottomFlexChange),jQuery("#lfb_tld_style_paddingLeft").on("slide",lfb_tld_style_paddingLeftChange),jQuery("#lfb_tld_style_paddingLeft").bind("lfb_tld_update",lfb_tld_style_paddingLeftChange),jQuery("#lfb_tld_style_paddingRight").on("slide",lfb_tld_style_paddingRightChange),jQuery("#lfb_tld_style_paddingRight").bind("lfb_tld_update",lfb_tld_style_paddingRightChange),jQuery("#lfb_tld_style_paddingTop").on("slide",lfb_tld_style_paddingTopChange),jQuery("#lfb_tld_style_paddingTop").bind("lfb_tld_update",lfb_tld_style_paddingTopChange),jQuery("#lfb_tld_style_paddingBottom").on("slide",lfb_tld_style_paddingBottomChange),jQuery("#lfb_tld_style_paddingBottom").bind("lfb_tld_update",lfb_tld_style_paddingBottomChange),jQuery("#lfb_tld_style_paddingLeftFlex").on("slide",lfb_tld_style_paddingLeftFlexChange),jQuery("#lfb_tld_style_paddingLeftFlex").bind("lfb_tld_update",lfb_tld_style_paddingLeftFlexChange),jQuery("#lfb_tld_style_paddingRightFlex").on("slide",lfb_tld_style_paddingRightFlexChange),jQuery("#lfb_tld_style_paddingRightFlex").bind("lfb_tld_update",lfb_tld_style_paddingRightFlexChange),jQuery("#lfb_tld_style_paddingTopFlex").on("slide",lfb_tld_style_paddingTopFlexChange),jQuery("#lfb_tld_style_paddingTopFlex").bind("lfb_tld_update",lfb_tld_style_paddingTopFlexChange),jQuery("#lfb_tld_style_paddingBottomFlex").on("slide",lfb_tld_style_paddingBottomFlexChange),jQuery("#lfb_tld_style_paddingBottomFlex").bind("lfb_tld_update",lfb_tld_style_paddingBottomFlexChange),jQuery("#lfb_tld_style_fontSize").on("slide",lfb_tld_style_fontSizeChange),jQuery("#lfb_tld_style_fontSize").bind("lfb_tld_update",lfb_tld_style_fontSizeChange),jQuery("#lfb_tld_style_lineHeight").on("slide",lfb_tld_style_lineHeightChange),jQuery("#lfb_tld_style_lineHeight").bind("lfb_tld_update",lfb_tld_style_lineHeightChange),jQuery("#lfb_tld_style_lineHeightFlex").on("slide",lfb_tld_style_lineHeightFlexChange),jQuery("#lfb_tld_style_lineHeightFlex").bind("lfb_tld_update",lfb_tld_style_lineHeightFlexChange),jQuery("#lfb_tld_style_opacity").on("slide",lfb_tld_style_opacityChange),jQuery("#lfb_tld_style_opacity").bind("lfb_tld_update",lfb_tld_style_opacityChange),jQuery("#lfb_tld_style_shadowSize").on("slide",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowSize").bind("lfb_tld_update",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowX").on("slide",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowX").bind("lfb_tld_update",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowY").on("slide",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowY").bind("lfb_tld_update",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowAlpha").on("slide",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_shadowAlpha").bind("lfb_tld_update",lfb_tld_style_shadowChange),jQuery("#lfb_tld_style_textShadowX").on("slide",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_textShadowX").bind("lfb_tld_update",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_textShadowY").on("slide",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_textShadowY").bind("lfb_tld_update",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_textShadowAlpha").on("slide",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_textShadowAlpha").bind("lfb_tld_update",lfb_tld_style_textShadowChange),jQuery("#lfb_tld_style_borderRadiusTopLeft").on("slide",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusTopLeft").bind("lfb_tld_update",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusTopRight").on("slide",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusTopRight").bind("lfb_tld_update",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusBottomLeft").on("slide",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusBottomLeft").bind("lfb_tld_update",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusBottomRight").on("slide",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_style_borderRadiusBottomRight").bind("lfb_tld_update",lfb_tld_style_borderRadiusChange),jQuery("#lfb_tld_tdgnFrame").on("load",function(){"about:blank"!=jQuery("#lfb_tld_tdgnFrame").attr("src")&&(lfb_tld_firstLoad=lfb_tld_firstLoad&&!1,jQuery("#lfb_loader").delay(1e3).fadeOut(),lfb_tld_updateDomTree(),lfb_tld_unselectElement(),lfb_tld_changeDeviceMode("all"),""!=lfb_tld_targetStepID&&($("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_setAnimImmediate",[lfb_currentFormID]),jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form").attr("data-nowstart",1),jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form").attr("data-animspeed",0),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep").removeClass("lfb_activeStep"),jQuery("#lfb_tld_tdgnFrame").contents().find('[data-start="1"]').attr("data-start","0"),jQuery("#lfb_tld_tdgnFrame").contents().find('.lfb_genSlide[data-stepid="'+lfb_tld_targetStepID+'"]').addClass("lfb_activeStep"),jQuery("#lfb_tld_tdgnFrame").contents().find('.lfb_genSlide[data-stepid="'+lfb_tld_targetStepID+'"]').attr("data-start","1"),jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form .lfb_startBtnContainer").hide(),jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form #genPrice").show(),jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form #lfb_mainPanel").attr("style","transition: none !important;opacity:1 !important;display: block !important;"),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep").show().attr("style","transition: none !important;opacity:1 !important;display: block !important;"),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .lfb_genContent").show().attr("style","transition: none !important;opacity:1 !important;display: block !important;"),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .lfb_stepTitle").show().attr("style","transition: none !important;opacity:1 !important;display: block !important;"),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .lfb_stepTitle").addClass("positionned"),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .datetimepicker").hide(),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .lfb_errorMsg ").hide(),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .tooltip").hide(),jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_activeStep .lfb_btn-next").show(),$("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_resizeAll"),""!=lfb_tld_targetDomElement&&(lfb_tld_selectElement(jQuery("#lfb_tld_tdgnFrame").contents().find(lfb_tld_targetDomElement)),lfb_tld_elementInitialized=!1,lfb_tld_getElementStyles(jQuery("#lfb_tld_tdgnFrame").contents().find(lfb_tld_targetDomElement)[0]),setTimeout(function(){lfb_tld_elementInitialized=!0},250)),jQuery("#lfb_tld_tdgnFrame").contents().find('#lfb_mainPanel .lfb_genSlide[data-stepid="'+lfb_tld_targetStepID+'"] .lfb_rate').each(function(){var e=22*jQuery(this).find(".rate-base-layer").children().length;0==parseInt(jQuery(this).css("width"))&&(jQuery(this).css({width:e,height:32}),jQuery(this).children().css({width:e,height:32}))})))}),jQuery(".wos_imageBtn").on("click",function(){return lfb_tld_imgField=jQuery(this).prev("input"),lfb_formfield=jQuery(this).prev("input"),tb_show("","media-upload.php?TB_iframe=true"),!1}),0<jQuery("textarea#lfb_tld_editCssField").length&&(lfb_tld_editorCSS=CodeMirror.fromTextArea(jQuery("textarea#lfb_tld_editCssField").get(0),{mode:"css",lineNumbers:!0})),jQuery(".lfb_tld_colorpick").each(function(){var e=jQuery(this);0==jQuery(this).prev(".lfb_tld_colorPreview").length&&jQuery(this).before('<div class="lfb_tld_colorPreview" style="background-color:#'+e.val().substr(1,7)+'"></div>'),jQuery(this).prev(".lfb_tld_colorPreview").on("click",function(){jQuery(this).next(".lfb_tld_colorpick").trigger("click")}),jQuery(this).colpick({color:e.val().substr(1,7),onChange:function(e,t,l,a,n){var i=lfb_tld_hex2Rgba("#"+t,1);"#lfb_tld_styleBackgroundType_color"==jQuery(a).attr("id")?i=lfb_tld_hex2Rgba("#"+t,jQuery("#lfb_tld_styleBackgroundType_colorAlpha").slider("value")):"#lfb_tld_style_shadowColor"==jQuery(a).attr("id")&&(i=lfb_tld_hex2Rgba("#"+t,jQuery("#lfb_tld_style_shadowAlpha").slider("value"))),jQuery(a).prev(".lfb_tld_colorPreview").css({backgroundColor:"#"+t}),jQuery(a).val(i),jQuery(a).trigger("change")},onSubmit:function(e,t,l,a,n){jQuery(".colpick.colpick_full").fadeOut()}}),jQuery(this).on("change",function(){jQuery(this).prev(".lfb_tld_colorPreview").css({backgroundColor:jQuery(this).val()})})}),jQuery(".lfb_tld_sliderField").on("change",function(){var e=jQuery(this).val();e>jQuery(this).prev(".lfb_tld_slider").attr("max")&&(e=jQuery(this).prev(".lfb_tld_slider").attr("max")),e<jQuery(this).prev(".lfb_tld_slider").attr("min")&&(e=jQuery(this).prev(".lfb_tld_slider").attr("min")),jQuery(this).prev(".lfb_tld_slider").slider("value",parseInt(e))}),jQuery(".lfb_tld_sliderField").on("keyup",lfb_tld_updateFromSliderField),jQuery(".lfb_tld_sliderField").on("mouseup",lfb_tld_updateFromSliderField),lfb_tld_fillFontSelect(),lfb_tld_unselectElement()}function lfb_tld_updateFromSliderField(){var e=jQuery(this).val();e>parseInt(jQuery(this).prev(".lfb_tld_slider").attr("max"))&&(e=parseInt(jQuery(this).prev(".lfb_tld_slider").attr("max"))),e<parseInt(jQuery(this).prev(".lfb_tld_slider").attr("min"))&&(e=parseInt(jQuery(this).prev(".lfb_tld_slider").attr("min"))),jQuery(this).prev(".lfb_tld_slider").slider("value",parseInt(e)),jQuery(this).prev(".lfb_tld_slider").trigger("lfb_tld_update")}function lfb_tld_fillFontSelect(){jQuery.each(["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Odor Mean Chey","Offside","Old Standard TT","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed, sans serif","Roboto Mono","Roboto Slab"],function(){jQuery("#lfb_tld_style_fontFamily").append(jQuery("<option></option>").attr("value",this).text(this))}),jQuery("#lfb_tld_style_fontFamily").selectpicker("refresh")}function lfb_tld_tdgn_initMenu(){var e=0;jQuery("#lfb_tld_tdgnPanel .lfb_tld_tdgn_section").each(function(){jQuery(this).prepend('<a href="javascript:" data-action="lfb_tld_tdgn_toggleSection"  class="lfb_tld_tdgn_sectionTitle">'+jQuery(this).attr("data-title")+"</a>"),jQuery(this).prepend('<a href="javascript:"  data-action="lfb_tld_tdgn_toggleSection"  class="lfb_tld_tdgn_sectionArrow"><span class="glyphicon glyphicon-chevron-up"></span></a>'),0<e&&lfb_tld_tdgn_toggleSection(jQuery(this).find(".lfb_tld_tdgn_sectionArrow"),!1),e++}),jQuery('#lfb_tld_tdgnPanel [data-action="lfb_tld_tdgn_toggleSection"]').on("click",function(){lfb_tld_tdgn_toggleSection(this,!0)}),jQuery("#lfb_tld_tdgnPanel .panel-heading>.panel-title>a").each(function(){jQuery(this).prepend('<span class="glyphicon glyphicon-chevron-down"></span>')}),jQuery("#lfb_tld_tdgnPanel .panel-heading>.panel-title>a").on("click",function(){var e=this;setTimeout(function(){jQuery(e).is(".collapsed")?(jQuery(e).find("span.glyphicon").removeClass("glyphicon-chevron-up"),jQuery(e).find("span.glyphicon").addClass("glyphicon-chevron-down")):(jQuery(e).find("span.glyphicon").removeClass("glyphicon-chevron-down"),jQuery(e).find("span.glyphicon").addClass("glyphicon-chevron-up"))},300);var t=jQuery(this).closest(".panel.panel-default");jQuery("#lfb_tld_tdgnPanel .panel.panel-default").each(function(){jQuery(this).find(".panel-heading>.panel-title>a").is(".collapsed")||jQuery(this).is(t)||(jQuery(this).find(".panel-heading span.glyphicon").removeClass("glyphicon-chevron-up"),jQuery(this).find(".panel-heading span.glyphicon").addClass("glyphicon-chevron-down"),jQuery(this).find(".panel-collapse").removeClass("in"))})}),jQuery("#lfb_tld_tdgnContainer .lfb_tld_slider").each(function(){var e=parseInt(jQuery(this).attr("data-min"));0==e&&(e=0);var t=parseInt(jQuery(this).attr("data-max"));0==t&&(t=30);var l=1;jQuery(this).attr("data-step")&&"undefined"!=jQuery(this).attr("data-step")&&""!=jQuery(this).attr("data-step")&&(l=(0<=jQuery(this).attr("data-step").indexOf(".")?parseFloat:parseInt)(jQuery(this).attr("data-step")));var a=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+e+"</div></div>").css({position:"absolute",top:-55,left:-12,opacity:1}).hide();jQuery(this).slider({min:parseInt(e),max:parseInt(t),value:parseInt(e),step:l,orientation:"horizontal",change:function(e,t){a.find(".tooltip-inner").html(t.value),jQuery(this).next(".lfb_tld_sliderField").val(t.value)},slide:function(e,t){a.find(".tooltip-inner").html(t.value),a.show(),jQuery(this).next(".lfb_tld_sliderField").val(t.value)},stop:function(e,t){a.find(".tooltip-inner").html(t.value),a.hide(),jQuery(this).next(".lfb_tld_sliderField").val(t.value),jQuery(this).trigger("slide")}}).find(".ui-slider-handle").append(a).on("mouseenter",function(){a.show()}).on("mouseleave",function(){a.hide()}),0<jQuery(this).next(".lfb_tld_sliderField").length&&(jQuery(this).next(".lfb_tld_sliderField").attr("min",e),jQuery(this).next(".lfb_tld_sliderField").attr("max",t),jQuery(this).next(".lfb_tld_sliderField").val(e))}),jQuery("#lfb_tld_tdgnContainer .lfb_tld_selectpicker").removeClass("form-control").selectpicker(),jQuery("#lfb_tld_tdgnContainer .lfb_bootstrap-select").on("click",function(){jQuery(this).is(".open")?jQuery(this).removeClass("open"):jQuery(this).addClass("open")}),jQuery("#lfb_tld_stateSelect").closest(".lfb_bootstrap-select").find(".btn.dropdown-toggle").addClass("btn-info")}function lfb_tld_tdgn_toggleSection(e,t){t&&!jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionArrow > span").is(".glyphicon-chevron-up")&&jQuery("#lfb_tld_tdgnPanel .lfb_tld_tdgn_section:not(.lfb_tld_closed)").each(function(){!jQuery(this).attr("data-title")!=jQuery(e).closest(".lfb_tld_tdgn_section").attr("data-title")&&lfb_tld_tdgn_toggleSection(jQuery(this).find(".lfb_tld_tdgn_sectionTitle").get(0),!1)}),jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionArrow > span").is(".glyphicon-chevron-up")?(jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionArrow > span").removeClass("glyphicon-chevron-up"),jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionArrow > span").addClass("glyphicon-chevron-down"),jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionBody,.lfb_tld_tdgn_sectionBar").slideUp(),jQuery(e).closest(".lfb_tld_tdgn_section").addClass("lfb_tld_closed")):(jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionArrow > span").removeClass("glyphicon-chevron-down"),jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionArrow > span").addClass("glyphicon-chevron-up"),jQuery(e).closest(".lfb_tld_tdgn_section").find(".lfb_tld_tdgn_sectionBody,.lfb_tld_tdgn_sectionBar").slideDown(),jQuery(e).closest(".lfb_tld_tdgn_section").removeClass("lfb_tld_closed"))}function lfb_tld_tdgn_toggleTdgnPanel(){jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").is(".glyphicon-chevron-left")?(jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").removeClass("glyphicon-chevron-left"),jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").addClass("glyphicon-chevron-right"),jQuery("#lfb_tld_tdgnPanel #lfb_tld_tdgnPanelHeaderTitle").fadeOut(50),jQuery("#lfb_tld_tdgnPanel #lfb_tld_tdgnPanelHeader .fa").fadeOut(50),jQuery("#lfb_tld_tdgnPanel").addClass("lfb_tld_collapsed"),jQuery("#lfb_tld_tdgnInspector").addClass("lfb_tld_panelFullWidth"),jQuery("#lfb_tld_tdgnFrame").addClass("lfb_tld_panelFullWidth")):(jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").removeClass("glyphicon-chevron-right"),jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").addClass("glyphicon-chevron-left"),setTimeout(function(){jQuery("#lfb_tld_tdgnPanel #lfb_tld_tdgnPanelHeaderTitle").fadeIn(150),jQuery("#lfb_tld_tdgnPanel #lfb_tld_tdgnPanelHeader .fa").fadeIn(260)},200),jQuery("#lfb_tld_tdgnPanel").removeClass("lfb_tld_collapsed"),jQuery("#lfb_tld_tdgnInspector").removeClass("lfb_tld_panelFullWidth"),jQuery("#lfb_tld_tdgnFrame").removeClass("lfb_tld_panelFullWidth"),$("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").is(".lfb_tldSelection")&&lfb_tld_stopSelectionElement()),lfb_tld_updateFrameSize()}function lfb_tld_toggleSavePanel(){lfb_tld_confirmSaveStyles()}function lfb_tld_confirmSaveStyles(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_tld_saveCSS",styles:lfb_tld_formatStylesBeforeSend(),formID:lfb_currentFormID,gfonts:lfb_tld_getGoogleFontsUsed()},success:function(e){jQuery("#lfb_tld_winSaveDialog").fadeOut(260),jQuery("#lfb_tld_winSaveDialog").fadeOut();var t=Math.floor(1e4*Math.random()+1);lfb_tld_notification(lfb_data.texts.modifsSaved,"glyphicon glyphicon-info-sign",!1,!0),jQuery("#lfb_tld_tdgnFrame").attr("src",lfb_tld_previewUrl+"&tmp="+t+"&lfb_designForm=1"),lfb_tld_initStyles(),lfb_tld_unselectElement()}})}function lfb_tld_confirmSaveStylesBeforeEdit(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_tld_saveCSS",styles:lfb_tld_formatStylesBeforeSend(),formID:lfb_currentFormID,gfonts:lfb_tld_getGoogleFontsUsed()},success:function(e){var t=Math.floor(1e4*Math.random()+1);lfb_tld_notification(lfb_data.texts.modifsSaved,"glyphicon glyphicon-info-sign",!1,!0),jQuery("#lfb_tld_tdgnFrame").attr("src",lfb_tld_previewUrl+"&tmp="+t+"&lfb_designForm=1"),lfb_tld_initStyles(),lfb_tld_unselectElement(),lfb_tld_editCSS()}})}function lfb_tld_tdgn_toggleInspector(){jQuery("#lfb_tld_tdgnInspectorToggleBtn > span.glyphicon").is(".glyphicon-chevron-down")?(jQuery("#lfb_tld_tdgnInspectorToggleBtn > span.glyphicon").removeClass("glyphicon-chevron-down"),jQuery("#lfb_tld_tdgnInspectorToggleBtn > span.glyphicon").addClass("glyphicon-chevron-up"),jQuery("#lfb_tld_tdgnFrame").animate({paddingBottom:46},250),jQuery("#lfb_tld_tdgnInspector").addClass("lfb_tld_collapsed")):(jQuery("#lfb_tld_tdgnInspectorToggleBtn > span.glyphicon").removeClass("glyphicon-chevron-up"),jQuery("#lfb_tld_tdgnInspectorToggleBtn > span.glyphicon").addClass("glyphicon-chevron-down"),jQuery("#lfb_tld_tdgnFrame").animate({paddingBottom:280},250),jQuery("#lfb_tld_tdgnInspector").removeClass("lfb_tld_collapsed"))}function lfb_tld_tdgn_applyModifsChange(){"cssClasses"==jQuery("#lfb_tld_tdgn_applyModifsTo").val()?jQuery("#lfb_tld_tdgn_applyToClasses").closest(".form-group").slideDown():jQuery("#lfb_tld_tdgn_applyToClasses").closest(".form-group").slideUp()}function tdn_viewTreeItem(e){lfb_tld_selectElement(jQuery("#lfb_tld_tdgnFrame").contents().find("#"+jQuery(e).attr("data-elementid"))),lfb_tld_elementInitialized=!1,lfb_tld_getElementStyles(jQuery("#lfb_tld_tdgnFrame").contents().find("#"+jQuery(e).attr("data-elementid"))[0]),setTimeout(function(){lfb_tld_elementInitialized=!0},250)}function lfb_tld_treed(e,t){var l="glyphicon-minus-sign",a="glyphicon-plus-sign";void 0!==e&&(void 0!==e.openedClass&&(l=e.openedClass),void 0!==e.closedClass&&(a=e.closedClass));t=jQuery(t);t.addClass("lfb_tld_tree"),t.find("li").each(function(){jQuery(this).children("ul").length;var e=$('<a href="javascript:" class="lfb_tld_treeEyeLink"><span class="glyphicon glyphicon-eye-open" ></span></a>');e.on("click",function(){lfb_tdn_viewTreeItem(jQuery(this).parent())}),e.on("mouseover",function(){jQuery(this).addClass("tdn_hover")}),e.on("mouseleave",function(){jQuery(this).removeClass("tdn_hover")})}),t.find("li").has("ul").each(function(){var e=jQuery(this);e.prepend("<i class='indicator glyphicon "+a+"'></i>"),e.addClass("branch"),e.on("click",function(e){this!=e.target||jQuery(this).find(".lfb_tld_treeEyeLink").is(".tdn_hover")||(jQuery(this).children("i:first").toggleClass(l+" "+a),jQuery(this).children().children("li").toggle(),jQuery(this).children("ul").is(".lfb_tld_open")?jQuery(this).children("ul").removeClass("lfb_tld_open"):jQuery(this).children("ul").addClass("lfb_tld_open"))}),e.children().children("li").toggle()}),t.find(".branch .indicator").each(function(){jQuery(this).on("click",function(){jQuery(this).closest("li").on("click")})}),t.find(".branch>a:not(.lfb_tld_treeEyeLink)").each(function(){jQuery(this).on("click",function(e){jQuery(this).closest("li").on("click"),e.preventDefault()})}),t.find(".branch>button").each(function(){jQuery(this).on("click",function(e){jQuery(this).closest("li").on("click"),e.preventDefault()})}),t.find(".branch>a.lfb_tld_treeEyeLink").each(function(){jQuery(this).on("click",function(e){e.preventDefault()})})}function lfb_tld_expandTree(e){0<jQuery('#lfb_tld_tdgnInspector a[data-targetid="'+e+'"]').length&&lfb_tld_expandTreeParent(jQuery('#lfb_tld_tdgnInspector li[data-elementid="'+e+'"]'))}function lfb_tld_expandTreeParent(e){e.children("ul").is(".lfb_tld_open")||e.children("a[data-targetid]").trigger("click"),0<e.closest(".lfb_tld_tree").length&&lfb_tld_expandTreeParent(e.parent().closest("li"))}function lfb_tld_getPath(e,t,l){var a,n,i="";return 0<jQuery(e).length&&void 0!==jQuery(e).prop("tagName")&&"lfb_form"!=jQuery(e).attr("id")&&(l&&t&&(!jQuery(e).attr("id")||"lfb_panel"!=jQuery(e).attr("id"))||!jQuery(e).attr("id")||"ultimate-"==jQuery(e).attr("id").substr(0,9)||"ui-id-"==jQuery(e).attr("id").substr(0,6)||"dp"==jQuery(e).attr("id").substr(0,2)?(t?(n="",jQuery(e).attr("class")&&0<jQuery(e).attr("class").length&&(l||!jQuery(e).is(".row"))&&(n=jQuery(e).attr("class"),l&&(n=jQuery("#lfb_tld_tdgn_applyToClasses").val()),a="",jQuery.each(n.split(" "),function(){0==this.indexOf("lfb_itemContainer_")&&(a=this)}),n=(n=(n=(n=(n=(n=(n=(n="."+n.replace(/  /g," ")).replace(/ /g,".")).replace("lfb_activeStep","")).replace("col-md-2","")).replace("col-md-12","")).replace("lfb_tld_edited","")).replace("lfb_tld_selectedElement","")).replace("lfb_tld_hasShadow",""),""!=a&&(n=n.replace(a,"")),"."==(n=(n=(n=n.replace("..",".")).replace("..",".")).replace("..",".")).substr(n.length-1,1)&&(n=n.substr(0,n.length-1)),"."==n.substr(n.length-1,1)&&(n=n.substr(0,n.length-1)),i=l?" "+n+i:" "+jQuery(e).prop("tagName")+n+i)):(n=">"+jQuery(e).prop("tagName")+":nth-child("+(jQuery(e).index()+1)+")",jQuery(e).is(".lfb_genSlide")?n='> [data-stepid="'+jQuery(e).attr("data-stepid")+'"]':jQuery(e).is("[data-itemid]")&&(n='> [data-itemid="'+jQuery(e).attr("data-itemid")+'"]'),i=n+i),jQuery(e).parent().is("#lfb_form")||(i=lfb_tld_getPath(jQuery(e).parent(),t,!1)+i)):i+="#"+jQuery(e).attr("id")),i}function lfb_tld_isHovered(e){return 0<jQuery(lfb_tld_getPath(e,!1,!0)+":hover").length}function lfb_tld_updateDomTree(){var e=lfb_tld_analyzeElement(jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form"),0);jQuery("#lfb_tld_tdgnInspectorBody").html("<ul>"+e+"</ul>"),lfb_tld_treed("undefined",jQuery("#lfb_tld_tdgnInspectorBody>ul").get(0))}function lfb_tld_analyzeElement(e,t){t++;var l=e.attr("id");e.attr("id")&&0<e.attr("id").length?e.attr("id"):(e.uniqueId(),l=e.attr("id")),e.attr("tldtreeinit",!0);var a='<li data-index="'+t+'"  data-elementid="'+l+'">',n=lfb_tld_getElementName(e,!1),l=jQuery(e).text();0==jQuery(e).children().length?200<l.length&&(l=l.substr(0,200)+"..."):l="";l='<span class="lfb_tld_htmlContent">'+l+"</span>";return a+='<a href="javascript:" data-targetid="'+e.attr("id")+'" style="padding-left:'+(6*t+20)+'px;">'+n+"  "+l+"</a>",0<e.children(":not(script)").length&&(a+="<ul>",e.children(":not(script)").each(function(){a+=lfb_tld_analyzeElement(jQuery(this),t)}),a+="</ul>"),a+="</li>"}function lfb_tld_getElementName(e,t){var l="",a="";e.attr("id")&&0<e.attr("id").length&&0!=e.attr("id").indexOf("ui-id-")&&0!=e.attr("id").indexOf("dp")&&0!=e.attr("id").indexOf("ultimate-")&&(a="#"+e.attr("id")),a='<span style="color: #f1c40f;">'+a+"</span>",e.attr("class")&&0<e.attr("class").length&&jQuery.each(e.attr("class").split(" "),function(){0!=this.indexOf("lfb_tld_")&&(l+="."+this)});t=t?25:50;return l.length>t&&(l=l.substr(0,t)+"..."),l='<span style="color: #17a68a;">'+l+"</span>",e.prop("tagName")&&null!==e.prop("tagName")?e.prop("tagName").toLowerCase()+a+l:a+l}function lfb_tld_selectElement(e){jQuery(lfb_tld_selectedElement).is(jQuery(e))||jQuery("#lfb_tld_stateSelect").val("default").selectpicker("refresh");var t=lfb_tld_getElementName(e,!0);jQuery("#lfb_tld_tdgnFrame").contents().find(".lfb_tld_selectedElement").removeClass("lfb_tld_selectedElement"),e.addClass("lfb_tld_selectedElement"),$("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_tld_updateSelector"),jQuery("#lfb_tld_tdgn_applyScope").val("all"),jQuery("#lfb_tld_tdgn_selectedElement").html(t),jQuery("#lfb_tld_tdgnPanelBody > :not(#lfb_tld_tdgn_selectElementBtn)").slideDown();t=jQuery(e).attr("class");"string"==typeof t&&(t=(t=(t=t.replace("lfb_tld_edited","")).replace("lfb_tld_selectedElement","")).replace("lfb_tld_hasShadow","")),"  "==t.substr(t.length-2,2)&&(t=t.substr(0,t.length-2)),jQuery("#lfb_tld_tdgn_applyToClasses").val(t),jQuery("#lfb_tld_tdgnInspectorBody .lfb_tld_tree a.lfb_tld_active").removeClass("lfb_tld_active"),jQuery('#lfb_tld_tdgnInspectorBody .lfb_tld_tree a[data-targetid="'+jQuery(e).attr("id")+'"]').addClass("lfb_tld_active"),lfb_tld_expandTree(jQuery(e).attr("id")),jQuery("#lfb_tld_tdgnInspector").is(".lfb_tld_collapsed"),jQuery("#lfb_tld_tdgnFrame").contents().find('#lfb_form.lfb_bootstraped[data-form="'+lfb_currentFormID+'"]').animate({scrollTop:jQuery(e).offset().top-80},500),setTimeout(function(){jQuery("#lfb_tld_tdgnInspectorBody").animate({scrollTop:jQuery("#lfb_tld_tdgnInspectorBody").scrollTop()+jQuery('#lfb_tld_tdgnInspectorBody .lfb_tld_tree a[data-targetid="'+jQuery(e).attr("id")+'"]').offset().top-jQuery("#lfb_tld_tdgnInspectorBody").offset().top-20},200)},200),lfb_tld_selectedElement=e,jQuery(lfb_tld_selectedElement).is("#lfb_form")||0<jQuery(lfb_tld_selectedElement).closest("#lfb_summary").length||jQuery(lfb_tld_selectedElement).is("#lfb_summary")?(jQuery("#tdgn-style-margins").closest(".panel.panel-default").slideUp(),jQuery("#tdgn-style-position").closest(".panel.panel-default").slideUp(),jQuery("#tdgn-style-size").closest(".panel.panel-default").slideUp(),jQuery("#tdgn-style-visibility").closest(".panel.panel-default").slideUp()):(jQuery("#tdgn-style-margins").closest(".panel.panel-default").slideDown(),jQuery("#tdgn-style-position").closest(".panel.panel-default").slideDown(),jQuery("#tdgn-style-size").closest(".panel.panel-default").slideDown(),jQuery("#tdgn-styapplyMle-visibility").closest(".panel.panel-default").slideDown())}function lfb_tld_unselectElement(){lfb_tld_selectedElement=null,jQuery("#lfb_tld_stateSelect").val("default").selectpicker("refresh"),jQuery("#lfb_tld_tdgnPanelBody > :not(#lfb_tld_tdgn_selectElementBtn)").slideUp(),lfb_tld_firstLoad||$("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").trigger("lfb_tld_unSelectElement")}function lfb_tld_confirmStylesElement(){}function lfb_tld_updateFrameSize(){var e;jQuery("#lfb_tld_tdgnFrame").is(".lfb_tld_viewTablet")||jQuery("#lfb_tld_tdgnFrame").is(".lfb_tld_viewMobile")?(e=780,jQuery("#lfb_tld_tdgnFrame").is(".lfb_tld_viewMobile")?(jQuery("#lfb_tld_tdgnFrame").css({width:380}),e=380):jQuery("#lfb_tld_tdgnFrame").is(".lfb_tld_viewTablet")&&jQuery("#lfb_tld_tdgnFrame").css({width:780}),jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").is(".glyphicon-chevron-left")?jQuery("#lfb_tld_tdgnFrame").css({left:jQuery(window).width()/2-(e/2-140)}):jQuery("#lfb_tld_tdgnFrame").css({left:jQuery(window).width()/2-e/2})):(jQuery("#lfb_tld_tdgnPanelToggleBtn > span.glyphicon").is(".glyphicon-chevron-left"),jQuery("#lfb_tld_tdgnFrame").css({width:"100%",left:0}))}function lfb_tld_changeDeviceMode(e){var t=new Array;lfb_tld_deviceMode=e,jQuery("#lfb_tld_tdgnFrame").removeClass("lfb_tld_viewTablet"),jQuery("#lfb_tld_tdgnFrame").removeClass("lfb_tld_viewMobile"),"tabletPhone"==e||"tablet"==e?jQuery("#lfb_tld_tdgnFrame").addClass("lfb_tld_viewTablet"):"phone"==e&&jQuery("#lfb_tld_tdgnFrame").addClass("lfb_tld_viewMobile"),setTimeout(function(){lfb_tld_updateFrameSize()},200),jQuery('a[data-devicebtn="all"]').removeClass("lfb_tld_active"),jQuery('a[data-devicebtn="desktop"]').removeClass("lfb_tld_active"),jQuery('a[data-devicebtn="desktopTablet"]').removeClass("lfb_tld_active"),jQuery('a[data-devicebtn="tabletPhone"]').removeClass("lfb_tld_active"),jQuery('a[data-devicebtn="tablet"]').removeClass("lfb_tld_active"),jQuery('a[data-devicebtn="phone"]').removeClass("lfb_tld_active"),"all"==e?(jQuery('a[data-devicebtn="all"]').addClass("lfb_tld_active"),t.push("all")):"desktop"==e?(jQuery('a[data-devicebtn="desktop"]').addClass("lfb_tld_active"),t.push("all"),t.push("desktop")):"desktopTablet"==e?(jQuery('a[data-devicebtn="desktopTablet"]').addClass("lfb_tld_active"),t.push("all"),t.push("tablet"),t.push("desktop")):"tabletPhone"==e?(jQuery('a[data-devicebtn="tabletPhone"]').addClass("lfb_tld_active"),t.push("all"),t.push("phone"),t.push("tablet")):"tablet"==e?(jQuery('a[data-devicebtn="tablet"]').addClass("lfb_tld_active"),t.push("all"),t.push("tablet")):"phone"==e&&(jQuery('a[data-devicebtn="phone"]').addClass("lfb_tld_active"),t.push("all"),t.push("phone")),jQuery("#lfb_tld_tdgnFrame").contents().find("body").find("*.lfb_tld_edited").each(function(){jQuery(this).is("[data-originalstyle]")?jQuery(this).attr("style",jQuery(this).attr("data-originalstyle")):jQuery(this).attr("style","")}),jQuery.each(t,function(){var e=lfb_tld_getElementsDataByDevice(this);e&&jQuery.each(e.elements,function(){jQuery(this.element).is(jQuery("#lfb_tld_tdgnFrame").contents().find(this.domSelector))||(this.element=jQuery("#lfb_tld_tdgnFrame").contents().find(this.domSelector)),jQuery("#lfb_tld_tdgnFrame").contents().find(this.domSelector).is("[data-originalstyle]")&&jQuery("#lfb_tld_tdgnFrame").contents().find(this.domSelector).attr("style",jQuery("#lfb_tld_tdgnFrame").contents().find(this.domSelector).attr("style")+";"+jQuery("#lfb_tld_tdgnFrame").contents().find(this.domSelector).attr("data-originalstyle")),"hover"==jQuery("#lfb_tld_stateSelect").val()?jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form "+this.domSelector).attr("style",this.hoverStyle):"focus"==jQuery("#lfb_tld_stateSelect").val()?jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form "+this.domSelector).attr("style",this.focusStyle):jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form "+this.domSelector).attr("style",this.style)})}),null!=lfb_tld_selectedElement&&0<jQuery(lfb_tld_selectedElement).length&&setTimeout(function(){null!=lfb_tld_selectedElement&&0<jQuery(lfb_tld_selectedElement).length&&($("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").is(".lfb_tldSelection")||(lfb_tld_selectElement(jQuery(lfb_tld_selectedElement)),lfb_tld_elementInitialized=!1,lfb_tld_getElementStyles(lfb_tld_selectedElement),setTimeout(function(){lfb_tld_elementInitialized=!0},250)))},500)}function lfb_tld_prepareSelectElement(){0<jQuery("#lfb_tld_tdgnFrame").contents().find("#lfb_form").find('*:not([data-tldtreeinit="true"])').length&&lfb_tld_updateDomTree(),jQuery("#lfb_tld_tdgnInspector").is(".lfb_tld_collapsed")||lfb_tld_tdgn_toggleInspector(),jQuery("#lfb_tld_tdgnPanel").is(".lfb_tld_collapsed")||lfb_tld_tdgn_toggleTdgnPanel();var e=$('<a href="javascript:" class="btn btn-warning lfb_stopSelectionBtn"></a>');e.append('<span class="glyphicon glyphicon-stop"></span>'),e.append(lfb_data.texts.stopSelection);var t=$("<div></div>");t.append('<p class="text-center"></p>'),t.find("p").append(e),lfb_tld_notification(t.html()),$(".lfb_tld_notificationText a.lfb_stopSelectionBtn").on("click",lfb_tld_stopSelectionElement),$("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").addClass("lfb_tldSelection")}function lfb_tld_stopSelectionElement(){lfb_tld_closeNotification(),$("#lfb_tld_tdgnFrame")[0].contentWindow.jQuery("#lfb_form").removeClass("lfb_tldSelection"),jQuery("#lfb_tld_tdgnPanel").is(".lfb_tld_collapsed")&&lfb_tld_tdgn_toggleTdgnPanel()}function lfb_tld_notification(e,t,l,a){lfb_tld_closeNotification(),t=t||"glyphicon glyphicon-info-sign";var n=jQuery('<div class="lfb_tld_notification"></div>');n.append('<div class="'+t+'"></div>'),n.append('<div class="lfb_tld_notificationText">'+e+"</div>"),l&&(n.append('<a href="javascript:"><span class="glyphicon glyphicon-remove"></span></a>'),n.find("a").on("click",lfb_tld_closeNotification)),a&&setTimeout(lfb_tld_closeNotification,7e3),jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_tld_tdgnContainer").append(n),n.slideDown()}function lfb_tld_closeNotification(){var e;0<jQuery("#lfb_bootstraped.lfb_bootstraped #lfb_tld_tdgnContainer >.lfb_tld_notification").length&&(e=jQuery("#lfb_bootstraped.lfb_bootstraped  #lfb_tld_tdgnContainer>.lfb_tld_notification").slideUp(),setTimeout(function(){e.remove()},500))}function lfb_tld_itemSelected(e,t){jQuery(t).is("lfb_tld_edited")||(jQuery(t).attr("data-originalstyle",jQuery(t).attr("style")),jQuery(t).addClass("lfb_tld_edited")),lfb_tld_selectElement(jQuery(t)),lfb_tld_stopSelectionElement(),lfb_tld_elementInitialized=!1,lfb_tld_getElementStyles(t),jQuery('.lfb_tld_tdgn_section:not([data-title="Selection"]):not(.lfb_tld_closed) .lfb_tld_tdgn_sectionArrow').each(function(){lfb_tld_tdgn_toggleSection(this,!1)}),0<jQuery('.lfb_tld_tdgn_section[data-title="Selection"].lfb_tld_closed .lfb_tld_tdgn_sectionArrow').length&&lfb_tld_tdgn_toggleSection(jQuery('.lfb_tld_tdgn_section[data-title="Selection"].lfb_tld_closed .lfb_tld_tdgn_sectionArrow').get(0),!1),setTimeout(function(){lfb_tld_elementInitialized=!0},250)}function lfb_tld_initStyleComponent(e){}function lfb_tld_hex2Rgba(e,t){if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(e=e.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+","+t+")"}function lfb_tld_rgb2hex(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function lfb_tld_getElementStyles(e){var t=jQuery(e),l=1;jQuery("#lfb_tld_tdgn_applyModifsTo").val("onlyThis"),jQuery("#lfb_tld_styleBackgroundType_color").val("#2c3e50"),jQuery("#lfb_tld_style_fontColor").val("#2c3e50"),-1!=t.css("background-image").indexOf("url(")?(jQuery("#lfb_tld_styleBackgroundType").val("image"),jQuery("#lfb_tld_styleBackgroundType_imageUrl").val(t.css("background-image").replace("url(","").replace(")",""))):""!=t.css("background-color")&&"rgba(0, 0, 0, 0)"!=t.css("background-color")?(jQuery("#lfb_tld_styleBackgroundType_imageUrl").val(""),s=lfb_tld_rgb2hex(t.css("background-color")),0==t.css("background-color").indexOf("rgba")&&(l=t.css("background-color").substr(t.css("background-color").lastIndexOf(",")+1,t.css("background-color").lastIndexOf(")")-(t.css("background-color").lastIndexOf(",")+1))),"#"==s&&(s="#2c3e50"),jQuery("#lfb_tld_styleBackgroundType_color").val(s),jQuery("#lfb_tld_styleBackgroundType_color").trigger("change"),jQuery("#lfb_tld_styleBackgroundType").val("color")):jQuery("#lfb_tld_styleBackgroundType").val(""),jQuery("#lfb_tld_styleBackgroundType_colorAlpha").slider("value",l),jQuery("#lfb_tld_styleBackgroundType_imageSize").val(t.css("background-size")),jQuery("#lfb_tld_style_clear").val(t.css("clear")),jQuery("#lfb_tld_style_float").val(t.css("float"));var a=0;isNaN(parseInt(t.css("border-width")))||(a=parseInt(t.css("border-width"))),jQuery("#lfb_tld_style_borderSize").slider("value",a),jQuery("#lfb_tld_style_width").slider("value",0),jQuery("#lfb_tld_style_widthFlex").slider("value",0),jQuery("#lfb_tld_style_height").slider("value",0),jQuery("#lfb_tld_style_heightFlex").slider("value",0),jQuery("#lfb_tld_style_left").slider("value",0),jQuery("#lfb_tld_style_leftFlex").slider("value",0),jQuery("#lfb_tld_style_right").slider("value",0),jQuery("#lfb_tld_style_rightFlex").slider("value",0),jQuery("#lfb_tld_style_top").slider("value",0),jQuery("#lfb_tld_style_topFlex").slider("value",0),jQuery("#lfb_tld_style_bottom").slider("value",0),jQuery("#lfb_tld_style_bottomFlex").slider("value",0),jQuery("#lfb_tld_style_marginLeft").slider("value",0),jQuery("#lfb_tld_style_marginLeftFlex").slider("value",0),jQuery("#lfb_tld_style_marginRight").slider("value",0),jQuery("#lfb_tld_style_marginRightFlex").slider("value",0),jQuery("#lfb_tld_style_marginTop").slider("value",0),jQuery("#lfb_tld_style_marginTopFlex").slider("value",0),jQuery("#lfb_tld_style_marginBottom").slider("value",0),jQuery("#lfb_tld_style_marginBottomFlex").slider("value",0),jQuery("#lfb_tld_style_borderRadiusTopLeft").slider("value",0),jQuery("#lfb_tld_style_borderRadiusTopRight").slider("value",0),jQuery("#lfb_tld_style_borderRadiusBottomLeft").slider("value",0),jQuery("#lfb_tld_style_borderRadiusBottomLeft").slider("value",0),0<t.css("width").indexOf("%")?(jQuery("#lfb_tld_style_widthType").val("flexible"),jQuery("#lfb_tld_style_widthFlex").slider("value",parseInt(t.css("width")))):t.width()!=t.parent().width()?(jQuery("#lfb_tld_style_widthType").val("fixed"),jQuery("#lfb_tld_style_width").slider("value",t.width())):jQuery("#lfb_tld_style_widthType").val("auto"),0<t.css("height").indexOf("%")?(jQuery("#lfb_tld_style_heightType").val("flexible"),jQuery("#lfb_tld_style_heightFlex").slider("value",parseInt(t.css("height")))):t.height()!=t.parent().height()?(jQuery("#lfb_tld_style_heightType").val("fixed"),jQuery("#lfb_tld_style_height").slider("value",t.height())):jQuery("#lfb_tld_style_heightType").val("auto"),jQuery("#lfb_tld_style_borderStyle").val(t.css("border-style")),jQuery("#lfb_tld_style_borderColor").val(t.css("border-color"));var n=t.css("display");0==jQuery('#lfb_tld_style_display > option[value="'+n+'"]').length&&(n="inherit"),jQuery("#lfb_tld_style_display").val(n),jQuery("#lfb_tld_style_position").val(t.css("position")),"auto"!=t.css("left")?jQuery("#lfb_tld_style_positionLeft").val("fixed"):jQuery("#lfb_tld_style_positionLeft").val("auto"),"auto"!=t.css("right")?jQuery("#lfb_tld_style_positionRight").val("fixed"):jQuery("#lfb_tld_style_positionRight").val("auto"),"auto"!=t.css("top")?jQuery("#lfb_tld_style_positionTop").val("fixed"):jQuery("#lfb_tld_style_positionTop").val("auto"),"auto"!=t.css("bottom")?jQuery("#lfb_tld_style_positionBottom").val("fixed"):jQuery("#lfb_tld_style_positionBottom").val("auto");var i=parseInt(t.css("left"));isNaN(i)&&(i=0),0<t.css("left").indexOf("%")?jQuery("#lfb_tld_style_leftFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_left").slider("value",i),i=parseInt(t.css("right")),isNaN(i)&&(i=0),0<t.css("right").indexOf("%")?jQuery("#lfb_tld_style_rightFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_right").slider("value",i),i=parseInt(t.css("top")),isNaN(i)&&(i=0),0<t.css("top").indexOf("%")?jQuery("#lfb_tld_style_topFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_top").slider("value",i),i=parseInt(t.css("bottom")),isNaN(i)&&(i=0),0<t.css("bottom").indexOf("%")?jQuery("#lfb_tld_style_bottomFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_bottom").slider("value",i),0<t.css("margin-left").indexOf("px")?jQuery("#lfb_tld_style_marginTypeLeft").val("fixed"):0<t.css("margin-left").indexOf("%")?jQuery("#lfb_tld_style_marginTypeLeft").val("flexible"):jQuery("#lfb_tld_style_marginTypeLeft").val("auto"),0<t.css("margin-right").indexOf("px")?jQuery("#lfb_tld_style_marginTypeRight").val("fixed"):0<t.css("margin-right").indexOf("%")?jQuery("#lfb_tld_style_marginTypeRight").val("flexible"):jQuery("#lfb_tld_style_marginTypeRight").val("auto"),0<t.css("margin-top").indexOf("px")?jQuery("#lfb_tld_style_marginTypeTop").val("fixed"):0<t.css("margin-top").indexOf("%")?jQuery("#lfb_tld_style_marginTypeTop").val("flexible"):jQuery("#lfb_tld_style_marginTypeTop").val("auto"),0<t.css("margin-bottom").indexOf("px")?jQuery("#lfb_tld_style_marginTypeBottom").val("fixed"):0<t.css("margin-bottom").indexOf("%")?jQuery("#lfb_tld_style_marginTypeBottom").val("flexible"):jQuery("#lfb_tld_style_marginTypeBottom").val("auto"),0<t.css("padding-left").indexOf("px")?jQuery("#lfb_tld_style_paddingTypeLeft").val("fixed"):0<t.css("padding-left").indexOf("%")?jQuery("#lfb_tld_style_paddingTypeLeft").val("flexible"):jQuery("#lfb_tld_style_paddingTypeLeft").val("auto"),0<t.css("padding-right").indexOf("px")?jQuery("#lfb_tld_style_paddingTypeRight").val("fixed"):0<t.css("padding-right").indexOf("%")?jQuery("#lfb_tld_style_paddingTypeRight").val("flexible"):jQuery("#lfb_tld_style_paddingTypeRight").val("auto"),0<t.css("padding-top").indexOf("px")?jQuery("#lfb_tld_style_paddingTypeTop").val("fixed"):0<t.css("padding-top").indexOf("%")?jQuery("#lfb_tld_style_paddingTypeTop").val("flexible"):jQuery("#lfb_tld_style_paddingTypeTop").val("auto"),0<t.css("padding-bottom").indexOf("px")?jQuery("#lfb_tld_style_paddingTypeBottom").val("fixed"):0<t.css("padding-bottom").indexOf("%")?jQuery("#lfb_tld_style_paddingTypeBottom").val("flexible"):jQuery("#lfb_tld_style_paddingTypeBottom").val("auto"),i=parseInt(t.css("padding-left")),isNaN(i)&&(i=0),0<t.css("padding-left").indexOf("%")?jQuery("#lfb_tld_style_paddingLeftFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_paddingLeft").slider("value",i),i=parseInt(t.css("padding-right")),isNaN(i)&&(i=0),0<t.css("padding-right").indexOf("%")?jQuery("#lfb_tld_style_paddingRightFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_paddingRight").slider("value",i),i=parseInt(t.css("padding-top")),isNaN(i)&&(i=0),0<t.css("padding-top").indexOf("%")?jQuery("#lfb_tld_style_paddingTopFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_paddingTop").slider("value",i),i=parseInt(t.css("padding-bottom")),isNaN(i)&&(i=0),0<t.css("padding-bottom").indexOf("%")?jQuery("#lfb_tld_style_paddingBottomFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_paddingBottom").slider("value",i),i=parseInt(t.css("margin-left")),isNaN(i)&&(i=0),0<t.css("margin-left").indexOf("%")?jQuery("#lfb_tld_style_marginLeftFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_marginLeft").slider("value",i),i=parseInt(t.css("margin-right")),isNaN(i)&&(i=0),0<t.css("margin-right").indexOf("%")?jQuery("#lfb_tld_style_marginRightFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_marginRight").slider("value",i),i=parseInt(t.css("margin-top")),isNaN(i)&&(i=0),0<t.css("margin-top").indexOf("%")?jQuery("#lfb_tld_style_marginTopFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_marginTop").slider("value",i),i=parseInt(t.css("margin-bottom")),isNaN(i)&&(i=0),0<t.css("margin-bottom").indexOf("%")?jQuery("#lfb_tld_style_marginBottomFlex").slider("value",i+"%"):jQuery("#lfb_tld_style_marginBottom").slider("value",i),jQuery("#lfb_tld_style_fontFamily").val(t.css("font-family").replace('"',"").replace('"',"")),jQuery("#lfb_tld_style_fontColor").val(t.css("color")),jQuery("#lfb_tld_style_fontSize").slider("value",parseInt(t.css("font-size"))),i=parseInt(t.css("line-height")),isNaN(i)&&(i=0),0<t.css("line-height").indexOf("%")?(jQuery("#lfb_tld_style_lineHeightType").val("flexible"),jQuery("#lfb_tld_style_lineHeightFlex").slider("value",i+"%")):(jQuery("#lfb_tld_style_lineHeightType").val("fixed"),jQuery("#lfb_tld_style_lineHeight").slider("value",i)),jQuery("#lfb_tld_style_lineHeight").slider("value",parseInt(t.css("line-height"))),jQuery("#lfb_tld_style_fontStyle option[value='italic']").prop("selected",!1),jQuery("#lfb_tld_style_fontStyle option[value='bold']").prop("selected",!1),jQuery("#lfb_tld_style_fontStyle option[value='underline']").prop("selected",!1);"italic"==t.css("font-style")&&jQuery("#lfb_tld_style_fontStyle option[value='italic']").prop("selected",!0),"bold"==t.css("font-weight")&&jQuery("#lfb_tld_style_fontStyle option[value='bold']").prop("selected",!0),"underline"==t.css("text-decoration")&&jQuery("#lfb_tld_style_fontStyle option[value='underline']").prop("selected",!0);var r="outside",o=0,e=0,s=0,l=1,a="rgb(255,255,255)",n=0,i=t.css("box-shadow");"none"!=t.css("box-shadow")&&t.is(".lfb_tld_hasShadow")?(0<t.css("box-shadow").indexOf("inset")&&(r="inside"),0==(a=i.substr(0,i.indexOf(")")+1)).indexOf("rgba")&&(l=a.substr(a.lastIndexOf(",")+1,a.lastIndexOf(")")-(a.lastIndexOf(",")+1))),o=i.substr(i.indexOf(")")+1,i.indexOf("px")-i.indexOf(")")-1),n=i.indexOf("px")+2,e=i.substr(n,i.indexOf("px",n)-n),n=i.indexOf("px",n)+2,s=i.substr(n,i.indexOf("px",n)-n)):r="none",jQuery("#lfb_tld_style_shadowType").val(r),jQuery("#lfb_tld_style_shadowColor").val(a),jQuery("#lfb_tld_style_shadowAlpha").slider("value",l),a="rgb(0,0,0)","none"==(i=t.css("text-shadow"))?jQuery("#lfb_tld_style_textShadowColor").val("rgba(0,0,0,0)"):(a=i.substr(0,i.indexOf(")")+1),o=i.substr(i.indexOf(")")+1,i.indexOf("px")-i.indexOf(")")-1),n=i.indexOf("px")+2,e=i.substr(n,i.indexOf("px",n)-n)),(l=0)==a.indexOf("rgba")&&(l=a.substr(a.lastIndexOf(",")+1,a.lastIndexOf(")")-(a.lastIndexOf(",")+1))),jQuery("#lfb_tld_style_textShadowAlpha").slider("value",l),jQuery("#lfb_tld_style_textShadowColor").val(a),jQuery("#lfb_tld_style_scrollX").val(t.css("overflow-x")),jQuery("#lfb_tld_style_scrollY").val(t.css("overflow-y")),jQuery("#lfb_tld_style_visibility").val(t.css("visibility")),"left"==t.css("text-align")||"right"==t.css("text-align")||"justify"==t.css("text-align")?jQuery("#lfb_tld_style_textAlign").val(t.css("text-align")):jQuery("#lfb_tld_style_textAlign").val("auto"),jQuery("#lfb_tld_style_opacity").slider("value",t.css("opacity")),jQuery("#lfb_tld_style_shadowX").slider("value",o),jQuery("#lfb_tld_style_shadowY").slider("value",e),jQuery("#lfb_tld_style_shadowSize").slider("value",s),jQuery("#lfb_tld_style_textShadowX").slider("value",o),jQuery("#lfb_tld_style_textShadowY").slider("value",e),jQuery("#lfb_tld_style_borderRadiusTopLeft").slider("value",parseInt(t.css("border-top-left-radius"))),jQuery("#lfb_tld_style_borderRadiusTopRight").slider("value",parseInt(t.css("border-top-right-radius"))),jQuery("#lfb_tld_style_borderRadiusBottomLeft").slider("value",parseInt(t.css("border-bottom-left-radius"))),jQuery("#lfb_tld_style_borderRadiusBottomRight").slider("value",parseInt(t.css("border-bottom-right-radius"))),lfb_tld_style_widthTypeChange(),lfb_tld_style_heightTypeChange(),jQuery("#lfb_tld_tdgnContainer .lfb_tld_slider").trigger("change"),jQuery("#lfb_tld_tdgnContainer").find("input:not(.lfb_tld_sliderField),select").trigger("change"),jQuery("#lfb_tld_tdgnContainer").find("select.lfb_tld_selectpicker").selectpicker("refresh")}function lfb_tld_tdgn_applyScopeChange(){"container"==jQuery("#lfb_tld_tdgn_applyScope").val()?jQuery("#lfb_tld_tdgn_scopeContainerClass").closest(".form-group").slideDown():jQuery("#lfb_tld_tdgn_scopeContainerClass").closest(".form-group").slideUp()}function lfb_tld_styleBackgroundTypeChange(){new Array;"color"==jQuery("#lfb_tld_styleBackgroundType").val()?(jQuery("#lfb_tld_styleBackgroundType_imageUrl").val(""),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({backgroundImage:"none"}),jQuery("#lfb_tld_styleBackgroundType_imageToggle").slideUp(),jQuery("#lfb_tld_styleBackgroundType_colorToggle").slideDown()):"image"==jQuery("#lfb_tld_styleBackgroundType").val()?(jQuery("#lfb_tld_styleBackgroundType_colorToggle").slideUp(),jQuery("#lfb_tld_styleBackgroundType_imageToggle").slideDown(),lfb_tld_selectedElement.css({backgroundColor:"transparent"})):(jQuery("#lfb_tld_styleBackgroundType_imageToggle").slideUp(),jQuery("#lfb_tld_styleBackgroundType_colorToggle").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({backgroundImage:"none",backgroundColor:"transparent"}))}function lfb_tld_styleBackgroundType_colorChange(){var e;"color"==jQuery("#lfb_tld_styleBackgroundType").val()&&(e=jQuery("#lfb_tld_styleBackgroundType_color").val(),-1<jQuery("#lfb_tld_styleBackgroundType_color").val().indexOf("rgb")&&(e=lfb_tld_rgb2hex(jQuery("#lfb_tld_styleBackgroundType_color").val())),e=""==e?"transparent":lfb_tld_hex2Rgba(e,jQuery("#lfb_tld_styleBackgroundType_colorAlpha").slider("value")),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({backgroundColor:e}))}function lfb_tld_styleBackgroundType_colorAlphaChange(){var e;"color"==jQuery("#lfb_tld_styleBackgroundType").val()&&""!=jQuery("#lfb_tld_styleBackgroundType_color").val()&&(e=jQuery("#lfb_tld_styleBackgroundType_color").val(),-1<jQuery("#lfb_tld_styleBackgroundType_color").val().indexOf("rgb")&&(e=lfb_tld_rgb2hex(jQuery("#lfb_tld_styleBackgroundType_color").val())),e=lfb_tld_hex2Rgba(e,jQuery("#lfb_tld_styleBackgroundType_colorAlpha").slider("value")),jQuery("#lfb_tld_styleBackgroundType_color").val(e),jQuery("#lfb_tld_styleBackgroundType_color").trigger("change"))}function lfb_tld_styleBackgroundType_imageChange(){var e,t;"image"==jQuery("#lfb_tld_styleBackgroundType").val()&&"none"!=jQuery("#lfb_tld_styleBackgroundType_imageUrl").val()&&(e="url("+jQuery("#lfb_tld_styleBackgroundType_imageUrl").val()+")",t=jQuery("#lfb_tld_styleBackgroundType_imageSize").val(),""==jQuery("#lfb_tld_styleBackgroundType_imageUrl").val()&&(e="none"),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({backgroundImage:e,backgroundSize:t}))}function lfb_tld_style_borderColorChange(){var e=jQuery("#lfb_tld_style_borderColor").val();""==e&&(e="transparent"),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({borderColor:e})}function lfb_tld_style_borderStyleChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({borderStyle:jQuery("#lfb_tld_style_borderStyle").val()})}function lfb_tld_style_borderSizeChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({borderWidth:jQuery("#lfb_tld_style_borderSize").slider("value")})}function lfb_tld_style_widthChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({width:jQuery("#lfb_tld_style_width").slider("value")})}function lfb_tld_style_widthFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({width:jQuery("#lfb_tld_style_widthFlex").slider("value")+"%"})}function lfb_tld_style_heightChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({height:jQuery("#lfb_tld_style_height").slider("value")})}function lfb_tld_style_heightFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({height:jQuery("#lfb_tld_style_heightFlex").slider("value")+"%"})}function lfb_tld_style_widthTypeChange(){var e=jQuery("#lfb_tld_style_widthType").val();"fixed"==e?(jQuery("#lfb_tld_style_width").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_widthFlex").closest(".form-group").slideUp()):"flexible"==e?(jQuery("#lfb_tld_style_widthFlex").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_width").closest(".form-group").slideUp()):(jQuery("#lfb_tld_style_width").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_widthFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({width:"auto"}))}function lfb_tld_style_heightTypeChange(){var e=jQuery("#lfb_tld_style_heightType").val();"fixed"==e?(jQuery("#lfb_tld_style_height").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_heightFlex").closest(".form-group").slideUp()):"flexible"==e?(jQuery("#lfb_tld_style_heightFlex").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_height").closest(".form-group").slideUp()):(jQuery("#lfb_tld_style_height").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_heightFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({height:"auto"}))}function lfb_tld_style_displayChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({display:jQuery("#lfb_tld_style_display").val()})}function lfb_tld_style_positionChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({position:jQuery("#lfb_tld_style_position").val()}),"static"==jQuery("#lfb_tld_style_position").val()?(jQuery("#lfb_tld_style_positionLeft").val("auto"),jQuery("#lfb_tld_style_positionLeft").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionLeft").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_left").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_leftFlex").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionRight").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionRight").val("auto"),jQuery("#lfb_tld_style_right").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_rightFlex").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionTop").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionTop").val("auto"),jQuery("#lfb_tld_style_top").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_topFlex").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionBottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_positionBottom").val("auto"),jQuery("#lfb_tld_style_bottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_bottomFlex").closest(".form-group").slideUp()):(jQuery("#lfb_tld_style_positionLeft").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_positionRight").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_positionTop").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_positionBottom").closest(".form-group").slideDown()),jQuery("#lfb_tld_style_positionBottom").trigger("change"),jQuery("#lfb_tld_style_positionTop").trigger("change"),jQuery("#lfb_tld_style_positionLeft").trigger("change"),jQuery("#lfb_tld_style_positionRight").trigger("change")}function lfb_tld_style_positionLeftChange(){"fixed"==jQuery("#lfb_tld_style_positionLeft").val()?(jQuery("#lfb_tld_style_left").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_leftFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_positionLeft").val()?(jQuery("#lfb_tld_style_left").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_leftFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_left").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_leftFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({left:"auto"}))}function lfb_tld_style_positionRightChange(){"fixed"==jQuery("#lfb_tld_style_positionRight").val()?(jQuery("#lfb_tld_style_right").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_rightFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_positionRight").val()?(jQuery("#lfb_tld_style_right").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_rightFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_right").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_rightFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({right:"auto"}))}function lfb_tld_style_floatChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({float:jQuery("#lfb_tld_style_float").val()})}function lfb_tld_style_clearChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({clear:jQuery("#lfb_tld_style_clear").val()})}function lfb_tld_style_marginTypeLeftChange(){"fixed"==jQuery("#lfb_tld_style_marginTypeLeft").val()?(jQuery("#lfb_tld_style_marginLeft").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_marginLeftFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_marginTypeLeft").val()?(jQuery("#lfb_tld_style_marginLeft").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginLeftFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_marginLeft").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginLeftFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginLeft:"auto"}))}function lfb_tld_style_marginTypeRightChange(){"fixed"==jQuery("#lfb_tld_style_marginTypeRight").val()?(jQuery("#lfb_tld_style_marginRight").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_marginRightFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_marginTypeRight").val()?(jQuery("#lfb_tld_style_marginRight").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginRightFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_marginRight").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginRightFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginRight:"auto"}))}function lfb_tld_style_marginTypeTopChange(){"fixed"==jQuery("#lfb_tld_style_marginTypeTop").val()?(jQuery("#lfb_tld_style_marginTop").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_marginTopFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_marginTypeTop").val()?(jQuery("#lfb_tld_style_marginTop").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginTopFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_marginTop").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginTopFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginTop:"auto"}))}function lfb_tld_style_marginTypeBottomChange(){"fixed"==jQuery("#lfb_tld_style_marginTypeBottom").val()?(jQuery("#lfb_tld_style_marginBottom").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_marginBottomFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_marginTypeBottom").val()?(jQuery("#lfb_tld_style_marginBottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginBottomFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_marginBottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_marginBottomFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginBottom:"auto"}))}function lfb_tld_style_paddingTypeBottomChange(){"fixed"==jQuery("#lfb_tld_style_paddingTypeBottom").val()?(jQuery("#lfb_tld_style_paddingBottom").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_paddingBottomFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_paddingTypeBottom").val()?(jQuery("#lfb_tld_style_paddingBottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingBottomFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_paddingBottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingBottomFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingBottom:"auto"}))}function lfb_tld_style_paddingTypeTopChange(){"fixed"==jQuery("#lfb_tld_style_paddingTypeTop").val()?(jQuery("#lfb_tld_style_paddingTop").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_paddingTopFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_paddingTypeTop").val()?(jQuery("#lfb_tld_style_paddingTop").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingTopFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_paddingTop").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingTopFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingTop:"auto"}))}function lfb_tld_style_paddingTypeLeftChange(){"fixed"==jQuery("#lfb_tld_style_paddingTypeLeft").val()?(jQuery("#lfb_tld_style_paddingLeft").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_paddingLeftFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_paddingTypeLeft").val()?(jQuery("#lfb_tld_style_paddingLeft").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingLeftFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_paddingLeft").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingLeftFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingLeft:"auto"}))}function lfb_tld_style_paddingTypeRightChange(){"fixed"==jQuery("#lfb_tld_style_paddingTypeRight").val()?(jQuery("#lfb_tld_style_paddingRight").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_paddingRightFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_paddingTypeRight").val()?(jQuery("#lfb_tld_style_paddingRight").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingRightFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_paddingRight").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_paddingRightFlex").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingRight:"auto"}))}function lfb_tld_style_positionTopChange(){"fixed"==jQuery("#lfb_tld_style_positionTop").val()?(jQuery("#lfb_tld_style_top").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_topFlex").closest(".form-group").slideUp()):"flexible"==jQuery("#lfb_tld_style_positionTop").val()?(jQuery("#lfb_tld_style_top").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_topFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_top").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({top:"auto"}))}function lfb_tld_style_positionBottomChange(){"fixed"==jQuery("#lfb_tld_style_positionBottom").val()?jQuery("#lfb_tld_style_bottom").closest(".form-group").slideDown():"flexible"==jQuery("#lfb_tld_style_positionBottom").val()?(jQuery("#lfb_tld_style_bottom").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_bottomFlex").closest(".form-group").slideDown()):(jQuery("#lfb_tld_style_bottom").closest(".form-group").slideUp(),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({bottom:"auto"}))}function lfb_tld_style_leftChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({left:jQuery("#lfb_tld_style_left").slider("value")})}function lfb_tld_style_rightChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({right:jQuery("#lfb_tld_style_right").slider("value")})}function lfb_tld_style_topChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({top:jQuery("#lfb_tld_style_top").slider("value")})}function lfb_tld_style_bottomChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({bottom:jQuery("#lfb_tld_style_bottom").slider("value")})}function lfb_tld_style_leftFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({left:jQuery("#lfb_tld_style_leftFlex").slider("value")+"%"})}function lfb_tld_style_rightFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({right:jQuery("#lfb_tld_style_rightFlex").slider("value")+"%"})}function lfb_tld_style_topFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({top:jQuery("#lfb_tld_style_topFlex").slider("value")+"%"})}function lfb_tld_style_bottomFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({bottom:jQuery("#lfb_tld_style_bottomFlex").slider("value")+"%"})}function lfb_tld_style_marginLeftFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginLeft:jQuery("#lfb_tld_style_marginLeftFlex").slider("value")+"%"})}function lfb_tld_style_marginRightFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginRight:jQuery("#lfb_tld_style_marginRightFlex").slider("value")+"%"})}function lfb_tld_style_marginTopFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginTop:jQuery("#lfb_tld_style_marginTopFlex").slider("value")+"%"})}function lfb_tld_style_marginBottomFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginBottom:jQuery("#lfb_tld_style_marginBottomFlex").slider("value")+"%"})}function lfb_tld_style_marginLeftChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginLeft:jQuery("#lfb_tld_style_marginLeft").slider("value")})}function lfb_tld_style_marginRightChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginRight:jQuery("#lfb_tld_style_marginRight").slider("value")})}function lfb_tld_style_marginTopChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginTop:jQuery("#lfb_tld_style_marginTop").slider("value")})}function lfb_tld_style_marginBottomChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({marginBottom:jQuery("#lfb_tld_style_marginBottom").slider("value")})}function lfb_tld_style_paddingLeftChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingLeft:jQuery("#lfb_tld_style_paddingLeft").slider("value")})}function lfb_tld_style_paddingRightChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingRight:jQuery("#lfb_tld_style_paddingRight").slider("value")})}function lfb_tld_style_paddingTopChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingTop:jQuery("#lfb_tld_style_paddingTop").slider("value")})}function lfb_tld_style_paddingBottomChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingBottom:jQuery("#lfb_tld_style_paddingBottom").slider("value")})}function lfb_tld_style_paddingLeftFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingLeft:jQuery("#lfb_tld_style_paddingLeftFlex").slider("value")+"%"})}function lfb_tld_style_paddingRightFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingRight:jQuery("#lfb_tld_style_paddingRightFlex").slider("value")+"%"})}function lfb_tld_style_paddingTopFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingTop:jQuery("#lfb_tld_style_paddingTopFlex").slider("value")+"%"})}function lfb_tld_style_paddingBottomFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({paddingBottom:jQuery("#lfb_tld_style_paddingBottomFlex").slider("value")+"%"})}function lfb_tld_style_fontTypeChange(){"google"==jQuery("#lfb_tld_style_fontType").val()?(jQuery("#lfb_tld_style_fontFamily").next(".lfb_tld_fieldBtn").show(),jQuery("#lfb_tld_style_fontFamily").addClass("lfb_tld_fieldHasBtn"),lfb_tld_selectedElement.attr("data-googlefont","true")):(jQuery("#lfb_tld_style_fontFamily").next(".lfb_tld_fieldBtn").hide(),lfb_tld_selectedElement.removeAttr("data-googlefont"),jQuery("#lfb_tld_style_fontFamily").removeClass("lfb_tld_fieldHasBtn"))}function lfb_tld_style_fontFamilyChange(){var e;lfb_tld_elementInitialized&&(lfb_tld_selectedElement.css({fontFamily:jQuery("#lfb_tld_style_fontFamily").val()}),jQuery("#lfb_tld_style_fontFamily option:selected").is('[data-default="true"]')?lfb_tld_selectedElement.removeAttr("data-googlefont"):(e=jQuery("#lfb_tld_style_fontFamily").val().replace(/ /g,"+"),lfb_tld_selectedElement.attr("data-googlefont","true"),jQuery("#lfb_tld_tdgnFrame").contents().find("head").append("<link href='https://fonts.googleapis.com/css?family="+e+"' rel='stylesheet' type='text/css'>")))}function lfb_tld_style_fontSizeChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({fontSize:jQuery("#lfb_tld_style_fontSize").slider("value")})}function lfb_tld_style_lineHeightChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({lineHeight:jQuery("#lfb_tld_style_lineHeight").slider("value")+"px"})}function lfb_tld_style_lineHeightFlexChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({lineHeight:jQuery("#lfb_tld_style_lineHeightFlex").slider("value")+"%"})}function lfb_tld_style_lineHeightTypeChange(){"flexible"==jQuery("#lfb_tld_style_lineHeightType").val()?(jQuery("#lfb_tld_style_lineHeightFlex").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_lineHeight").closest(".form-group").slideUp()):(jQuery("#lfb_tld_style_lineHeightFlex").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_lineHeight").closest(".form-group").slideDown())}function lfb_tld_style_scrollXChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({overflowX:jQuery("#lfb_tld_style_scrollX").val()})}function lfb_tld_style_scrollYChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({overflowY:jQuery("#lfb_tld_style_scrollY").val()})}function lfb_tld_style_visibilityChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({visibility:jQuery("#lfb_tld_style_visibility").val()})}function lfb_tld_style_shadowTypeChange(){var e=jQuery("#lfb_tld_style_shadowType").val();"none"==e?(jQuery("#lfb_tld_style_shadowX").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_shadowY").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_shadowSize").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_shadowColor").closest(".form-group").slideUp(),jQuery("#lfb_tld_style_shadowAlpha").closest(".form-group").slideUp(),lfb_tld_selectedElement.removeClass("lfb_tld_hasShadow")):(jQuery("#lfb_tld_style_shadowX").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_shadowY").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_shadowSize").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_shadowColor").closest(".form-group").slideDown(),jQuery("#lfb_tld_style_shadowAlpha").closest(".form-group").slideDown(),lfb_tld_selectedElement.is(".lfb_tld_hasShadow")||lfb_tld_selectedElement.addClass("lfb_tld_hasShadow")),lfb_tld_style_shadowChange()}function lfb_tld_style_shadowChange(){var e=jQuery("#lfb_tld_style_shadowType").val(),t=jQuery("#lfb_tld_style_shadowX").slider("value"),l=jQuery("#lfb_tld_style_shadowY").slider("value"),a=jQuery("#lfb_tld_style_shadowSize").slider("value"),n=jQuery("#lfb_tld_style_shadowColor").val();-1<jQuery("#lfb_tld_style_shadowColor").val().indexOf("rgb")&&(n=lfb_tld_rgb2hex(jQuery("#lfb_tld_style_shadowColor").val())),n=lfb_tld_hex2Rgba(n,jQuery("#lfb_tld_style_shadowAlpha").slider("value")),"none"==e?lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({boxShadow:"none"}):(e="inside"==e?"inset":"",lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({boxShadow:n+ +t+"px "+l+"px "+a+"px "+e+" "}))}function lfb_tld_style_borderRadiusChange(){var e=jQuery("#lfb_tld_style_borderRadiusTopLeft").slider("value"),t=jQuery("#lfb_tld_style_borderRadiusTopRight").slider("value"),l=jQuery("#lfb_tld_style_borderRadiusBottomLeft").slider("value"),a=jQuery("#lfb_tld_style_borderRadiusBottomRight").slider("value");lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({"border-top-left-radius":e+"px","border-top-right-radius":t+"px","border-bottom-left-radius":l+"px","border-bottom-right-radius":a+"px"})}function lfb_tld_style_textShadowChange(){var e=jQuery("#lfb_tld_style_textShadowX").slider("value"),t=jQuery("#lfb_tld_style_textShadowY").slider("value"),l=jQuery("#lfb_tld_style_textShadowColor").val();-1<jQuery("#lfb_tld_style_textShadowColor").val().indexOf("rgb")&&(l=lfb_tld_rgb2hex(jQuery("#lfb_tld_style_textShadowColor").val())),l=lfb_tld_hex2Rgba(l,jQuery("#lfb_tld_style_textShadowAlpha").slider("value")),lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({textShadow:e+"px "+t+"px "+l})}function lfb_tld_style_textAlignChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({textAlign:jQuery("#lfb_tld_style_textAlign").val()})}function lfb_tld_style_opacityChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({opacity:jQuery("#lfb_tld_style_opacity").slider("value")})}function lfb_tld_style_fontStyleChange(){var e=new Array;jQuery("#lfb_tld_style_fontStyle option:selected").each(function(){e.push(jQuery(this).attr("value"))}),lfb_tld_elementInitialized&&(lfb_tld_selectedElement.css({fontStyle:"normal"}),lfb_tld_selectedElement.css({fontWeight:"normal"}),lfb_tld_selectedElement.css({textDecoration:"none"}),-1<jQuery.inArray("bold",e)&&lfb_tld_selectedElement.css({fontWeight:"bold"}),-1<jQuery.inArray("italic",e)&&lfb_tld_selectedElement.css({fontStyle:"italic"}),-1<jQuery.inArray("underline",e)&&lfb_tld_selectedElement.css({textDecoration:"underline"}))}function lfb_tld_style_fontColorChange(){lfb_tld_elementInitialized&&lfb_tld_selectedElement.css({color:jQuery("#lfb_tld_style_fontColor").val()})}function lfb_tld_saveCurrentElement(){var e,t,l,a=lfb_tld_getElementData(lfb_tld_selectedElement,lfb_tld_deviceMode),n='#lfb_form.lfb_bootstraped[data-form="'+lfb_currentFormID+'"] '+lfb_tld_getPath(lfb_tld_selectedElement,!1,!0);"cssClasses"==jQuery("#lfb_tld_tdgn_applyModifsTo").val()&&(" "==(t=jQuery("#lfb_tld_tdgn_applyToClasses").val()).substr(t.length-1)&&(t=t.substr(0,t.length-1))," "==t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),t=(t="."+t).replaceAll(" ","."),n='#lfb_form.lfb_bootstraped[data-form="'+lfb_currentFormID+'"] '+t),lfb_tld_selectedElement.attr("style")&&""!=lfb_tld_selectedElement.attr("style")&&(a&&a.domSelector==n?"default"==jQuery("#lfb_tld_stateSelect").val()?a.style=lfb_tld_selectedElement.attr("style"):"focus"==jQuery("#lfb_tld_stateSelect").val()?a.focusStyle=lfb_tld_selectedElement.attr("style"):a.hoverStyle=lfb_tld_selectedElement.attr("style"):(e=lfb_tld_getElementsDataByDevice(lfb_tld_deviceMode))&&(a=lfb_tld_selectedElement.attr("style").replace(lfb_tld_selectedElement.attr("data-originalstyle"),""),"cssClasses"==jQuery("#lfb_tld_tdgn_applyModifsTo").val()&&(" "==(t=jQuery("#lfb_tld_tdgn_applyToClasses").val()).substr(t.length-1)&&(t=t.substr(0,t.length-1))," "==t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),t=t.replaceAll(" ","."),n='#lfb_form.lfb_bootstraped[data-form="'+lfb_currentFormID+'"] .'+t),"page"==jQuery("#lfb_tld_tdgn_applyScope").val()?(l="",jQuery.each(jQuery("#lfb_tld_tdgnFrame").contents().find("body").attr("class").split(" "),function(){0==this.indexOf("page-id-")&&(l="body."+this)}),n=l+' #lfb_form.lfb_bootstraped[data-form="'+lfb_currentFormID+'"] '+n):"container"==jQuery("#lfb_tld_tdgn_applyScope").val()&&0<jQuery("#lfb_tld_tdgn_scopeContainerClass").val().length&&(n='#lfb_form.lfb_bootstraped[data-form="'+lfb_currentFormID+'"] .'+jQuery("#lfb_tld_tdgn_scopeContainerClass").val()+" > "+n),"default"==jQuery("#lfb_tld_stateSelect").val()?e.elements.push({element:lfb_tld_selectedElement.get(0),domSelector:n,style:a}):"focus"==jQuery("#lfb_tld_stateSelect").val()?e.elements.push({element:lfb_tld_selectedElement.get(0),domSelector:n,focusStyle:a}):e.elements.push({element:lfb_tld_selectedElement.get(0),domSelector:n,hoverStyle:a})),lfb_tld_notification(lfb_data.texts.stylesApplied,"glyphicon glyphicon-info-sign",!1,!0),lfb_tld_modifsMade=!0,jQuery(".lfb_tld_tdgn_section:not(.lfb_tld_closed)").each(function(){lfb_tld_tdgn_toggleSection(jQuery(this),!1)}))}function lfb_tld_getElementData(e,t){var l=!1;return jQuery.each(lfb_tld_styles,function(){this.device==t&&jQuery.each(this.elements,function(){this.element===e.get(0)&&(l=this)})}),l}function lfb_tld_getElementsDataByDevice(e){var t=!1;return jQuery.each(lfb_tld_styles,function(){this.device==e&&(t=this)}),t}function lfb_tld_getGoogleFontsUsed(){lfb_tld_usedGoogleFonts=new Array,jQuery("#lfb_tld_tdgnFrame").contents().find('[data-googlefont="true"]').each(function(){var e=jQuery(this).css("font-family");-1==jQuery.inArray(e,lfb_tld_usedGoogleFonts)&&lfb_tld_usedGoogleFonts.push(e)});var e="";return jQuery.each(lfb_tld_usedGoogleFonts,function(){e+=this+","}),e}function lfb_tld_formatStylesBeforeSend(){var t=new Array;return jQuery.each(lfb_tld_styles,function(){var e={device:this.device,elements:new Array};jQuery.each(this.elements,function(){e.elements.push({domSelector:this.domSelector,style:this.style,hoverStyle:this.hoverStyle,focusStyle:this.focusStyle})}),t.push(e)}),JSON.stringify(t)}function lfb_tld_exportCSS(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_tld_exportCSS",styles:lfb_tld_formatStylesBeforeSend(),formID:lfb_currentFormID,gfonts:lfb_tld_getGoogleFontsUsed()},success:function(e){window.open(lfb_data.exportUrl+e,"_blank").focus(),jQuery("#lfb_loader").fadeOut()}})}function lfb_tld_leave(){lfb_tld_modifsMade?(jQuery("#lfb_tld_winSaveDialog").fadeIn(260),jQuery("#lfb_tld_winSaveDialog").fadeIn()):lfb_closeFormDesigner()}function lfb_tld_leaveConfirm(){lfb_closeFormDesigner()}function lfb_tld_changeStateMode(){lfb_tld_elementInitialized&&lfb_tld_changeDeviceMode(lfb_tld_deviceMode)}function lfb_tld_resetStyles(){jQuery("#lfb_tld_winResetStylesDialog").fadeIn(260)}function lfb_tld_resetSessionStyles(){jQuery.each(lfb_tld_styles,function(){this.elements=new Array}),lfb_tld_changeDeviceMode(lfb_tld_deviceMode)}function lfb_tld_resetAllStyles(){lfb_showLoader(),lfb_tld_resetSessionStyles(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_tld_resetCSS",formID:lfb_currentFormID},success:function(e){var t=Math.floor(1e4*Math.random()+1);lfb_tld_notification(lfb_data.texts.modifsSaved,"glyphicon glyphicon-info-sign",!1,!0),jQuery("#lfb_tld_tdgnFrame").attr("src",lfb_tld_previewUrl+"&tmp="+t+"&lfb_designForm=1"),lfb_tld_initStyles(),lfb_tld_unselectElement(),jQuery("#lfb_loader").fadeOut()}})}function lfb_tld_editCSS(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_tld_getCSS",formID:lfb_currentFormID},success:function(e){lfb_tld_editorCSS.setValue(e),setTimeout(function(){lfb_tld_editorCSS.refresh()},300),jQuery("#lfb_tld_winEditCSSDialog").fadeIn(260),jQuery("#lfb_loader").fadeOut()}})}function lfb_tld_saveEditedCSS(){lfb_showLoader(),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"lfb_tld_saveEditedCSS",formID:lfb_currentFormID,css:lfb_tld_editorCSS.getValue()},success:function(e){var t=Math.floor(1e4*Math.random()+1);lfb_tld_notification(lfb_data.texts.modifsSaved,"glyphicon glyphicon-info-sign",!1,!0),jQuery("#lfb_tld_tdgnFrame").attr("src",lfb_tld_previewUrl+"&tmp="+t+"&lfb_designForm=1"),lfb_tld_initStyles(),lfb_tld_unselectElement(),jQuery("#lfb_loader").fadeOut()}})}function lfb_tld_openSaveBeforeEditDialog(){lfb_tld_modifsMade?jQuery("#lfb_tld_winSaveBeforeEditDialog").fadeIn(260):lfb_tld_editCSS()}}(jQuery);